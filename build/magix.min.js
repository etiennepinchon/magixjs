/* magixjs.com || Created by Etienne Pinchon (@etiennepinchon) || Copyright @2016 */var __MAGIX_JS_BUILD_DATE__=1479093182.894;"use strict";function EE(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function EE3(){}var MagiX;MagiX||(MagiX={version:"1.0",creator:"Etienne Pinchon (@etiennepinchon)",about:"In mystery lies beauty.",copyright:"magixjs.com"});var Defaults,NULL,Originals;NULL=void 0,Originals={View:{width:200,height:200,backgroundColor:"rgba(123,123,123,0.5)"},Page:{fixed:!0,x:0,y:0,width:"100%",height:"100%",backgroundColor:"white"},Transition:{properties:{},time:.3,delay:0,view:null,curve:"ease"},ViewDraggable:{momentum:!0,momentumOptions:{friction:2.1,tolerance:1},bounce:!0,bounceOptions:{friction:40,tension:200,tolerance:1},directionLock:!1,directionLockThreshold:{x:10,y:10},overdrag:!0,overdragScale:.5,pixelAlign:!0,velocityTimeout:100,velocityScale:890},Animation:{view:null,delay:0,curve:"ease",curveOptions:{},time:.3,repeat:0,properties:{}},FrictionSimulator:{friction:2,tolerance:.1},SpringSimulator:{tension:500,friction:10,tolerance:1e-4},MomentumBounceSimulator:{momentum:{friction:2,tolerance:10},bounce:{tension:500,friction:10,tolerance:1}},Context:{perspective:0,perspectiveOriginX:.5,perspectiveOriginY:.5,parent:null,name:null},Pview:{width:300},TextField:{padding:8,width:300,fontSize:16,backgroundColor:"rgba(123,123,123,0.5)",borderWidth:0,color:"white",spacing:.6,userInteraction:!0},TextView:{padding:8,width:300,height:64,fontSize:16,scrollVertical:!0,backgroundColor:"rgba(123,123,123,0.5)",borderWidth:0,color:"white",spacing:.6,resize:!1,userInteraction:!0},WebView:{width:400,height:300},Slider:{width:200,height:200,backgroundColor:"rgba(123,123,123,0.5)"},ProgressBar:{},Dropdown:{__width:{w:200,width:200}},List:{},ListItem:{},Image:{},Text:{clip:!1,width:"100%",align:"left",userInteraction:!1,display:"table"},Link:{width:"100%",align:"center",display:"block",color:"black",userInteraction:!1},FileField:{padding:{x:12,y:10}},Checkbox:{Text:{display:"inline-block",cursor:"pointer",margin:{left:3},color:"#333",fontSize:13}},RadioButton:{Text:{display:"inline-block",cursor:"pointer",marginLeft:4,color:"#333",fontSize:13}},Button:{display:"block",padding:{x:20,y:8},margin:0,fontSize:14,backgroundColor:"rgba(123,123,123,0.5)",color:"white",borderWidth:0,cursor:"pointer",userInteraction:!1,borderBox:!0},Canvas:{width:200,height:200,backgroundColor:"rgba(123,123,123,0.5)"}},Defaults={set:function(t,e){return App.defaults.hasOwnProperty(t)?App.defaults[t]=Utils.extend(App.defaults[t],e):App.defaults[t]=e},getDefaults:function(t,e){var n,i;if(!App.defaults.hasOwnProperty(t))return e;n=Utils.clone(App.defaults[t]);for(i in e)n.hasOwnProperty(i)&&delete n[i];return[n,e]},get:function(t,e){var n,i,o,r;if(!App.defaults.hasOwnProperty(t))return{};n=Utils.clone(App.defaults[t]),r=App.defaults[t];for(i in r)o=r[i],n[i]=Utils.isFunction(o)?o():o;for(i in e)o=e[i],n[i]=o;return n},setup:function(){var t,e,n,i,o;if(App.defaults){o=App.defaults;for(t in o){e=o[t];for(n in e)i=e[n],Originals[t][n]=i}}return Defaults.reset()},reset:function(){return App.defaults=Utils.clone(Originals)}};var Utils,__domComplete,__domReady,__indexOf=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},__slice=[].slice;Utils={},Utils.parseAsset=function(t){var e,n;return t&&0!==t.length&&void 0!==window.__CATALOG&&(n="",e=t.split(".").pop(),t===e)?void 0===window.__CATALOG[t]?(log("Asset named '"+t+"' does not exist.","error"),""):(n="documents/"+t+"."+window.__CATALOG[t],n=window.__IS_DIRECT_PATH&&window.__ID?"/"+window.__ID+"/"+n:void 0!==window.USE_PROJECT_PATH&&void 0!==window.__ID?"/p/"+window.__ID+"/"+n:"/"+n,App.__BUILD&&!App.USE_PROJECT_PATH&&(n+="?b="+App.__BUILD),n):t},Utils.parseURL=function(t){var e;return void 0===window.USE_PROJECT_PATH&&void 0===window.__IS_DIRECT_PATH||void 0===window.__ID||(e=function(t){var e,n;return e=function(t){return t.replace("http://","").replace("https://","").split("/")[0]},n=e(t),""!==n&&e(location.href)!==n},e(t)||("/"!==t[0]&&(t="/"+t),(App.USE_PROJECT_PATH||App.__IS_DIRECT_PATH)&&(t="/"+window.__ID+t,App.USE_PROJECT_PATH&&(t="/p"+t)))),t},Utils.base64=function(t){return window.btoa(escape(encodeURIComponent(t)))},Utils.utf8=function(t){return decodeURIComponent(unescape(window.atob(t)))},Utils.groupBy=function(t,e){var n;return n={},t.forEach(function(t){var i;i=JSON.stringify(e(t)),n[i]=n[i]||[],n[i].push(t)}),Object.keys(n).map(function(t){return n[t]})},Utils.mergeArray=function(t,e){return t.concat(e)},Utils.values=function(t){var e,n,i,o,r;for(n=Object.keys(t),i=[],o=0,r=n.length;o<r;o++)e=n[o],i.push(t[e]);return i},Utils.pluck=function(t,e){return t.map(function(t){return t[e]})},Utils.without=function(t,e){return Utils.isArray(t)||(t=[t]),Utils.isArray(e)||(e=[e]),t.filter(function(t){return e.indexOf(t)<0})},Utils.e=function(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},Utils.clone=function(t){var e,n,i;if(Utils.isArray(t))return t.slice(0);for(e=Object.create(Object.getPrototypeOf(t)),n=void 0,i=Object.getOwnPropertyNames(t),n=0;n<i.length;)Object.defineProperty(e,i[n],Object.getOwnPropertyDescriptor(t,i[n])),n++;return e},Utils.capitalizeFirstLetter=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},Utils.capitalizeFirst=Utils.capitalizeFirstLetter,Utils.startsWith=function(t,e){return 0===t.lastIndexOf(e,0)},Utils.endsWith=function(t,e){return t.indexOf(e,t.length-e.length)!==-1},Utils.pick=function(t,e){var n,i,o,r,s;for(o={},n=0;n<e.length;){for(s=e[n].split("."),r=t[s[0]],i=1;i<s.length;)r=r[s[i]],i++;o[e[n]]=r,n++}return o},Utils.min=function(t){return Utils.isArray(t)?Math.min.apply(null,t):Object.keys(t).sort()[0]},Utils.max=function(t){return Utils.isArray(t)?Math.max.apply(null,t):Object.keys(t).sort().slice(-1)[0]},Utils.isEqual=function(t,e){var n;return null===t||void 0===t||null===e||void 0===e?t===e:t.constructor===e.constructor&&(t instanceof Function?t===e:t instanceof RegExp?t===e:t===e||t.valueOf()===e.valueOf()||(!Array.isArray(t)||t.length===e.length)&&(!(t instanceof Date)&&(t instanceof Object&&(e instanceof Object&&(n=Object.keys(t),Object.keys(e).every(function(t){return n.indexOf(t)!==-1})&&n.every(function(n){return Utils.isEqual(t[n],e[n])}))))))},Utils.invoke=function(t,e){var n,i;return n=Array.prototype.slice.call(arguments,2),i="function"==typeof e,t.map(function(t){return(i?e:t[e]).apply(t,n)})},Utils.first=function(t){return t[0]},Utils.last=function(t){return t[t.length-1]},Utils.extend=function(t,e){var n;for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},Utils.defaults=function(t,e){var n;for(n in e)t.hasOwnProperty(n)||(t[n]=e[n]);return t},Utils.union=function(t,e){var n,i,o,r;for(i=t.concat(e),n=i.concat(),o=0;o<n.length;){for(r=o+1;r<n.length;)n[o]===n[r]&&n.splice(r--,1),++r;++o}return n},Utils.isString=function(t){return"string"==typeof t},Utils.isFunction=function(t){return"function"==typeof t},Utils.isBoolean=function(t){return"boolean"==typeof t},Utils.isFloat=function(t){return Number(t)===t&&t%1!==0},Utils.isInteger=function(t){return Number.isInteger(t)},Utils.isNumber=function(t){return!isNaN(t)},Utils.isArray=function(t){return Array.isArray(t)},Utils.isObject=function(t){return!(!t||"object"!=typeof t)},Utils.isFinite=function(t){return t<1/0&&t>-(1/0)},Utils.isDate=function(t){return t instanceof Date},Utils.isRegExp=function(t){return t instanceof RegExp},Utils.isError=function(t){return t instanceof Error},Utils.isNaN=function(t){return!!isNaN(t)},Utils.isNull=function(t){return null===t},Utils.isUndefined=function(t){return void 0===t},Utils.keys=function(t){return Object.keys(t)},Utils.reset=function(){return App.CurrentContext.reset()},Utils.getValue=function(t){return Utils.isFunction(t)?t():t},Utils.getValueForKeyPath=function(t,e){var n,i,o,r,s;if(n=t,r=!1,__indexOf.call(e,r)>=0)return t[e];for(s=e.split("."),i=0,o=s.length;i<o;i++)e=s[i],n=n[e];return n},Utils.setValueForKeyPath=function(t,e,n){var i,o,r,s,a;for(o=e.split("."),a=t,r=0,s=o.length;r<s&&void 0!==a;)i=o[r],r===s-1?a[i]=n:("undefined"!=typeof a[i]&&Utils.isObject(a[i])||(a[i]={}),a=a[i]),r++},Utils.valueOrDefault=function(t,e){return void 0!==t&&null!==t||(t=e),t},Utils.arrayNext=function(t,e){return t[t.indexOf(e)+1]||Utils.first(t)},Utils.arrayPrev=function(t,e){return t[t.indexOf(e)-1]||Utils.last(t)},Utils.sum=function(t){return t.reduce(function(t,e){return t+e})},Utils.average=function(t){return Utils.sum(t)/t.length},Utils.mean=Utils.average,Utils.median=function(t){var e;return 0===t.length?null:(e=t.slice().sort(function(t,e){return t-e}),e.length%2===1?e[(e.length-1)/2]:(e[e.length/2-1]+e[e.length/2])/2)},Utils.nearestIncrement=function(t,e){return e?Math.round(t*(1/e))/(1/e):t},window.performance?Utils.getTime=function(){return window.performance.now()/1e3}:Utils.getTime=function(){return Date.now()/1e3},Utils.delay=function(t,e){var n;return n=setTimeout(e,1e3*t),App.CurrentContext.addTimer(n),n},Utils.interval=function(t,e){var n;return n=setInterval(e,1e3*t),App.CurrentContext.addInterval(n),{stop:function(){return clearInterval(n)},clear:function(){return clearInterval(n)}}},Utils.debounce=function(t,e,n){var i;return null==t&&(t=.1),i=null,t*=1e3,function(){var o,r,s;return o=1<=arguments.length?__slice.call(arguments,0):[],s=this,r=function(){return n||e.apply(s,o),i=null},i?clearTimeout(i):n&&e.apply(s,o),i=setTimeout(r,t)}},Utils.throttle=function(t,e){var n;return 0===t?e:(t*=1e3,n=!1,function(){if(!n)return n=!0,t!==-1&&setTimeout(function(){return n=!1},t),e.apply(null,arguments)})},Utils.randomColor=function(t){return null==t&&(t=1),Color.random(t)},Utils.randomChoice=function(t){return t[Math.floor(Math.random()*t.length)]},Utils.randomNumber=function(t,e){return null==t&&(t=0),null==e&&(e=1),Utils.mapRange(Math.random(),0,1,t,e)},Utils.defineEnum=function(t,e,n){var i,o,r,s,a,u;for(null==t&&(t=[]),null==e&&(e=0),null==n&&(n=0),i={},o=a=0,u=t.length;a<u;o=++a)s=t[o],r=o,r=e?r+e:r,r=n?Math.pow(n,r):r,i[i[s]=r]=s;return i},Utils.stringify=function(t){try{if(Utils.isObject(t))return JSON.stringify(t)}catch(t){}return null===t?"null":void 0===t?"undefined":t.toString?t.toString():t},Utils.randomID=function(){return Math.floor(1e5*Math.random()+1)},Utils.uuid=function(){var t,e,n,i,o,r;for(t="0123456789abcdefghijklmnopqrstuvwxyz".split(""),n=new Array(36),o=0,e=r=1;r<=32;e=++r)o<=2&&(o=33554432+16777216*Math.random()|0),i=15&o,o>>=4,n[e]=t[19===e?3&i|8:i];return n.join("")},Utils.arrayFromArguments=function(t){return Utils.isArray(t[0])?t[0]:Array.prototype.slice.call(t)},Utils.cycle=function(){var t,e;return t=Utils.arrayFromArguments(arguments),e=-1,function(){return e++,e>=t.length&&(e=0),t[e]}},Utils.browser=function(){var t,e,n;return n=navigator.userAgent,e=void 0,t=n.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],/trident/i.test(t[1])?(e=/\brv[ :]+(\d+)/g.exec(n)||[],{name:"IE",version:e[1]||""}):"Chrome"===t[1]&&(e=n.match(/\bOPR\/(\d+)/),null!==e)?{name:"Opera",version:e[1]}:(t=t[2]?[t[1],t[2]]:[navigator.appName,navigator.appVersion,"-?"],null!==(e=n.match(/version\/(\d+)/i))&&t.splice(1,1,e[1]),{name:t[0],version:t[1]})},Utils.isWebKit=function(){return void 0!==window.WebKitCSSMatrix},Utils.webkitVersion=function(){var t,e,n;return n=-1,t=/AppleWebKit\/([\d.]+)/,e=t.exec(navigator.userAgent),e&&(n=parseFloat(e[1])),n},Utils.isChrome=function(){return/chrome/.test(navigator.userAgent.toLowerCase())},Utils.isSafari=function(){return!(!/safari/.test(navigator.userAgent.toLowerCase())||Utils.isChrome())},Utils.isTouch=function(){return null===window.ontouchstart&&null===window.ontouchmove&&null===window.ontouchend},Utils.isDesktop=function(){return"desktop"===Utils.deviceType()},Utils.isPhone=function(){return"phone"===Utils.deviceType()},Utils.isTablet=function(){return"tablet"===Utils.deviceType()},Utils.isMobile=function(){return Utils.isPhone()||Utils.isTablet()},Utils.isFileUrl=function(t){if(t)return Utils.startsWith(t,"file://")},Utils.isRelativeUrl=function(t){return!/^([a-zA-Z]{1,8}:\/\/).*$/.test(t)},Utils.isLocalServerUrl=function(t){return t.indexOf("127.0.0.1")!==-1||t.indexOf("localhost")!==-1},Utils.isLocalUrl=function(t){return!!Utils.isFileUrl(t)||!!Utils.isLocalServerUrl(t)},Utils.devicePixelRatio=function(){return window.devicePixelRatio},Utils.deviceType=function(){return/(tablet)|(iPad)|(Nexus 9)/i.test(navigator.userAgent)?"tablet":/(mobi)/i.test(navigator.userAgent)?"phone":"desktop"},Utils.pathJoin=function(){return Utils.arrayFromArguments(arguments).join("/")},Utils.round=function(t,e){var n;return null==e&&(e=0),n=Math.pow(10,e),Math.round(t*n)/n},Utils.clamp=function(t,e,n){var i,o;return o=Math.min(e,n),i=Math.max(e,n),t<o&&(t=o),t>i&&(t=i),t},Utils.mapRange=function(t,e,n,i,o){return i+(t-e)/(n-e)*(o-i)},Utils.modulate=function(t,e,n,i){var o,r,s,a,u;if(null==i&&(i=!1),r=e[0],o=e[1],u=n[0],a=n[1],s=u+(t-r)/(o-r)*(a-u),i===!0)if(u<a){if(s<u)return u;if(s>a)return a}else{if(s>u)return u;if(s<a)return a}return s},Utils.parseFunction=function(t){var e;return e={name:"",args:[]},Utils.endsWith(t,")")?(e.name=t.split("(")[0],e.args=t.split("(")[1].split(",").map(function(t){return t.replace(/\)+$/,"").trim()})):e.name=t,e},__domComplete=[],__domReady=!1,MagiX.__domReady&&(__domReady=!0),"undefined"!=typeof document&&null!==document&&(document.onreadystatechange=function(t){var e,n;if("interactive"===document.readyState){for(__domReady=!0,n=[];__domComplete.length;)n.push(e=__domComplete.shift()());return n}}),Utils.domComplete=function(t){return __domReady?t():__domComplete.push(t)},Utils.domCompleteCancel=function(t){return __domComplete=Utils.without(__domComplete,t)},Utils.domValidEvent=function(t,e){if(e)return"touchstart"===e||"touchmove"===e||"touchend"===e||"undefined"!=typeof t["on"+e.toLowerCase()]},Utils.domLoadScript=function(t,e){var n;if(!App.isOffline())return n=document.createElement("script"),n.type="text/javascript",n.src=t,Utils.isFunction(e)&&(n.onreadystatechange=e.bind(t),n.onload=e.bind(t)),Utils.domComplete(function(){return document.body.appendChild(n)})},Utils.insertCSS=function(t){var e;return e=document.createElement("style"),e.type="text/css",e.innerHTML=t,Utils.domComplete(function(){var t;return t=document.head||document.getElementsByTagName("head")[0],t.appendChild(e)})},Utils.loadCSS=function(t){var e,n,i,o,r,s,a,u;if(t){for(Utils.isString(t)&&(t=[t]),o=[],u=[],s=0,a=t.length;s<a;s++)i=t[s],i.indexOf(".css")===-1&&(i="/build/"+i+".css",App.USE_PROJECT_PATH&&(r=App.location.pathname.split("/"),r.shift(),r.shift(),i="/p/"+r[0]+"/"+i)),App.__IS_DIRECT_PATH&&Utils.startsWith(i,"/build/")&&(i="/"+window.__ID+i),App.__BUILD&&(i+="?b="+App.__BUILD),e=document.getElementsByTagName("head")[0],n=document.createElement("link"),n.rel="stylesheet",n.type="text/css",n.href=i,n.media="all",u.push(e.appendChild(n));return u}},Utils.pointDivide=function(t,e){return t={x:t.x/e,y:t.y/e}},Utils.pointAdd=function(t,e){var n;return n={x:t.x+e.x,y:t.y+e.y}},Utils.pointSubtract=function(t,e){var n;return n={x:t.x-e.x,y:t.y-e.y}},Utils.pointZero=function(t){return null==t&&(t={}),Utils.defaults(t,{x:0,y:0})},Utils.pointMin=function(){var t,e;return e=Utils.arrayFromArguments(arguments),t={x:Utils.min(e.map(function(t){return t.x})),y:Utils.min(e.map(function(t){return t.y}))}},Utils.pointMax=function(){var t,e;return e=Utils.arrayFromArguments(arguments),t={x:Utils.max(e.map(function(t){return t.x})),y:Utils.max(e.map(function(t){return t.y}))}},Utils.pointDelta=function(t,e){var n;return n={x:e.x-t.x,y:e.y-t.y}},Utils.pointDistance=function(t,e){var n,i;return n=t.x-e.x,i=t.y-e.y,Math.sqrt(n*n+i*i)},Utils.pointInvert=function(t){return t={x:0-t.x,y:0-t.y}},Utils.pointTotal=function(t){return t.x+t.y},Utils.pointAbs=function(t){return t={x:Math.abs(t.x),y:Math.abs(t.y)}},Utils.pointInFrame=function(t,e){return!(t.x<Utils.frameGetMinX(e)||t.x>Utils.frameGetMaxX(e))&&!(t.y<Utils.frameGetMinY(e)||t.y>Utils.frameGetMaxY(e))},Utils.pointCenter=function(t,e){var n;return n={x:(t.x+e.x)/2,y:(t.y+e.y)/2}},Utils.pointAngle=function(t,e){return 180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI},Utils.sizeZero=function(t){return null==t&&(t={}),Utils.defaults(t,{width:0,height:0})},Utils.sizeMin=function(){var t,e;return e=Utils.arrayFromArguments(arguments),t={width:Utils.min(e.map(function(t){return t.width})),height:Utils.min(e.map(function(t){return t.height}))}},Utils.sizeMax=function(){var t,e;return e=Utils.arrayFromArguments(arguments),t={width:Utils.max(e.map(function(t){return t.width})),height:Utils.max(e.map(function(t){return t.height}))}},Utils.rectZero=function(t){return null==t&&(t={}),Utils.defaults(t,{top:0,right:0,bottom:0,left:0})},Utils.parseRect=function(t){if(Utils.isArray(t)&&Utils.isNumber(t[0])){if(1===t.length)return Utils.parseRect({top:t[0]});if(2===t.length)return Utils.parseRect({top:t[0],right:t[1]});if(3===t.length)return Utils.parseRect({top:t[0],right:t[1],bottom:t[2]});if(4===t.length)return Utils.parseRect({top:t[0],right:t[1],bottom:t[2],left:t[3]})}return Utils.isArray(t)&&Utils.isObject(t[0])?t[0]:Utils.isObject(t)?t:{}},Utils.frameGetMinX=function(t){return t.x},Utils.frameSetMinX=function(t,e){return t.x=e},Utils.frameGetMidX=function(t){return 0===t.width?0:t.x+t.width/2},Utils.frameSetMidX=function(t,e){return t.x=0===t.width?0:e-t.width/2},Utils.frameGetMaxX=function(t){return 0===t.width?0:t.x+t.width},Utils.frameSetMaxX=function(t,e){return t.x=0===t.width?0:e-t.width},Utils.frameGetMinY=function(t){return t.y},Utils.frameSetMinY=function(t,e){return t.y=e},Utils.frameGetMidY=function(t){return 0===t.height?0:t.y+t.height/2},Utils.frameSetMidY=function(t,e){return t.y=0===t.height?0:e-t.height/2},Utils.frameGetMaxY=function(t){return 0===t.height?0:t.y+t.height},Utils.frameSetMaxY=function(t,e){return t.y=0===t.height?0:e-t.height},Utils.frameZero=function(t){return null==t&&(t={}),Utils.defaults(t,{top:0,right:0,bottom:0,left:0})},Utils.frameSize=function(t){var e;return e={width:t.width,height:t.height}},Utils.framePoint=function(t){var e;return e={x:t.x,y:t.y}},Utils.pointsFromFrame=function(t){var e,n,i,o,r,s,a,u;return a=Utils.frameGetMinX(t),r=Utils.frameGetMaxX(t),u=Utils.frameGetMinY(t),s=Utils.frameGetMaxY(t),e={x:a,y:u},n={x:a,y:s},i={x:r,y:s},o={x:r,y:u},[e,n,i,o]},Utils.frameFromPoints=function(t){var e,n,i,o,r,s,a;return s=Utils.pluck(t,"x"),a=Utils.pluck(t,"y"),o=Utils.min(s),n=Utils.max(s),r=Utils.min(a),i=Utils.max(a),e={x:o,y:r,width:n-o,height:i-r}},Utils.pixelAlignedFrame=function(t){var e;return e={width:Math.round(t.width+t.x%1),height:Math.round(t.height+t.y%1),x:Math.round(t.x),y:Math.round(t.y)}},Utils.frameMerge=function(){var t,e;return e=Utils.arrayFromArguments(arguments),t={x:Utils.min(e.map(Utils.frameGetMinX)),y:Utils.min(e.map(Utils.frameGetMinY))},t.width=Utils.max(e.map(Utils.frameGetMaxX))-t.x,t.height=Utils.max(e.map(Utils.frameGetMaxY))-t.y,t},Utils.framePointForOrigin=function(t,e,n){return t={x:t.x+e*t.width,y:t.y+n*t.height,width:t.width,height:t.height}},Utils.frameInset=function(t,e){return Utils.isNumber(e)&&(e={top:e,right:e,bottom:e,left:e}),t={x:t.x+e.left,y:t.y+e.top,width:t.width-e.left-e.right,height:t.height-e.top-e.bottom}},Utils.frameSortByAbsoluteDistance=function(t,e,n,i){var o;return null==n&&(n=0),null==i&&(i=0),o=function(e){var o;return o=Utils.pointDelta(t,Utils.framePointForOrigin(e,n,i)),o=Utils.pointAbs(o),o=Utils.pointTotal(o)},e.sort(function(t,e){return o(t)-o(e)})},Utils.pointInPolygon=function(t,e){var n,i,o,r,s,a,u,h,p,l;for(s=t[0],h=t[1],i=!1,n=0,r=e.length-1;n<e.length;)a=e[n][0],p=e[n][1],u=e[r][0],l=e[r][1],o=p>h&&h!==l&&l>h&&s<(u-a)*(h-p)/(l-p)+a,o&&(i=!i),r=n++;return i},Utils.frameCenterPoint=function(t){var e;return e={x:Utils.frameGetMidX(t),y:Utils.frameGetMidY(t)}},Utils.rotationNormalizer=function(){var t;return t=null,function(e){return function(e){var n,i,o;return null==t&&(t=e),n=t-e,i=Math.abs(n)+180,o=Math.floor(i/360),n<180&&(e-=360*o),n>180&&(e+=360*o),t=e,e}}(this)},Utils.inspectObjectType=function(t){var e,n;return null!=t._kind&&"Object"!==t._kind?t._kind:(n=function(t){var e,n;return t?(n=/\[object (\w+)\]/,e=n.exec(t),e?e[1]:null):null},t.toString&&(e=n(t.toString()))?e:"Object")},Utils.inspect=function(t,e,n){var i,o,r,s,a;if(null==e&&(e=5),null==n&&(n=0),null===t)return"null";if(void 0===t)return"undefined";if(Utils.isFunction(t.toInspect))return t.toInspect();if(Utils.isString(t))return'"'+t+'"';if(Utils.isNumber(t))return""+t;if(Utils.isFunction(t))return i=t.toString().slice("function ".length).replace(/\n/g,"").replace(/\s+/g," "),o=50,i.length>o&&n>0&&(i=""+Utils.trimRight(i.slice(0,+o+1||9e9))+"… }"),"<Function "+i+">";if(Utils.isArray(t))return n>e?"[...]":"["+t.map(function(t){return Utils.inspect(t,e,n+1)}).join(", ")+"]";if(Utils.isObject(t)){if(s=Utils.inspectObjectType(t),/HTML\w+?Element/.test(s))return"<"+s+">";if(n>e)r="{...}";else{r=[];for(a in t)r.push(""+a+":"+Utils.inspect(t[a],e,n+1).toString());r="{"+r.join(", ")+"}"}return"Object"===s?r:"<"+s+" "+r+">"}return""+t},Utils.formatBytes=function(t,e){var n,i,o,r;return 0===t?"0 Byte":(o=1e3,n=e+1||3,r=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],i=Math.floor(Math.log(t)/Math.log(o)),parseFloat((t/Math.pow(o,i)).toFixed(n))+" "+r[i])};var _css_reset;_css_reset="html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, section, summary, time, mark, audio, video { margin: 0; padding: 0; border: 0; font-size: 100%; font: inherit; vertical-align: baseline; } /* HTML5 display-role reset for older browsers */ article, aside, details, figcaption, figure,  footer, header, hgroup, menu, nav, section { display: block; } body { line-height: 1; overflow: hidden; outline: none; text-decoration: none; font-family: Arial, sans-serif; } ol, ul { list-style: none; } blockquote, q { quotes: none; } blockquote:before, blockquote:after, q:before, q:after { content: ''; content: none; } table { border-collapse: collapse; border-spacing: 0; } a { text-decoration: none; } input, textarea { -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; vertical-align: top; outline: none; } .no-select { user-select: none; -o-user-select:none; -moz-user-select: none; -khtml-user-select: none; -webkit-user-select: none; } .select { user-select: text !important; -o-user-select: text !important; -moz-user-select: text !important; -khtml-user-select: text !important; -webkit-user-select: text !important; } :-webkit-full-screen\t{ display: block !important; width: 100% !important; height: 100% !important; } :-moz-full-screen\t\t{ display: block !important; width: 100% !important; height: 100% !important; } :-ms-full-screen\t\t{ display: block !important; width: 100% !important; height: 100% !important; } :-o-full-screen\t\t{ display: block !important; width: 100% !important; height: 100% !important; } :full-screen\t\t\t{ display: block !important; width: 100% !important; height: 100% !important; } ",Utils.domComplete(function(){return Utils.insertCSS(_css_reset)});var log,__slice=[].slice;log=function(){var t,e,n,i;if(t=1<=arguments.length?__slice.call(arguments,0):[],n="» "+t.map(function(t){return Utils.inspect(t)}).join(", "),i=NULL,App.inWebView()){try{i=window.parent.location.host===window.location.host}catch(t){e=t,i=NULL}if(!i)return;window.top.ORB_CONSOLE.push(n),window.top.REFRESH_ORB_CONSOLE!==NULL&&window.top.REFRESH_ORB_CONSOLE()}else console.log(n)},log._times={},log.time=function(t){log._times[t]=window.performance.now()},log.timeEnd=function(t){if(log._times[t])return log(Utils.round(window.performance.now()-log._times[t],2)+"ms")},!function(t){if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.Bounce=t()}}(function(){return function t(e,n,i){function o(s,a){if(!n[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+s+"'")}var h=n[s]={exports:{}};e[s][0].call(h.exports,function(t){var n=e[s][1][t];return o(n?n:t)},h,h.exports,t,e,n,i)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(t,e){var n,i,o;o=t("../math/matrix4d"),i={bounce:t("../easing/bounce"),sway:t("../easing/sway"),hardbounce:t("../easing/hardbounce"),hardsway:t("../easing/hardsway")},n=function(){function t(t){t||(t={}),null!=t.easing&&(this.easing=t.easing),null!=t.duration&&(this.duration=t.duration),null!=t.delay&&(this.delay=t.delay),null!=t.from&&(this.from=t.from),null!=t.to&&(this.to=t.to),this.easingObject=new i[this.easing](t)}return t.prototype.easing="bounce",t.prototype.duration=1e3,t.prototype.delay=0,t.prototype.from=null,t.prototype.to=null,t.prototype.calculateEase=function(t){return this.easingObject.calculate(t)},t.prototype.getMatrix=function(){return(new o).identity()},t.prototype.getEasedMatrix=function(){return this.getMatrix()},t.prototype.serialize=function(){var t,e,n,i;e={type:this.constructor.name.toLowerCase(),easing:this.easing,duration:this.duration,delay:this.delay,from:this.from,to:this.to},i=this.easingObject.serialize();for(t in i)n=i[t],e[t]=n;return e},t}(),e.exports=n},{"../easing/bounce":6,"../easing/hardbounce":7,"../easing/hardsway":8,"../easing/sway":10,"../math/matrix4d":13}],2:[function(t,e){var n,i,o,r,s={}.hasOwnProperty,a=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};i=t("../math/matrix4d"),r=t("../math/vector2d"),n=t("./index"),o=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.diff=this.to-this.from}return a(e,t),e.prototype.from=0,e.prototype.to=90,e.prototype.getMatrix=function(t){var e,n,o;return n=t/180*Math.PI,e=Math.cos(n),o=Math.sin(n),new i([e,-o,0,0,o,e,0,0,0,0,1,0,0,0,0,1])},e.prototype.getEasedMatrix=function(t){var e,n;return n=this.calculateEase(t),e=this.from+this.diff*n,this.getMatrix(e)},e}(n),e.exports=o},{"../math/matrix4d":13,"../math/vector2d":14,"./index":1}],3:[function(t,e){var n,i,o,r,s={}.hasOwnProperty,a=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};i=t("../math/matrix4d"),r=t("../math/vector2d"),n=t("./index"),o=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.fromVector=new r(this.from.x,this.from.y),this.toVector=new r(this.to.x,this.to.y),this.diff=this.toVector.clone().subtract(this.fromVector)}return a(e,t),e.prototype.from={x:.5,y:.5},e.prototype.to={x:1,y:1},e.prototype.getMatrix=function(t,e){var n;return n=1,new i([t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1])},e.prototype.getEasedMatrix=function(t){var e,n;return e=this.calculateEase(t),n=this.fromVector.clone().add(this.diff.clone().multiply(e)),this.getMatrix(n.x,n.y)},e}(n),e.exports=o},{"../math/matrix4d":13,"../math/vector2d":14,"./index":1}],4:[function(t,e){var n,i,o,r,s={}.hasOwnProperty,a=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};i=t("../math/matrix4d"),r=t("../math/vector2d"),n=t("./index"),o=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.fromVector=new r(this.from.x,this.from.y),this.toVector=new r(this.to.x,this.to.y),this.diff=this.toVector.clone().subtract(this.fromVector)}return a(e,t),e.prototype.from={x:0,y:0},e.prototype.to={x:20,y:0},e.prototype.getMatrix=function(t,e){var n,o,r,s;return n=t/180*Math.PI,o=e/180*Math.PI,r=Math.tan(n),s=Math.tan(o),new i([1,r,0,0,s,1,0,0,0,0,1,0,0,0,0,1])},e.prototype.getEasedMatrix=function(t){var e,n;return e=this.calculateEase(t),n=this.fromVector.clone().add(this.diff.clone().multiply(e)),this.getMatrix(n.x,n.y)},e}(n),e.exports=o},{"../math/matrix4d":13,"../math/vector2d":14,"./index":1}],5:[function(t,e){var n,i,o,r,s={}.hasOwnProperty,a=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};i=t("../math/matrix4d"),r=t("../math/vector2d"),n=t("./index"),o=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.fromVector=new r(this.from.x,this.from.y),this.toVector=new r(this.to.x,this.to.y),this.diff=this.toVector.clone().subtract(this.fromVector)}return a(e,t),e.prototype.from={x:0,y:0},e.prototype.to={x:0,y:0},e.prototype.getMatrix=function(t,e){var n;return n=0,new i([1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1])},e.prototype.getEasedMatrix=function(t){var e,n;return e=this.calculateEase(t),n=this.fromVector.clone().add(this.diff.clone().multiply(e)),this.getMatrix(n.x,n.y)},e}(n),e.exports=o},{"../math/matrix4d":13,"../math/vector2d":14,"./index":1}],6:[function(t,e){var n,i,o={}.hasOwnProperty,r=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};i=t("./index"),n=function(t){function e(t){var n;null==t&&(t={}),e.__super__.constructor.apply(this,arguments),null!=t.stiffness&&(this.stiffness=t.stiffness),null!=t.bounces&&(this.bounces=t.bounces),this.alpha=this.stiffness/100,n=.005/Math.pow(10,this.stiffness),this.limit=Math.floor(Math.log(n)/-this.alpha),this.omega=this.calculateOmega(this.bounces,this.limit)}return r(e,t),e.prototype.bounces=4,e.prototype.stiffness=3,e.prototype.calculate=function(t){var e;return t>=1?1:(e=t*this.limit,1-this.exponent(e)*this.oscillation(e))},e.prototype.calculateOmega=function(){return(this.bounces+.5)*Math.PI/this.limit},e.prototype.exponent=function(t){return Math.pow(Math.E,-this.alpha*t)},e.prototype.oscillation=function(t){return Math.cos(this.omega*t)},e.prototype.serialize=function(){return{stiffness:this.stiffness,bounces:this.bounces}},e}(i),e.exports=n},{"./index":9}],7:[function(t,e){var n,i,o={}.hasOwnProperty,r=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};n=t("./bounce"),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.oscillation=function(t){return Math.abs(Math.cos(this.omega*t))},e}(n),e.exports=i},{"./bounce":6}],8:[function(t,e){var n,i,o={}.hasOwnProperty,r=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};i=t("./sway"),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.oscillation=function(t){return Math.abs(Math.sin(this.omega*t))},e}(i),e.exports=n},{"./sway":10}],9:[function(t,e){var n,i;i=t("../math/helpers"),n=function(){function t(){}return t.prototype.calculate=function(t){return t},t.prototype.serialize=function(){return{}},t.prototype.findOptimalKeyPoints=function(t,e){var n,o,r,s,a,u,h,p;for(null==t&&(t=1),null==e&&(e=1e3),a=[0],p=function(){var t,n;for(n=[],r=t=0;e>=0?e>t:t>e;r=e>=0?++t:--t)n.push(this.calculate(r/e));return n}.call(this),a=a.concat(i.findTurningPoints(p)),a.push(e-1),r=0,u=1e3;u--&&r!==a.length-1;)n=i.areaBetweenLineAndCurve(p,a[r],a[r+1]),t>=n?r++:(o=Math.round(a[r]+(a[r+1]-a[r])/2),a.splice(r+1,0,o));return 0===u?[]:h=function(){var t,n,i;for(i=[],t=0,n=a.length;n>t;t++)s=a[t],i.push(s/(e-1));return i}()},t}(),e.exports=n},{"../math/helpers":12
}],10:[function(t,e){var n,i,o={}.hasOwnProperty,r=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};n=t("./bounce"),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.calculate=function(t){var e;return t>=1?0:(e=t*this.limit,this.exponent(e)*this.oscillation(e))},e.prototype.calculateOmega=function(){return this.bounces*Math.PI/this.limit},e.prototype.oscillation=function(t){return Math.sin(this.omega*t)},e}(n),e.exports=i},{"./bounce":6}],11:[function(t,e){var n,i,o;o=t("./math/matrix4d"),i={scale:t("./components/scale"),rotate:t("./components/rotate"),translate:t("./components/translate"),skew:t("./components/skew")},n=function(){function t(){this.components=[]}return t.FPS=30,t.counter=1,t.prototype.components=null,t.prototype.duration=0,t.prototype.scale=function(t){return this.addComponent(new i.scale(t))},t.prototype.rotate=function(t){return this.addComponent(new i.rotate(t))},t.prototype.translate=function(t){return this.addComponent(new i.translate(t))},t.prototype.skew=function(t){return this.addComponent(new i.skew(t))},t.prototype.addComponent=function(t){return this.components.push(t),this.updateDuration(),this},t.prototype.serialize=function(){var t,e,n,i,o;for(e=[],o=this.components,n=0,i=o.length;i>n;n++)t=o[n],e.push(t.serialize());return e},t.prototype.deserialize=function(t){var e,n,o;for(n=0,o=t.length;o>n;n++)e=t[n],this.addComponent(new i[e.type](e));return this},t.prototype.updateDuration=function(){return this.duration=this.components.map(function(t){return t.duration+t.delay}).reduce(function(t,e){return Math.max(t,e)})},t.prototype.define=function(e){return this.name=e||t.generateName(),this.styleElement=document.createElement("style"),this.styleElement.innerHTML=this.getKeyframeCSS({name:this.name,prefix:!0}),document.body.appendChild(this.styleElement),this},t.prototype.applyTo=function(t,e){var n,i,o,r,s,a,u,h,p,l;for(null==e&&(e={}),this.define(),t.length||(t=[t]),s=this.getPrefixes(),i=null,window.jQuery&&window.jQuery.Deferred&&(i=new window.jQuery.Deferred),a=0,h=t.length;h>a;a++)for(o=t[a],l=s.animation,u=0,p=l.length;p>u;u++)r=l[u],n=[this.name,""+this.duration+"ms","linear","both"],e.loop&&n.push("infinite"),o.style[""+r+"animation"]=n.join(" ");return e.loop||setTimeout(function(t){return function(){return e.remove&&t.remove(),"function"==typeof e.onComplete&&e.onComplete(),i?i.resolve():void 0}}(this),this.duration),i},t.prototype.remove=function(){var t;if(this.styleElement)return this.styleElement.remove?this.styleElement.remove():null!=(t=this.styleElement.parentNode)?t.removeChild(this.styleElement):void 0},t.prototype.getPrefixes=function(t){var e,n;return e={transform:[""],animation:[""]},n=document.createElement("dummy").style,(t||!("transform"in n)&&"webkitTransform"in n)&&(e.transform=["-webkit-",""]),(t||!("animation"in n)&&"webkitAnimation"in n)&&(e.animation=["-webkit-",""]),e},t.prototype.getKeyframeCSS=function(e){var n,i,o,r,s,a,u,h,p,l,c,f,d,_,m,g,v,y;for(null==e&&(e={}),this.name=e.name||t.generateName(),u={transform:[""],animation:[""]},(e.prefix||e.forcePrefix)&&(u=this.getPrefixes(e.forcePrefix)),o=[],r=this.getKeyframes(e),g=this.keys,l=0,d=g.length;d>l;l++){for(i=g[l],s=r[i],h="matrix3d"+s,p=[],v=u.transform,c=0,_=v.length;_>c;c++)a=v[c],p.push(""+a+"transform: "+h+";");o.push(""+Math.round(100*i*100)/100+"% { "+p.join(" ")+" }")}for(n=[],y=u.animation,f=0,m=y.length;m>f;f++)a=y[f],n.push("@"+a+"keyframes "+this.name+" { \n  "+o.join("\n  ")+" \n}");return n.join("\n\n")},t.prototype.getKeyframes=function(e){var n,i,r,s,a,u,h,p,l,c,f,d,_,m,g,v,y,w,b;if(null==e&&(e={}),p=[0,1],e.optimized)for(w=this.components,f=0,g=w.length;g>f;f++)n=w[f],i=n.easingObject.findOptimalKeyPoints().map(function(t){return function(e){return e*n.duration/t.duration+n.delay/t.duration}}(this)),n.delay&&i.push(n.delay/this.duration-.001),p=p.concat(i);else for(s=Math.round(this.duration/1e3*t.FPS),a=d=0;s>=0?s>=d:d>=s;a=s>=0?++d:--d)p.push(a/s);for(p=p.sort(function(t,e){return t-e}),this.keys=[],h={},_=0,v=p.length;v>_;_++)if(u=p[_],!h[u]){for(l=(new o).identity(),b=this.components,m=0,y=b.length;y>m;m++)n=b[m],r=u*this.duration,n.delay-r>1e-8||(c=(u-n.delay/this.duration)/(n.duration/this.duration),l.multiply(n.getEasedMatrix(c)));this.keys.push(u),h[u]=l.transpose().toFixed(3)}return h},t.generateName=function(){return"animation-"+t.counter++},t.isSupported=function(){var t,e,n,i,o,r,s,a,u;for(o=document.createElement("dummy").style,i=[["transform","webkitTransform"],["animation","webkitAnimation"]],r=0,a=i.length;a>r;r++){for(n=i[r],e=!1,s=0,u=n.length;u>s;s++)t=n[s],e||(e=t in o);if(!e)return!1}return!0},t}(),e.exports=n},{"./components/rotate":2,"./components/scale":3,"./components/skew":4,"./components/translate":5,"./math/matrix4d":13}],12:[function(t,e){var n;n=function(){function t(){}return t.prototype.sign=function(t){return 0>t?-1:1},t.prototype.findTurningPoints=function(t){var e,n,i,o,r,s;for(o=[],e=r=1,s=t.length-1;s>=1?s>r:r>s;e=s>=1?++r:--r)n=this.sign(t[e]-t[e-1]),i=this.sign(t[e+1]-t[e]),n!==i&&o.push(e);return o},t.prototype.areaBetweenLineAndCurve=function(t,e,n){var i,o,r,s,a,u,h,p;for(s=n-e,h=t[e],u=t[n],i=0,r=p=0;s>=0?s>=p:p>=s;r=s>=0?++p:--p)o=t[e+r],a=h+r/s*(u-h),i+=Math.abs(a-o);return i},t}(),e.exports=new n},{}],13:[function(t,e){var n;n=function(){function t(t){this._array=(null!=t?t.slice(0):void 0)||[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}return t.prototype._array=null,t.prototype.equals=function(t){return this.toString()===t.toString()},t.prototype.identity=function(){return this.setArray([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this},t.prototype.multiply=function(e){var n,i,o,r,s,a,u,h;for(r=new t,n=a=0;4>a;n=++a)for(i=u=0;4>u;i=++u)for(o=h=0;4>h;o=++h)s=r.get(n,i)+this.get(n,o)*e.get(o,i),r.set(n,i,s);return this.copy(r)},t.prototype.transpose=function(){var t;return t=this.getArray(),this.setArray([t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15]]),this},t.prototype.get=function(t,e){return this.getArray()[4*t+e]},t.prototype.set=function(t,e,n){return this._array[4*t+e]=n},t.prototype.copy=function(t){return this._array=t.getArray(),this},t.prototype.clone=function(){return new t(this.getArray())},t.prototype.getArray=function(){return this._array.slice(0)},t.prototype.setArray=function(t){return this._array=t,this},t.prototype.toString=function(){return"("+this.getArray().join(", ")+")"},t.prototype.toFixed=function(t){var e;return this._array=function(){var n,i,o,r;for(o=this._array,r=[],n=0,i=o.length;i>n;n++)e=o[n],r.push(parseFloat(e.toFixed(t)));return r}.call(this),this},t}(),e.exports=n},{}],14:[function(t,e){var n;n=function(){function t(t,e){this.x=null!=t?t:0,this.y=null!=e?e:0}return t.prototype.x=0,t.prototype.y=0,t.prototype.add=function(e){return t.isVector2D(e)?(this.x+=e.x,this.y+=e.y,this):this._addScalar(e)},t.prototype._addScalar=function(t){return this.x+=t,this.y+=t,this},t.prototype.subtract=function(e){return t.isVector2D(e)?(this.x-=e.x,this.y-=e.y,this):this._subtractScalar(e)},t.prototype._subtractScalar=function(t){return this._addScalar(-t)},t.prototype.multiply=function(e){return t.isVector2D(e)?(this.x*=e.x,this.y*=e.y,this):this._multiplyScalar(e)},t.prototype._multiplyScalar=function(t){return this.x*=t,this.y*=t,this},t.prototype.divide=function(e){return t.isVector2D(e)?(this.x/=e.x,this.y/=e.y,this):this._divideScalar(e)},t.prototype._divideScalar=function(t){return this._multiplyScalar(1/t)},t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.toString=function(){return"("+this.x+", "+this.y+")"},t.prototype.toFixed=function(t){return this.x=parseFloat(this.x.toFixed(t)),this.y=parseFloat(this.y.toFixed(t)),this},t.prototype.toArray=function(){return[this.x,this.y]},t.isVector2D=function(e){return e instanceof t},t}(),e.exports=n},{}]},{},[11])(11)});var has=Object.prototype.hasOwnProperty,prefix="function"!=typeof Object.create&&"~";EE3.prototype._events=void 0,EE3.prototype.eventNames=function(){var t,e=this._events,n=[];if(!e)return n;for(t in e)has.call(e,t)&&n.push(prefix?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},EE3.prototype.listeners=function(t,e){var n=prefix?prefix+t:t,i=this._events&&this._events[n];if(e)return!!i;if(!i)return[];if(i.fn)return[i.fn];for(var o=0,r=i.length,s=new Array(r);o<r;o++)s[o]=i[o].fn;return s},EE3.prototype.emit=function(t,e,n,i,o,r){var s=prefix?prefix+t:t;if(!this._events||!this._events[s])return!1;var a,u,h=this._events[s],p=arguments.length;if("function"==typeof h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),p){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,n),!0;case 4:return h.fn.call(h.context,e,n,i),!0;case 5:return h.fn.call(h.context,e,n,i,o),!0;case 6:return h.fn.call(h.context,e,n,i,o,r),!0}for(u=1,a=new Array(p-1);u<p;u++)a[u-1]=arguments[u];h.fn.apply(h.context,a)}else{var l,c=h.length;for(u=0;u<c;u++)switch(h[u].once&&this.removeListener(t,h[u].fn,void 0,!0),p){case 1:h[u].fn.call(h[u].context);break;case 2:h[u].fn.call(h[u].context,e);break;case 3:h[u].fn.call(h[u].context,e,n);break;default:if(!a)for(l=1,a=new Array(p-1);l<p;l++)a[l-1]=arguments[l];h[u].fn.apply(h[u].context,a)}}return!0},EE3.prototype.on=function(t,e,n){var i=new EE(e,n||this),o=prefix?prefix+t:t;return this._events||(this._events=prefix?{}:Object.create(null)),this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],i]:this._events[o].push(i):this._events[o]=i,this},EE3.prototype.once=function(t,e,n){var i=new EE(e,n||this,!0),o=prefix?prefix+t:t;return this._events||(this._events=prefix?{}:Object.create(null)),this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],i]:this._events[o].push(i):this._events[o]=i,this},EE3.prototype.removeListener=function(t,e,n,i){var o=prefix?prefix+t:t;if(!this._events||!this._events[o])return this;var r=this._events[o],s=[];if(e)if(r.fn)(r.fn!==e||i&&!r.once||n&&r.context!==n)&&s.push(r);else for(var a=0,u=r.length;a<u;a++)(r[a].fn!==e||i&&!r[a].once||n&&r[a].context!==n)&&s.push(r[a]);return s.length?this._events[o]=1===s.length?s[0]:s:delete this._events[o],this},EE3.prototype.removeAllListeners=function(t){return this._events?(t?delete this._events[prefix?prefix+t:t]:this._events=prefix?{}:Object.create(null),this):this},EE3.prototype.off=EE3.prototype.removeListener,EE3.prototype.addListener=EE3.prototype.on,EE3.prototype.setMaxListeners=function(){return this},EE3.prefixed=prefix,"undefined"!=typeof module&&(module.exports=EE3);var Change,Gesture,__indexOf=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};Event.WillAppear="willappear",Event.Appear="didappear",Event.DidAppear="didappear",Event.WillDisappear="willdisappear",Event.Disappear="diddisappear",Event.DidDisappear="diddisappear",Event.Click="click",Event.DoubleClick="dblclick",Event.Hover=["mouseenter","mouseleave"],Event.In="mouseenter",Event.Out="mouseleave",Event.Down="mousedown",Event.Up="mouseup",Event.Over="mouseover",Event.Move="mousemove",Event.RightClick="contextmenu",Event.MouseWheel="wheel",Event.MouseIn=Event.In,Event.MouseUp=Event.Up,Event.MouseDown=Event.Down,Event.MouseOver=Event.Over,Event.MouseOut=Event.Out,Event.MouseMove=Event.Move,Event.Abort="abort",Event.Quit="beforeunload",Event.Error="error",Event.HashChange="hashchange",Event.Load="load",Event.Loaded="load",Event.Resize="resize",Event.Scroll="scroll",Event.Show="show",Event.Close="close",Event.PressingKey="keydown",Event.PressKey="keypress",Event.ReleaseKey="keyup",Event.KeyDown="keydown",Event.KeyPress="keypress",Event.KeyUp="keyup",Event.Focus="focus",Event.ResignFocus="blur",Event.Blur="blur",Event.Change="change",Event.WillFocus="focusin",Event.WillResignFocus="focusout",Event.Input="input",Event.Invalid="invalid",Event.Reset="reset",Event.Search="search",Event.Select="select",Event.Submit="submit",Event.DragStart="dragstart",Event.DragWillMove="dragwillmove",Event.DragMove="dragmove",Event.DragDidMove="dragmove",Event.Drag="dragmove",Event.DragEnd="dragend",Event.DragAnimationDidStart="draganimationdidstart",Event.DragAnimationDidEnd="draganimationdidend",Event.DirectionLockDidStart="directionlockdidstart",Event.DragEnter="dragenter",Event.DragOver="dragover",Event.DragLeave="dragleave",Event.Drop="drop",Event.Copy="copy",Event.Cut="cut",Event.Paste="paste",Event.LoadEnd="loadend",Event.Unsupported="unsupported",Event.Success="success",Event.Clear="clear",Event.Response="response",Event.Receive="receive",Event.Send="send",Event.End="end",Event.Granted="granted",Event.Boundary="boundary",Event.Mark="mark",Event.Resume="resume",Event.Start="start",Event.AudioStart="audiostart",Event.AudioEnd="audioend",Event.NoMatch="nomatch",Event.Result="result",Event.SoundStart="soundstart",Event.SoundEnd="soundend",Event.SpeechStart="speechstart",Event.SpeechEnd="speechend",Event.Run="run",Event.Online="online",Event.Offline="offline",Event.HistoryChanged="popstate",Event.Wheel="wheel",Event.CanPlay="canplay",Event.CanPlayThrough="canplaythrough",Event.DurationChange="durationchange",Event.Emptied="emptied",Event.ReachEnd="ended",Event.LoadedData="loadeddata",Event.LoadedMetaData="loadedmetadata",Event.LoadStart="loadstart",Event.Pause="pause",Event.Play="play",Event.Playing="playing",Event.Progress="progress",Event.SpeedChange="ratechange",Event.Seeked="seeked",Event.Seeking="seeking",Event.Stalled="stalled",Event.Suspend="suspend",Event.TimeUpdate="timeupdate",Event.VolumeChange="volumechange",Event.Waiting="waiting",Event.AnimationStart="start",Event.AnimationStop="stop",Event.AnimationEnd="end",Event.AnimationDidStart="start",Event.AnimationDidStop="stop",Event.AnimationDidEnd="end",Event.PreloadDone="preloadEnd",Event.PreloadEnd="preloadEnd",Event.PreloadProgress="preloadProgress",Event.ImportDone="importEnd",Event.ImportEnd="importEnd",Event.ImportProgress="importProgress",Event.TouchStart="touchstart",Event.TouchEnd="touchend",Event.TouchMove="touchmove",Event.TouchStart="mousedown",Event.TouchEnd="mouseup",Event.TouchMove="mousemove",Event.StateWillSwitch="willSwitch",Event.StateDidSwitch="didSwitch",Event.DisplayConnected="displayconnected",Event.DisplayDisconnected="displaydisconnected",Change={x:"change:x",y:"change:y",point:"change:point",width:"change:width",height:"change:height",size:"change:size",frame:"change:frame",rotation:"change:rotation",borderRadius:"change:borderRadius",currentPage:"change:currentPage",style:"change:style",html:"change:html",children:"change:children",parent:"change:parent",page:"change:page",value:"change:value",BatteryCharging:"change:batteryCharging",BatteryLevel:"change:batteryLevel",ChargingTime:"change:chargingTime",DischargingTime:"change:dischargingTime",DeviceMotion:"devicemotion",DeviceOrientation:"deviceorientation"},Gesture={Tap:"tap",TapStart:"tapstart",TapEnd:"tapend",DoubleTap:"doubletap",ForceTap:"forcetap",ForceTapChange:"forcetapchange",ForceTapStart:"forcetapstart",ForceTapEnd:"forcetapend",LongPress:"longpress",LongPressStart:"longpressstart",LongPressEnd:"longpressend",Swipe:"swipe",SwipeStart:"swipestart",SwipeEnd:"swipeend",SwipeUp:"swipeup",SwipeUpStart:"swipeupstart",SwipeUpEnd:"swipeupend",SwipeDown:"swipedown",SwipeDownStart:"swipedownstart",SwipeDownEnd:"swipedownend",SwipeLeft:"swipeleft",SwipeLeftStart:"swipeleftstart",SwipeLeftEnd:"swipeleftend",SwipeRight:"swiperight",SwipeRightStart:"swiperightstart",SwipeRightEnd:"swiperightend",EdgeSwipe:"edgeswipe",EdgeSwipeStart:"edgeswipestart",EdgeSwipeEnd:"edgeswipeend",EdgeSwipeTop:"edgeswipetop",EdgeSwipeTopStart:"edgeswipetopstart",EdgeSwipeTopEnd:"edgeswipetopend",EdgeSwipeRight:"edgeswiperight",EdgeSwipeRightStart:"edgeswiperightstart",EdgeSwipeRightEnd:"edgeswiperightend",EdgeSwipeBottom:"edgeswipebottom",EdgeSwipeBottomStart:"edgeswipebottomstart",EdgeSwipeBottomEnd:"edgeswipebottomend",EdgeSwipeLeft:"edgeswipeleft",EdgeSwipeLeftStart:"edgeswipeleftstart",EdgeSwipeLeftEnd:"edgeswipeleftend",Pan:"pan",PanStart:"panstart",PanEnd:"panend",PanLeft:"panleft",PanRight:"panright",PanUp:"panup",PanDown:"pandown",Pinch:"pinch",PinchStart:"pinchstart",PinchEnd:"pinchend",Scale:"scale",ScaleStart:"scalestart",ScaleEnd:"scaleend",Rotate:"rotate",RotateStart:"rotatestart",RotateEnd:"rotateend"},Event.ScrollStart="scrollstart",Event.Scroll="scroll",Event.ScrollMove=Event.Scroll,Event.ScrollEnd="scrollend",Event.ScrollAnimationDidStart="scrollanimationdidstart",Event.ScrollAnimationDidEnd="scrollanimationdidend",Utils.extend(Event,Gesture),Event.touchEvent=function(t){var e,n,i;return e=null!=(n=t.touches)?n[0]:void 0,null==e&&(e=null!=(i=t.changedTouches)?i[0]:void 0),null==e&&(e=t),e},Event.wrap=function(t){return App.CurrentContext.domEventManager.wrap(t)},Event.isGesture=function(t){return __indexOf.call(Gesture,t)>=0};var EventEmitter,EventKey,__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};EventKey="_events",EventEmitter=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.listenerEvents=function(){return void 0===this[EventKey]?[]:Utils.keys(this[EventKey])},e.prototype.removeAllListeners=function(t){var e,n,i,o,r;for(e=t?[t]:this.listenerEvents(),r=[],i=0,o=e.length;i<o;i++)t=e[i],r.push(function(){var e,i,o,r;for(o=this.listeners(t),r=[],e=0,i=o.length;e<i;e++)n=o[e],r.push(this.removeListener(t,n));return r}.call(this));return r},e}(EE3);var Element,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Element=function(t){function e(t){null==t&&(t={}),this._getPropertyValue=__bind(this._getPropertyValue,this),this._setPropertyValue=__bind(this._setPropertyValue,this),this.toInspect=__bind(this.toInspect,this),this._id=Utils.randomID(),this.__options=t,this._context=App.CurrentContext,this._DefinedPropertiesValuesKey={}}return __extends(e,t),e.prototype._kind="Element",e.prototype.toInspect=function(){return"<"+this._kind+" id:"+(this.id||null)+">"},e.define=function(t,n){var i,o,r,s,a,u;for(u=["enumerable","exportable","importable"],s=0,a=u.length;s<a;s++)if(o=u[s],n.hasOwnProperty(o)&&!Utils.isBoolean(n[o]))throw Error("woops "+t+" "+n[o]);return this!==e&&(n.propertyName=t,null==n.enumerable&&(n.enumerable=!0),null==n.exportable&&(n.exportable=!0),null==n.importable&&(n.importable=!0),n.importable=n.importable&&n.set,(n.exportable||n.importable)&&(null==this._DefinedPropertiesKey&&(this._DefinedPropertiesKey={}),this._DefinedPropertiesKey[t]=n)),i="get"+Utils.capitalizeFirstLetter(t),this.prototype[i]=n.get,n.get=this.prototype[i],n.set&&(r="set"+Utils.capitalizeFirstLetter(t),this.prototype[r]=n.set,n.set=this.prototype[r]),Object.defineProperty(this.prototype,t,n)},e.simpleProperty=function(t,e,n){return null==n&&(n={}),Utils.extend(n,{default:e,get:function(){return this._getPropertyValue(t)},set:function(e){return this._setPropertyValue(t,e)}})},e.proxyProperty=function(t,e){var n;return null==e&&(e={}),n=t.split(".")[0],Utils.extend(e,{get:function(){if(Utils.isObject(this[n]))return Utils.getValueForKeyPath(this,t)},set:function(e){if(Utils.isObject(this[n]))return Utils.setValueForKeyPath(this,t,e)}})},e.prototype._setPropertyValue=function(t,e){return this._DefinedPropertiesValuesKey[t]=e},e.prototype._getPropertyValue=function(t){return Utils.valueOrDefault(this._DefinedPropertiesValuesKey[t],this._getPropertyDefaultValue(t))},e.prototype._getPropertyDefaultValue=function(t){return this._propertyList()[t].default},e.prototype._propertyList=function(){return this.constructor._DefinedPropertiesKey},e.prototype.keys=function(){return Utils.keys(this.props)},e.prototype.onChange=function(t,e){return this.on("change:"+t,e)},e.define("id",{get:function(){return this._id}}),e.define("props",{importable:!1,exportable:!1,get:function(){var t,e,n,i;n=[],i=this._propertyList();for(e in i)t=i[e],t.exportable&&n.push(e);return Utils.pick(this,n)},set:function(t){var e,n,i,o,r;if(Utils.isArray(t))return t[0]&&(this.props=t[0]),void(t[1]&&(this.props=t[1]));e=null,i=this._propertyList();for(n in t)o=t[n],"do"===n?e=o:(null!=(r=i[n])?r.importable:void 0)&&(this[n]=o);return e?this.do=e:void 0}}),e}(EventEmitter);var EventBuffer,__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Event.EventBufferReset="eventbufferreset",Event.EventBufferUpdated="eventbufferupdated",EventBuffer=function(t){function e(t){null==t&&(t={}),this.options=Utils.defaults(t,{velocityTimeout:100}),this._events=[]}return __extends(e,t),e.prototype.push=function(t){return this._events.push(t),this.emit(Event.EventBufferUpdated,t)},e.prototype.reset=function(){return this._events.length=0,this.emit(Event.EventBufferReset)},e.define("length",{get:function(){return this._events.length}}),e.define("first",{get:function(){return this._events[0]}}),e.define("offset",{get:function(){var t,e,n;return events.length<2?{x:0,y:0}:(t=events[events.length-1],e=events[0],n={x:t.x-e.x,y:t.y-e.y})}}),e.define("events",{get:function(){var t;return t=Date.now()-this.options.velocityTimeout,this._events.filter(function(e){return function(e){return e.t>t}}(this))}}),e.define("angle",{get:function(){var t,e,n;return t=this.events,t.length<2?0:(e=t[0],n=t[1],180*Math.atan2(n.y-e.y,n.x-e.x)/Math.PI)}}),e.define("velocity",{get:function(){var t,e,n,i,o;return e=this.events,e.length<2?{x:0,y:0}:(t=e[e.length-1],n=e[0],i=t.t-n.t,o={x:(t.x-n.x)/i,y:(t.y-n.y)/i},o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o)}}),e}(Element);var DOMEventManager,DOMEventManagerElement,EventManagerIdCounter,__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},__bind=function(t,e){return function(){return t.apply(e,arguments)}};DOMEventManagerElement=function(t){function e(t){this.element=t}return __extends(e,t),e.prototype.addListener=function(t,n,i){return null==i&&(i=!1),e.__super__.addListener.call(this,t,n),this.element.addEventListener(t,n,!1)},e.prototype.removeListener=function(t,n){return e.__super__.removeListener.call(this,t,n),this.element.removeEventListener(t,n,!1)},e.prototype.addEventListener=e.prototype.addListener,e.prototype.removeEventListener=e.prototype.removeListener,e}(EventEmitter),EventManagerIdCounter=0,DOMEventManager=function(){function t(t){this.wrap=__bind(this.wrap,this),this._elements={}}return t.prototype.wrap=function(t){return t._eventManagerId||(t._eventManagerId=EventManagerIdCounter++),this._elements[t._eventManagerId]||(this._elements[t._eventManagerId]=new DOMEventManagerElement(t)),this._elements[t._eventManagerId]},t.prototype.reset=function(){var t,e,n,i;n=this._elements,i=[];for(t in n)e=n[t],i.push(e.removeAllListeners());return i},t}();var Context,__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},__indexOf=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};Context=function(t){function e(t){if(e.__super__.constructor.apply(this,arguments),t||(t={}),!t.name)throw Error("Context: name required.");this._parent=t.parent,this._name=t.name,this.perspective=t.perspective,this.perspectiveOriginX=t.perspectiveOriginX,this.perspectiveOriginY=t.perspectiveOriginY,this.reset()}return __extends(e,t),e.prototype.reset=function(){return this._createDOMEventManager(),this._createRootElement(),this.resetViews(),this.resetAnimations(),this.resetTimers(),this.resetIntervals(),this.emit("reset",this)},e.define("parent",{get:function(){return this._parent}}),e.define("element",{get:function(){return this._element}}),e.define("views",{get:function(){return Utils.clone(this._views)}}),e.define("viewCounter",{get:function(){return this._viewCounter}}),e.prototype.addView=function(t){if(!(__indexOf.call(this._views,t)>=0))return this._viewCounter++,this._views.push(t)},e.prototype.removeView=function(t){return this._views=Utils.without(this._views,t)},e.prototype.resetViews=function(){return this.resetGesture(),this._views=[],this._viewCounter=0},e.define("animations",{get:function(){return Utils.clone(this._animations)}}),e.prototype.addAnimation=function(t){if(!(__indexOf.call(this._animations,t)>=0))return this._animations.push(t)},e.prototype.removeAnimation=function(t){return this._animations=Utils.without(this._animations,t)},e.prototype.resetAnimations=function(){return this.stopAnimations(),this._animations=[]},e.prototype.stopAnimations=function(){if(this._animations)return this._animations.map(function(t){return t.stop(!0)})},e.define("timers",{get:function(){return Utils.clone(this._timers)}}),e.prototype.addTimer=function(t){if(!(__indexOf.call(this._timers,t)>=0))return this._timers.push(t)},e.prototype.removeTimer=function(t){return this._timers=Utils.without(this._timers,t)},e.prototype.resetTimers=function(){return this._timers&&this._timers.map(window.clearTimeout),this._timers=[]},e.define("intervals",{get:function(){return Utils.clone(this._intervals)}}),e.prototype.addInterval=function(t){if(!(__indexOf.call(this._intervals,t)>=0))return this._intervals.push(t)},e.prototype.removeInterval=function(t){return this._intervals=Utils.without(this._intervals,t)},e.prototype.resetIntervals=function(){return this._intervals&&this._intervals.map(window.clearInterval),this._intervals=[]},e.prototype.resetGesture=function(){var t,e,n,i;if(this._views)for(i=this._views,e=0,n=i.length;e<n;e++)t=i[e],t._gestures&&t._gestures.destroy()},e.prototype.freeze=function(){var t,e,n,i,o,r,s,a,u,h;if(null!=this._frozenEvents)throw new Error("Context is already frozen");for(this._frozenEvents={},u=this._views,o=0,s=u.length;o<s;o++){for(e=u[o],i={},h=e.listenerEvents(),r=0,a=h.length;r<a;r++)t=h[r],i[t]=e.listeners(t);e.removeAllListeners(),n=this._views.indexOf(e),this._frozenEvents[n]=i}return this.stopAnimations(),this.resetTimers(),this.resetIntervals()},e.prototype.resume=function(){var t,e,n,i,o,r,s,a,u;if(null==this._frozenEvents)throw new Error("Context is not frozen, cannot resume");u=this._frozenEvents;for(r in u){e=u[r],o=this._views[r];for(t in e)for(i=e[t],s=0,a=i.length;s<a;s++)n=i[s],o.on(t,n)}return delete this._frozenEvents},e.prototype._createDOMEventManager=function(){return this.domEventManager&&this.domEventManager.reset(),this.domEventManager=new DOMEventManager},e.prototype._createRootElement=function(){return this._destroyRootElement(),this._element=document.createElement("div"),this._element.id="MagiXRoot",this._element.setAttribute("name",this._name),this._element.style.perspective=this.perspective,this._element.style.backgroundColor=this.backgroundColor,this.__pendingElementMagiXnd=function(t){return function(){var e,n;return e=null!=(n=t._parent)?n._element:void 0,null==e&&(e=document.body),e.appendChild(t._element)}}(this),Utils.domComplete(this.__pendingElementMagiXnd)},e.prototype._destroyRootElement=function(){return this._element&&this._element.parentNode&&this._element.parentNode.removeChild(this._element),this.__pendingElementMagiXnd&&(Utils.domCompleteCancel(this.__pendingElementMagiXnd),this.__pendingElementMagiXnd=void 0),this._element=void 0},e.define("width",{get:function(){return null!=this.parent?this.parent.width:window.innerWidth}}),e.define("height",{get:function(){return null!=this.parent?this.parent.height:window.innerHeight}}),e.define("frame",{get:function(){return{x:0,y:0,width:this.width,height:this.height}}}),e.define("size",{get:function(){return Utils.pick(this.frame,["width","height"])}}),e.define("point",{get:function(){return Utils.pick(this.frame,["x","y"])}}),e.define("canvasFrame",{get:function(){return null==this.parent?this.frame:this.parent.canvasFrame}}),e.define("backgroundColor",{get:function(){return Color.isColor(this._backgroundColor)?this._backgroundColor:"transparent"},set:function(t){var e;if(Color.isColor(t))return this._backgroundColor=t,null!=(e=this._element)?e.style.backgroundColor=new Color(t.toString()):void 0}}),e.define("perspective",{get:function(){return this._perspective},set:function(t){var e;if(Utils.isNumber(t))return this._perspective=t,null!=(e=this._element)?e.style.perspective=this._perspective:void 0}}),e.prototype._updatePerspective=function(){var t;return null!=(t=this._element)?t.style.perspectiveOrigin=""+100*this.perspectiveOriginX+"% "+100*this.perspectiveOriginY+"%":void 0},e.define("perspectiveOriginX",{get:function(){return Utils.isNumber(this._perspectiveOriginX)?this._perspectiveOriginX:.5},set:function(t){if(Utils.isNumber(t))return this._perspectiveOriginX=t,this._updatePerspective()}}),e.define("perspectiveOriginY",{get:function(){return Utils.isNumber(this._perspectiveOriginY)?this._perspectiveOriginY:.5},set:function(t){if(Utils.isNumber(t))return this._perspectiveOriginY=t,this._updatePerspective()}}),e.prototype.toInspect=function(){var t;return t=function(t){return parseInt(t)===t?parseInt(t):Utils.round(t,1)},"<Context id:"+this.id+" name:"+this._name+" "+t(this.width)+"x"+t(this.height)+">"},e}(Element);var libhusl;(function(){var t,e,n,i,o,r,s,a,u,h,p,l,c,f,d,_,m,g,v;l={R:[3.2409699419045213,-1.5373831775700935,-.4986107602930033],G:[-.9692436362808798,1.8759675015077206,.04155505740717561],B:[.05563007969699361,-.20397695888897657,1.0569715142428786]},c={X:[.4123907992659595,.35758433938387796,.1804807884018343],Y:[.21263900587151036,.7151686787677559,.07219231536073371],Z:[.01933081871559185,.11919477979462599,.9505321522496606]},_=.19783000664283681,m=.468319994938791,h=903.2962962962963,r=.008856451679035631,a=function(t){var e,n,i,o,s,a,u,p,c,f,d,_,m,g,v,y,w,b;for(g=Math.pow(t+16,3)/1560896,v=g>r?g:t/h,m=[],f=["R","G","B"],i=0,s=f.length;i<s;i++)for(n=f[i],d=l[n],u=d[0],p=d[1],c=d[2],_=[0,1],o=0,a=_.length;o<a;o++)y=_[o],w=(284517*u-94839*c)*v,b=(838422*c+769860*p+731718*u)*t*v-769860*y*t,e=(632260*c-126452*p)*v+126452*y,m.push([w/e,b/e]);return m},u=function(t,e){return(t[1]-e[1])/(e[0]-t[0])},i=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))},p=function(t,e){var n,i,o;return o=e[0],n=e[1],i=n/(Math.sin(t)-o*Math.cos(t)),i<0?null:i},d=function(t){var e,n,o,r,s,h,p,l;for(r=[],h=a(t),n=0,o=h.length;n<o;n++)p=h[n],s=p[0],e=p[1],l=u([s,e],[-1/s,0]),r.push(i([l,e+l*s]));return Math.min.apply(Math,r)},f=function(t,e){var n,i,o,r,s,u,h;for(n=e/360*Math.PI*2,s=[],h=a(t),i=0,r=h.length;i<r;i++)u=h[i],o=p(n,u),null!==o&&s.push(o);return Math.min.apply(Math,s)},o=function(t,e){var n,i,o,r;for(r=0,n=i=0,o=t.length-1;0<=o?i<=o:i>=o;n=0<=o?++i:--i)r+=t[n]*e[n];return r},s=function(t){return t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055},v=function(t){var e;return e=.055,t>.04045?Math.pow((t+e)/(1+e),2.4):t/12.92},n={xyz:{},luv:{},lch:{},husl:{},huslp:{},rgb:{},hex:{}},n.xyz.rgb=function(t){var e,n,i;return i=s(o(l.R,t)),n=s(o(l.G,t)),e=s(o(l.B,t)),[i,n,e]},n.rgb.xyz=function(t){var e,n,i,r,s,a,u;return i=t[0],n=t[1],e=t[2],u=[v(i),v(n),v(e)],r=o(c.X,u),s=o(c.Y,u),a=o(c.Z,u),[r,s,a]},e=function(t){return t<=r?t*h:116*Math.pow(t,1/3)-16},t=function(t){
return t<=8?t/h:Math.pow((t+16)/116,3)},n.xyz.luv=function(t){var n,i,o,r,s,a,u,h;return r=t[0],s=t[1],a=t[2],0===s?[0,0,0]:(n=e(s),u=4*r/(r+15*s+3*a),h=9*s/(r+15*s+3*a),i=13*n*(u-_),o=13*n*(h-m),[n,i,o])},n.luv.xyz=function(e){var n,i,o,r,s,a,u,h;return n=e[0],i=e[1],o=e[2],0===n?[0,0,0]:(u=i/(13*n)+_,h=o/(13*n)+m,s=t(n),r=0-9*s*u/((u-4)*h-u*h),a=(9*s-15*h*s-h*r)/(3*h),[r,s,a])},n.luv.lch=function(t){var e,n,i,o,r,s;return o=t[0],r=t[1],s=t[2],e=Math.sqrt(Math.pow(r,2)+Math.pow(s,2)),e<1e-8?n=0:(i=Math.atan2(s,r),n=360*i/2/Math.PI,n<0&&(n=360+n)),[o,e,n]},n.lch.luv=function(t){var e,n,i,o,r,s;return o=t[0],e=t[1],n=t[2],i=n/360*2*Math.PI,r=Math.cos(i)*e,s=Math.sin(i)*e,[o,r,s]},n.husl.lch=function(t){var e,n,i,o,r;return n=t[0],o=t[1],i=t[2],i>99.9999999||i<1e-8?e=0:(r=f(i,n),e=r/100*o),[i,e,n]},n.lch.husl=function(t){var e,n,i,o,r;return i=t[0],e=t[1],n=t[2],i>99.9999999||i<1e-8?o=0:(r=f(i,n),o=e/r*100),[n,o,i]},n.huslp.lch=function(t){var e,n,i,o,r;return n=t[0],o=t[1],i=t[2],i>99.9999999||i<1e-8?e=0:(r=d(i),e=r/100*o),[i,e,n]},n.lch.huslp=function(t){var e,n,i,o,r;return i=t[0],e=t[1],n=t[2],i>99.9999999||i<1e-8?o=0:(r=d(i),o=e/r*100),[n,o,i]},n.rgb.hex=function(t){var e,n,i,o;for(n="#",i=0,o=t.length;i<o;i++){if(e=t[i],e=Math.round(1e6*e)/1e6,e<0||e>1)throw new Error("Illegal rgb value: "+e);e=Math.round(255*e).toString(16),1===e.length&&(e="0"+e),n+=e}return n},n.hex.rgb=function(t){var e,n,i,o,r,s,a,u;for("#"===t.charAt(0)&&(t=t.substring(1,7)),s=t.substring(0,2),n=t.substring(2,4),e=t.substring(4,6),a=[s,n,e],u=[],i=0,o=a.length;i<o;i++)r=a[i],u.push(parseInt(r,16)/255);return u},n.lch.rgb=function(t){return n.xyz.rgb(n.luv.xyz(n.lch.luv(t)))},n.rgb.lch=function(t){return n.luv.lch(n.xyz.luv(n.rgb.xyz(t)))},n.husl.rgb=function(t){return n.lch.rgb(n.husl.lch(t))},n.rgb.husl=function(t){return n.lch.husl(n.rgb.lch(t))},n.huslp.rgb=function(t){return n.lch.rgb(n.huslp.lch(t))},n.rgb.huslp=function(t){return n.lch.huslp(n.rgb.lch(t))},g={},g.fromRGB=function(t,e,i){return n.rgb.husl([t,e,i])},g.fromHex=function(t){return n.rgb.husl(n.hex.rgb(t))},g.toRGB=function(t,e,i){return n.husl.rgb([t,e,i])},g.toHex=function(t,e,i){return n.rgb.hex(n.husl.rgb([t,e,i]))},g.p={},g.p.toRGB=function(t,e,i){return n.xyz.rgb(n.luv.xyz(n.lch.luv(n.huslp.lch([t,e,i]))))},g.p.toHex=function(t,e,i){return n.rgb.hex(n.xyz.rgb(n.luv.xyz(n.lch.luv(n.huslp.lch([t,e,i])))))},g.p.fromRGB=function(t,e,i){return n.lch.huslp(n.luv.lch(n.xyz.luv(n.rgb.xyz([t,e,i]))))},g.p.fromHex=function(t){return n.lch.huslp(n.luv.lch(n.xyz.luv(n.rgb.xyz(n.hex.rgb(t)))))},g._conv=n,g._getBounds=a,g._maxChromaForLH=f,g._maxSafeChromaForL=d,libhusl=g}).call(this),function(t){function e(t){return"[object Function]"==Object.prototype.toString.call(t)}function n(t){return"[object Array]"==Object.prototype.toString.call(t)}function i(t,e){var n=/^\w+\:\/\//;return/^\/\/\/?/.test(t)?t=location.protocol+t:n.test(t)||"/"==t.charAt(0)||(t=(e||"")+t),n.test(t)?t:("/"==t.charAt(0)?y:v)+t}function o(t,e){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function r(t){for(var e=!1,n=0;n<t.scripts.length;n++)t.scripts[n].ready&&t.scripts[n].exec_trigger&&(e=!0,t.scripts[n].exec_trigger(),t.scripts[n].exec_trigger=null);return e}function s(t,e,n,i){t.onload=t.onreadystatechange=function(){t.readyState&&"complete"!=t.readyState&&"loaded"!=t.readyState||e[n]||(t.onload=t.onreadystatechange=null,i())}}function a(t){t.ready=t.finished=!0;for(var e=0;e<t.finished_listeners.length;e++)t.finished_listeners[e]();t.ready_listeners=[],t.finished_listeners=[]}function u(t,e,n,i,o){setTimeout(function(){var r,a,u=e.real_src;if("item"in w){if(!w[0])return void setTimeout(arguments.callee,25);w=w[0]}r=document.createElement("script"),e.type&&(r.type=e.type),e.charset&&(r.charset=e.charset),o?A?(t[_]&&E("start script preload: "+u),n.elem=r,U?(r.preload=!0,r.onpreload=i):r.onreadystatechange=function(){"loaded"==r.readyState&&i()},r.src=u):o&&0==u.indexOf(y)&&t[l]?(a=new XMLHttpRequest,t[_]&&E("start script preload (xhr): "+u),a.onreadystatechange=function(){4==a.readyState&&(a.onreadystatechange=function(){},n.text=a.responseText+"\n//@ sourceURL="+u,i())},a.open("GET",u),a.send()):(t[_]&&E("start script preload (cache): "+u),r.type="text/cache-script",s(r,n,"ready",function(){w.removeChild(r),i()}),r.src=u,w.insertBefore(r,w.firstChild)):L?(t[_]&&E("start script load (ordered async): "+u),r.async=!1,s(r,n,"finished",i),r.src=u,w.insertBefore(r,w.firstChild)):(t[_]&&E("start script load: "+u),s(r,n,"finished",i),r.src=u,w.insertBefore(r,w.firstChild))},0)}function h(){function v(t,e,n){function i(){null!=o&&(o=null,a(n))}var o;C[e.src].finished||(t[f]||(C[e.src].finished=!0),o=n.elem||document.createElement("script"),e.type&&(o.type=e.type),e.charset&&(o.charset=e.charset),s(o,n,"finished",i),n.elem?n.elem=null:n.text?(o.onload=o.onreadystatechange=null,o.text=n.text):o.src=e.real_src,w.insertBefore(o,w.firstChild),n.text&&i())}function y(t,e,n,o){var r,s,h=function(){e.ready_cb(e,function(){v(t,e,r)})},p=function(){e.finished_cb(e,n)};e.src=i(e.src,t[m]),e.real_src=e.src+(t[d]?(/\?.*$/.test(e.src)?"&_":"?_")+~~(1e9*Math.random())+"=":""),C[e.src]||(C[e.src]={items:[],finished:!1}),s=C[e.src].items,t[f]||0==s.length?(r=s[s.length]={ready:!1,finished:!1,ready_listeners:[h],finished_listeners:[p]},u(t,e,r,o?function(){r.ready=!0;for(var t=0;t<r.ready_listeners.length;t++)r.ready_listeners[t]();r.ready_listeners=[]}:function(){a(r)},o)):(r=s[0],r.finished?p():r.finished_listeners.push(p))}function b(){function t(t,e){p[_]&&E("script preload finished: "+t.real_src),t.ready=!0,t.exec_trigger=e,s()}function i(t,e){p[_]&&E("script execution finished: "+t.real_src),t.ready=t.finished=!0,t.exec_trigger=null;for(var n=0;n<e.scripts.length;n++)if(!e.scripts[n].finished)return;e.finished=!0,s()}function s(){for(;f<l.length;)if(e(l[f])){p[_]&&E("$LAB.wait() executing: "+l[f]);try{l[f++]()}catch(t){p[g](t),p[_]&&x("$LAB.wait() error caught: ",t)}}else{if(!l[f].finished){if(r(l[f]))continue;break}f++}f==l.length&&(d=!1,h=!1)}function a(){h&&h.scripts||l.push(h={scripts:[],finished:!0})}var u,h,p=o(U,{}),l=[],f=0,d=!1;return u={script:function(){for(var r=0;r<arguments.length;r++)!function(r,s){var l;n(r)||(s=[r]);for(var f=0;f<s.length;f++)a(),r=s[f],e(r)&&(r=r()),r&&(n(r)?(l=[].slice.call(r),l.unshift(f,1),[].splice.apply(s,l),f--):("string"==typeof r&&(r={src:r}),r=o(r,{ready:!1,ready_cb:t,finished:!1,finished_cb:i}),h.finished=!1,h.scripts.push(r),y(p,r,h,L&&d),d=!0,p[c]&&u.wait()))}(arguments[r],arguments[r]);return u},wait:function(){if(arguments.length>0){for(var t=0;t<arguments.length;t++)l.push(arguments[t]);h=l[l.length-1]}else h=!1;return s(),u}},{script:u.script,wait:u.wait,setOptions:function(t){return o(t,p),u}}}var S,U={},L=A||k,P=[],C={};return U[l]=!0,U[c]=!1,U[f]=!1,U[d]=!1,U[_]=!1,U[m]="",U[g]=function(t){},S={setGlobalDefaults:function(t){return o(t,U),S},setOptions:function(){return b().setOptions.apply(null,arguments)},script:function(){return b().script.apply(null,arguments)},wait:function(){return b().wait.apply(null,arguments)},queueScript:function(){return P[P.length]={type:"script",args:[].slice.call(arguments)},S},queueWait:function(){return P[P.length]={type:"wait",args:[].slice.call(arguments)},S},runQueue:function(){for(var t,e=S,n=P.length,i=n;--i>=0;)t=P.shift(),e=e[t.type].apply(null,t.args);return e},noConflict:function(){return t.$LAB=p,S},sandbox:function(){return h()}}}var p=t.$LAB,l="UseLocalXHR",c="AlwaysPreserveOrder",f="AllowDuplicates",d="CacheBust",_="Debug",m="BasePath",g="ErrorHandler",v=/^[^?#]*\//.exec(location.href)[0],y=/^\w+\:\/\/\/?[^\/]+/.exec(v)[0],w=document.head||document.getElementsByTagName("head"),b=t.opera&&"[object Opera]"==Object.prototype.toString.call(t.opera)||"MozAppearance"in document.documentElement.style,E=function(){},x=E,S=document.createElement("script"),U="boolean"==typeof S.preload,A=U||S.readyState&&"uninitialized"==S.readyState,L=!A&&S.async===!0,k=!A&&!L&&!b;t.console&&t.console.log&&(t.console.error||(t.console.error=t.console.log),E=function(e){t.console.log(e)},x=function(e,n){t.console.error(e,n)}),t.$LAB=h(),function(t,e,n){null==document.readyState&&document[t]&&(document.readyState="loading",document[t](e,n=function(){document.removeEventListener(e,n,!1),document.readyState="complete"},!1))}("addEventListener","DOMContentLoaded")}(this);var Color,ColorModel,ColorType,bound01,color,convertToPercentage,correctAlpha,cssNames,hslToRgb,inputData,isNumeric,isOnePointZero,isPercentage,matchers,numberFromString,pad2,percentToFraction,rgbToHex,rgbToHsl,rgbToRgb,rgbaFromHusl,stringToObject,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};ColorType={RGB:"rgb",HSL:"hsl",HEX:"hex",NAME:"name"},Color=function(t){function e(t,n,i,o){var r;return this.color=t,this.toInspect=__bind(this.toInspect,this),""===this.color&&(this.color=null),t=this.color,e.isColorObject(t)?t:(r=inputData(t,n,i,o),this._type=r.type,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._h=r.h,this._s=r.s,this._l=r.l,void(this._roundA=Math.round(100*this._a)/100))}return __extends(e,t),e.define("r",{get:function(){return this._r}}),e.define("g",{get:function(){return this._g}}),e.define("b",{get:function(){return this._b}}),e.define("a",{get:function(){return this._a}}),e.define("h",{get:function(){return this._h}}),e.define("s",{get:function(){return this._s}}),e.define("l",{get:function(){return this._l}}),e.prototype.toHex=function(t){return rgbToHex(this._r,this._g,this._b,t)},e.prototype.toHexString=function(t){return"#"+this.toHex(t)},e.prototype.toRgb=function(){return void 0===this._rgb&&(this._rgb={r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}),this._rgb},e.prototype.toRgbString=function(){return 1===this._a?"rgb("+Utils.round(this._r,0)+", "+Utils.round(this._g,0)+", "+Utils.round(this._b,0)+")":"rgba("+Utils.round(this._r,0)+", "+Utils.round(this._g,0)+", "+Utils.round(this._b,0)+", "+this._roundA+")"},e.prototype.toHsl=function(){return void 0===this._hsl&&(this._hsl={h:this.h,s:this.s,l:this.l,a:this.a}),this._hsl},e.prototype.toHusl=function(){var t,e;return void 0===this._husl&&(t=libhusl._conv,e=t.lch.husl(t.luv.lch(t.xyz.luv(t.rgb.xyz([this.r/255,this.g/255,this.b/255])))),this._husl={h:e[0],s:e[1],l:e[2]}),this._husl},e.prototype.toHslString=function(){var t,e,n,i;return void 0===this._hslString&&(e=this.toHsl(),t=Math.round(e.h),i=Math.round(100*e.s),n=Math.round(100*e.l),1===this._a?this._hslString="hsl("+t+", "+i+"%, "+n+"%)":this._hslString="hsla("+t+", "+i+"%, "+n+"%, "+this._roundA+")"),this._hslString},e.prototype.toName=function(){var t,e,n,i,o,r;if(0===this._a)return"transparent";if(this._a<1)return!1;for(t=rgbToHex(this._r,this._g,this._b,!0),r=Utils.keys(cssNames),i=0,o=r.length;i<o;i++)if(e=r[i],n=cssNames[e],n===t)return e;return!1},e.prototype.lighten=function(t){var n;return null==t&&(t=10),n=this.toHsl(),n.l+=t/100,n.l=Math.min(1,Math.max(0,n.l)),new e(n)},e.prototype.brighten=function(t){var n;return null==t&&(t=10),n=this.toRgb(),n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(t/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(t/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(t/100)))),new e(n)},e.prototype.darken=function(t){var n;return null==t&&(t=10),n=this.toHsl(),n.l-=t/100,n.l=Math.min(1,Math.max(0,n.l)),new e(n)},e.prototype.desaturate=function(t){var n;return null==t&&(t=10),n=this.toHsl(),n.s-=t/100,n.s=Math.min(1,Math.max(0,n.s)),new e(n)},e.prototype.saturate=function(t){var n;return null==t&&(t=10),n=this.toHsl(),n.s+=t/100,n.s=Math.min(1,Math.max(0,n.s)),new e(n)},e.prototype.grayscale=function(){var t;return t=this.toHsl(),new e(t).desaturate(100)},e.prototype.toString=function(){return this.toRgbString()},e.prototype.isEqual=function(t){return e.equal(this,t)},e.prototype.transparent=function(){var t;return t=new e({r:this.r,g:this.g,b:this.b,a:0})},e.prototype.mix=function(t,n,i,o){return null==i&&(i=!1),e.mix(this,t,n,i,o)},e.prototype.toInspect=function(){return this._type===ColorType.HSL?"<Color h:"+this.h+" s:"+this.s+" l:"+this.l+" a:"+this.a+">":this._type===ColorType.HEX||this._type===ColorType.NAME?'<Color "'+this.color+'">':"<Color r:"+this.r+" g:"+this.g+" b:"+this.b+" a:"+this.a+">"},e.mix=function(t,n,i,o,r){var s,a,u,h,p,l,c;return null==i&&(i=.5),null==o&&(o=!1),p=null,"string"==typeof t&&this.isColorString(t)&&(t=new e(t)),"string"==typeof n&&this.isColorString(n)&&(n=new e(n)),!(t instanceof e)&&n instanceof e?t=n.transparent():t instanceof e&&0===t._a&&n instanceof e&&0!==n._a?t=n.transparent():!(n instanceof e)&&t instanceof e?n=t.transparent():n instanceof e&&0===n._a&&t instanceof e&&0!==t._a&&(n=t.transparent()),n instanceof e&&(ColorModel.isRGB(r)?p=new e({r:Utils.modulate(i,[0,1],[t._r,n._r],o),g:Utils.modulate(i,[0,1],[t._g,n._g],o),b:Utils.modulate(i,[0,1],[t._b,n._b],o),a:Utils.modulate(i,[0,1],[t._a,n._a],o)}):(ColorModel.isHSL(r)?(u=t.toHsl(),h=n.toHsl()):(u=t.toHusl(),h=n.toHusl()),0===u.s?u.h=h.h:0===h.s&&(h.h=u.h),a=u.h,l=h.h,s=l-a,s>180?s=l-360-a:s<-180&&(s=l+360-a),c={h:Utils.modulate(i,[0,1],[a,a+s],o),s:Utils.modulate(i,[0,1],[u.s,h.s],o),l:Utils.modulate(i,[0,1],[u.l,h.l],o),a:Utils.modulate(i,[0,1],[t.a,n.a],o)},p=new e(ColorModel.isHSL(r)?c:rgbaFromHusl(c)))),p},e.random=function(t){var n;return null==t&&(t=1),n=function(){return parseInt(255*Math.random())},new e("rgba("+n()+", "+n()+", "+n()+", "+t+")")},e.toColor=function(t){return"inherit"===t?t:t.color&&Utils.isString(t.color)&&t.color.indexOf("gradient")!==-1?t.color:new e(t)},e.validColorValue=function(t){return t instanceof e||null===t},e.isColor=function(t){return Utils.isString(t)?this.isColorString(t):this.isColorObject(t)},e.isColorObject=function(t){return t instanceof e},e.isColorString=function(t){return!!Utils.isString(t)&&stringToObject(t)!==!1},e.equal=function(t,n){return!(!this.validColorValue(t)&&!e.isColorString(t))&&(!(!this.validColorValue(n)&&!e.isColorString(n))&&(t=new e(t),n=new e(n),t.r===n.r&&(t.g===n.g&&(t.b===n.b&&t.a===n.a))))},e.rgbToHsl=function(t,e,n){return rgbToHsl(t,e,n)},e.gradient=function(){var t,n,i,o,r,s,a,u,h,p,l;for(n=arguments,s="to bottom",o=[],a="",r=0,u=0,p=n.length;u<p;u++)t=n[u],"string"==typeof t&&this.isColorString(t)?(t=new e(t),o.push(t)):void 0!==t&&t.toString?o.push(t.toString()):"transparent"===t||"clear"===t?(t=new e,t=t.transparent(),o.push(t)):s=Utils.isNumber(t)?t+"deg":t.indexOf("deg")===-1?"to "+t:t,r++;for(r=0,h=0,l=o.length;h<l;h++)i=o[h],a+=i.toString(),r!==o.length-1&&(a+=", "),r++;return{color:"linear-gradient("+s+", "+a+")"}},e}(Element),ColorModel={RGB:"rgb",RGBA:"rgba",HSL:"hsl",HSLA:"hsla"},ColorModel.isRGB=function(t){var e;return!!Utils.isString(t)&&((e=t.toLowerCase())===ColorModel.RGB||e===ColorModel.RGBA)},ColorModel.isHSL=function(t){var e;return!!Utils.isString(t)&&((e=t.toLowerCase())===ColorModel.HSL||e===ColorModel.HSLA)},rgbaFromHusl=function(t){var e,n,i;return e=libhusl._conv,n=e.xyz.rgb(e.luv.xyz(e.lch.luv(e.husl.lch([t.h,t.s,t.l])))),i={r:255*n[0],g:255*n[1],b:255*n[2],a:t.a}},inputData=function(t,e,n,i){var o,r,s,a,u,h,p,l;return h={r:0,g:0,b:0},s={h:0,s:0,l:0},o=1,u=!1,l=ColorType.RGB,null===t?o=0:Utils.isNumber(t)?(h.r=t,Utils.isNumber(e)&&(h.g=e),Utils.isNumber(n)&&(h.b=n),Utils.isNumber(i)&&(o=i)):("string"==typeof t&&(t=stringToObject(t),t||(t={r:0,g:0,b:0,a:0}),t.hasOwnProperty("type")&&(l=t.type)),"object"==typeof t&&(t.hasOwnProperty("r")||t.hasOwnProperty("g")||t.hasOwnProperty("b")?h=rgbToRgb(t.r,t.g,t.b):(t.hasOwnProperty("h")||t.hasOwnProperty("s")||t.hasOwnProperty("l"))&&(r=isNumeric(t.h)?parseFloat(t.h):0,r=(r+360)%360,p=isNumeric(t.s)?t.s:1,Utils.isString(t.s)&&(p=numberFromString(t.s)),a=isNumeric(t.l)?t.l:.5,Utils.isString(t.l)&&(a=numberFromString(t.l)),h=hslToRgb(r,p,a),l=ColorType.HSL,s={h:r,s:p,l:a}),t.hasOwnProperty("a")&&(o=t.a))),o=correctAlpha(o),l!==ColorType.HSL&&(s=rgbToHsl(h.r,h.g,h.b)),{type:l,r:Math.min(255,Math.max(h.r,0)),g:Math.min(255,Math.max(h.g,0)),b:Math.min(255,Math.max(h.b,0)),h:Utils.clamp(s.h,0,360),s:Utils.clamp(s.s,0,1),l:Utils.clamp(s.l,0,1),a:o}},numberFromString=function(t){return t.match(/\d+/)[0]},rgbToRgb=function(t,e,n){return{r:isNumeric(t)?255*bound01(t,255):0,g:isNumeric(e)?255*bound01(e,255):0,b:isNumeric(n)?255*bound01(n,255):0}},rgbToHex=function(t,e,n,i){var o;return o=[pad2(Math.round(t).toString(16)),pad2(Math.round(e).toString(16)),pad2(Math.round(n).toString(16))],i&&o[0].charAt(0)===o[0].charAt(1)&&o[1].charAt(0)===o[1].charAt(1)&&o[2].charAt(0)===o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")},rgbToHsl=function(t,e,n){var i,o,r,s,a,u;if(t=bound01(t,255),e=bound01(e,255),n=bound01(n,255),s=Math.max(t,e,n),a=Math.min(t,e,n),o=u=r=(s+a)/2,s===a)o=u=0;else{switch(i=s-a,u=r>.5?i/(2-s-a):i/(s+a),s){case t:o=(e-n)/i+(e<n?6:0);break;case e:o=(n-t)/i+2;break;case n:o=(t-e)/i+4}o/=6}return{h:360*o,s:u,l:r}},hslToRgb=function(t,e,n){var i,o,r,s,a,u;return u=void 0,o=void 0,i=void 0,t=bound01(t,360),e=bound01(100*e,100),n=bound01(100*n,100),r=function(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t},0===e?u=o=i=n:(a=n<.5?n*(1+e):n+e-n*e,s=2*n-a,u=r(s,a,t+1/3),o=r(s,a,t),i=r(s,a,t-1/3)),{r:255*u,g:255*o,b:255*i}},convertToPercentage=function(t){return t<=1&&(t=100*t+"%"),t},correctAlpha=function(t){return t=parseFloat(t),t<0&&(t=0),(isNaN(t)||t>1)&&(t=1),t},bound01=function(t,e){var n;return isOnePointZero(t)&&(t="100%"),n=isPercentage(t),t=Math.min(e,Math.max(0,parseFloat(t))),n&&(t=parseInt(t*e,10)/100),Math.abs(t-e)<1e-6?1:t%e/parseFloat(e)},isOnePointZero=function(t){return"string"==typeof t&&t.indexOf(".")!==-1&&1===parseFloat(t)},isPercentage=function(t){return"string"==typeof t&&t.indexOf("%")!==-1},pad2=function(t){return 1===t.length?"0"+t:""+t},matchers=function(){var t,e,n,i,o;return t="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",n="(?:"+e+")|(?:"+t+")",i="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",o="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",{rgb:new RegExp("rgb"+i),rgba:new RegExp("rgba"+o),hsl:new RegExp("hsl"+i),hsla:new RegExp("hsla"+o),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}(),isNumeric=function(t){return!isNaN(t)&&isFinite(t)},percentToFraction=function(t){return numberFromString(t)/100},stringToObject=function(t){var e,n,i,o;if(i=/^[\s,#]+/,o=/\s+$/,t=t.replace(i,"").replace(o,"").toLowerCase(),n=!1,cssNames[t])t=cssNames[t],n=!0,{type:ColorType.NAME};else if("transparent"===t)return{r:0,g:0,b:0,a:0,type:ColorType.NAME};return e=void 0,(e=matchers.rgb.exec(t))?{r:e[1],g:e[2],b:e[3]}:(e=matchers.rgba.exec(t))?{r:e[1],g:e[2],b:e[3],a:e[4]}:(e=matchers.hsl.exec(t))?{h:e[1],s:percentToFraction(e[2]),l:percentToFraction(e[3])}:(e=matchers.hsla.exec(t))?{h:e[1],s:percentToFraction(e[2]),l:percentToFraction(e[3]),a:e[4]}:(e=matchers.hex6.exec(t)||(e=matchers.hex6.exec(cssNames[t])))?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16),a:1,type:ColorType.HEX}:!!(e=matchers.hex3.exec(t)||(e=matchers.hex3.exec(cssNames[t])))&&{r:parseInt(e[1]+""+e[1],16),g:parseInt(e[2]+""+e[2],16),b:parseInt(e[3]+""+e[3],16),type:ColorType.HEX}},cssNames={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};for(color in cssNames)Color[color]="#"+cssNames[color];for(color in cssNames)window[color]="#"+cssNames[color];window.clear="clear",window.transparent="transparent",window.rgb=function(t,e,n){return"rgb("+t+", "+e+", "+n+")"},window.rgba=function(t,e,n,i){return"rgba("+t+", "+e+", "+n+", "+i+")"};var SessionStore,Store;Store={set:function(t,e){var n;try{localStorage.setItem(t,JSON.stringify(e))}catch(t){n=t,console.warn("Error, Store not available.")}},get:function(t){var e;try{return JSON.parse(localStorage.getItem(t))}catch(t){return e=t,console.warn("Error, Store not available.")}},remove:function(t){var e;try{localStorage.removeItem(t)}catch(t){e=t,console.warn("Error, Store not available.")}}},SessionStore={set:function(t,e){var n;try{sessionStorage.setItem(t,JSON.stringify(e))}catch(t){n=t,console.warn("Error, Store not available.")}},get:function(t){var e;try{return JSON.parse(sessionStorage.getItem(t))}catch(t){return e=t,console.warn("Error, Store not available.")}},remove:function(t){var e;try{sessionStorage.removeItem(t)}catch(t){e=t,console.warn("Error, Store not available.")}}};var Cookie;Cookie={set:function(t,e,n){var i,o,r,s,a;r=new Date,r.setTime(r.getTime()+-864e5),a="expires="+r.toUTCString(),document.cookie=t+"=; "+a+"; path=/",void 0===n&&(n=365),s=new Date,s.setDate(s.getDate()+n),o=encodeURI(e)+(null===n?"":"; expires="+s.toUTCString()),i=t+"="+o+";path=/",document.cookie=i},get:function(t){var e,n,i,o,r;for(o=t+"=",n=document.cookie.split(";"),i=0;i<n.length;){for(e=n[i];" "===e.charAt(0);)e=e.substring(1);if(0===e.indexOf(o))return r=decodeURI(e.substring(o.length,e.length)),"false"!==r&&"true"!==r||(r=JSON.parse(r)),r;i++}},remove:function(t){var e,n;e=new Date,e.setTime(e.getTime()+-864e5),n="expires="+e.toUTCString(),document.cookie=t+"=; "+n+"; path=/"}};var Request,RequestEngine,__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};RequestEngine=function(t){function e(t,e){var n;if(!Utils.isString(e[0]))return null;if(this.url=e[0],Utils.isFunction(e[1])?(this.success=e[1],Utils.isFunction(e[2])&&(this.error=e[2])):Utils.isObject(e[1])&&(e[1].success&&(this.success=e[1].success),e[1].error&&(this.error=e[1].error),e[1].files&&(this.files=e[1].files),e[1].async===!1&&(this.async=!1),e[1].then&&(this.then=e[1].then),e[1].username&&(this.username=e[1].username),e[1].password&&(this.password=e[1].password),e[1].parameters&&Utils.isObject(e[1].parameters)&&(this.parameters=e[1].parameters),Utils.isFunction(e[2])&&(this.success=e[2],Utils.isFunction(e[3])&&(this.error=e[3]))),this.parameters&&(this._parameters=Object.keys(this.parameters).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(this.parameters[t])}).join("&")),this.files&&this.setUploadEvents(),this.xhttp.onreadystatechange=this.responseProcess.bind(this),"GET"===t&&this._parameters&&this._parameters.length&&(this.url=this.url+"?"+this._parameters),this.xhttp.open(t,this.url,this.async,this.username,this.password),"POST"===t&&this.files){this._parameters=new FormData;for(n in this.parameters)this._parameters.append(n,this.parameters[n]);for(n in this.files)this._parameters.append(n,this.files[n])}else"GET"!==t&&this.xhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");this.xhttp.send(this._parameters)}return __extends(e,t),e.prototype._kind="RequestEngine",e.prototype.url=NULL,e.prototype.parameters=NULL,e.prototype.files=NULL,e.prototype.username=NULL,e.prototype.password=NULL,e.prototype.success=NULL,e.prototype.error=NULL,e.prototype.async=!0,e.prototype.response={},e.prototype.xhttp=new XMLHttpRequest,e.prototype.setUploadEvents=function(){var t;return t=this,this.xhttp.upload.addEventListener(Event.Progress,function(e){e.progress=NULL,e.lengthComputable&&(e.progress=e.loaded/e.total),t.emit(Event.Progress,e)}),this.xhttp.upload.addEventListener(Event.Loaded,function(e){e.progress=100,t.emit(Event.Load,e)}),this.xhttp.upload.addEventListener(Event.Error,function(e){t.emit(Event.Error,e)}),this.xhttp.upload.addEventListener(Event.Abort,function(e){t.emit(Event.Abort,e)})},e.prototype.setHTTPResponse=function(){var t;if(this.xhttp.responseText!==NULL)try{return this.response.data=JSON.parse(this.xhttp.responseText)}catch(e){return t=e,this.response.data=this.xhttp.responseText}},e.prototype.responseProcess=function(){this.response.state=this.xhttp.readyState,this.response.status=this.xhttp.status,4===this.xhttp.readyState&&(this.response.raw=this.xhttp.responseText,"2"===this.xhttp.status.toString()[0]?this.success&&(this.setHTTPResponse(),this.success(this.response),this.emit(Event.Success,this.response)):this.error&&(this.setHTTPResponse(),this.error(this.response),this.emit(Event.Error,this.response)),this.then&&this.then(this.response),this.emit(Event.Response,this.response))},e.prototype.onSuccess=function(t){return this.on(Event.Success,t)},e.prototype.onError=function(t){return this.on(Event.Error,t)},e.prototype.onResponse=function(t){return this.on(Event.Response,t)},e.prototype.onProgress=function(t){return this.on(Event.Progress,t)},e.prototype.onAbort=function(t){return this.on(Event.Abort,t)},e.prototype.onLoad=function(t){return this.on(Event.Load,t)},e.prototype.onLoaded=function(t){return this.on(Event.Loaded,t)},e.prototype.onDone=function(t){return this.on(Event.Loaded,t)},e}(Element),Request={get:function(){return 0===arguments.length?null:new RequestEngine("GET",arguments)},send:function(){return 0===arguments.length?null:new RequestEngine("POST",arguments)},delete:function(){return 0===arguments.length?null:new RequestEngine("DELETE",arguments)},update:function(){return 0===arguments.length?null:new RequestEngine("PUT",arguments)}};var GestureDoubleTapTime,GestureEdgeSwipeDistance,GestureForceTapDesktop,GestureForceTapMobile,GestureForceTapMobilePollTime,GestureLongPressTime,GestureMinimumFingerDistance,GestureRecognizer,GestureSwipeThreshold,GestureVelocityTime,__bind=function(t,e){return function(){return t.apply(e,arguments)}};GestureLongPressTime=.5,GestureDoubleTapTime=.25,GestureSwipeThreshold=30,GestureEdgeSwipeDistance=30,GestureVelocityTime=.1,GestureForceTapDesktop=MouseEvent.WEBKIT_FORCE_AT_FORCE_MOUSE_DOWN,GestureForceTapMobile=.7,GestureForceTapMobilePollTime=1/30,GestureMinimumFingerDistance=30,GestureRecognizer=function(){function t(){this._process=__bind(this._process,this),this.edgeswipedirectionend=__bind(this.edgeswipedirectionend,this),this.edgeswipedirectionstart=__bind(this.edgeswipedirectionstart,this),this.edgeswipedirection=__bind(this.edgeswipedirection,this),this.swipedirectionend=__bind(this.swipedirectionend,this),this.swipedirection=__bind(this.swipedirection,this),this.swipedirectionstart=__bind(this.swipedirectionstart,this),this.swipeend=__bind(this.swipeend,this),this.swipe=__bind(this.swipe,this),this.swipestart=__bind(this.swipestart,this),this.rotateend=__bind(this.rotateend,this),this.rotate=__bind(this.rotate,this),this.rotatestart=__bind(this.rotatestart,this),this.scaleend=__bind(this.scaleend,this),this.scale=__bind(this.scale,this),this.scalestart=__bind(this.scalestart,this),this.pinchend=__bind(this.pinchend,this),this.pinch=__bind(this.pinch,this),this.pinchstart=__bind(this.pinchstart,this),this.panright=__bind(this.panright,this),this.panleft=__bind(this.panleft,this),this.pandown=__bind(this.pandown,this),this.panup=__bind(this.panup,this),this.panend=__bind(this.panend,this),this.pan=__bind(this.pan,this),this.panstart=__bind(this.panstart,this),this.forcetapend=__bind(this.forcetapend,this),this.forcetapstart=__bind(this.forcetapstart,this),this.forcetapchange=__bind(this.forcetapchange,this),this._updateMacForce=__bind(this._updateMacForce,this),this._updateTouchForce=__bind(this._updateTouchForce,this),this.longpressend=__bind(this.longpressend,this),this.longpressstart=__bind(this.longpressstart,this),this.doubletap=__bind(this.doubletap,this),this.tapend=__bind(this.tapend,this),this.tapstart=__bind(this.tapstart,this),this.tap=__bind(this.tap,this),this.touchend=__bind(this.touchend,this),this.touchmove=__bind(this.touchmove,this),this.touchstart=__bind(this.touchstart,this),this.startTouch=__bind(this.startTouch,this),this.startMouse=__bind(this.startMouse,this),this.em=new DOMEventManager,this.em.wrap(window).addEventListener("mousedown",this.startMouse),this.em.wrap(window).addEventListener("touchstart",this.startTouch)}return t.prototype.destroy=function(){return this.em.removeAllListeners()},t.prototype.cancel=function(){return window.clearTimeout(this.session.pressTimer),this.session=null},t.prototype.startMouse=function(t){if(!this.session)return this.em.wrap(window).addEventListener("mousemove",this.touchmove),this.em.wrap(window).addEventListener("mouseup",this.touchend),this.touchstart(t)},t.prototype.startTouch=function(t){if(!this.session)return this.em.wrap(window).addEventListener("touchmove",this.touchmove),this.em.wrap(window).addEventListener("touchend",this.touchend),this.touchstart(t)},t.prototype.touchstart=function(t){if(!this.session)return this.em.wrap(window).addEventListener("webkitmouseforcechanged",this._updateMacForce),this.session={startEvent:this._getGestureEvent(t),lastEvent:null,startMultiEvent:null,startTime:Date.now(),pressTimer:window.setTimeout(this.longpressstart,1e3*GestureLongPressTime),started:{},events:[],eventCount:0},t=this._getGestureEvent(t),this.tapstart(t),Date.now()-this.doubleTapTime<1e3*GestureDoubleTapTime?this.doubletap(t):this.doubleTapTime=Date.now(),this._process(t),Utils.isTouch()?this._updateTouchForce():void 0;
},t.prototype.touchmove=function(t){return this._process(this._getGestureEvent(t))},t.prototype.touchend=function(t){var e,n,i,o;if(null!=t.touches)if(Utils.isTouch()){if(0!==t.touches.length)return}else if(t.touches.length!==t.changedTouches.length)return;this.em.wrap(window).removeEventListener("mousemove",this.touchmove),this.em.wrap(window).removeEventListener("mouseup",this.touchend),this.em.wrap(window).removeEventListener("touchmove",this.touchmove),this.em.wrap(window).removeEventListener("touchend",this.touchend),this.em.wrap(window).addEventListener("webkitmouseforcechanged",this._updateMacForce),t=this._getGestureEvent(t),i=this.session.started;for(e in i)n=i[e],n&&this[""+e+"end"](t);return(null!=(o=this.session)?o.startEvent:void 0)?this.session.startEvent.target===t.target&&this.tap(t):this.tap(t),this.tapend(t),this.cancel()},t.prototype.tap=function(t){return this._dispatchEvent("tap",t)},t.prototype.tapstart=function(t){return this._dispatchEvent("tapstart",t)},t.prototype.tapend=function(t){return this._dispatchEvent("tapend",t)},t.prototype.doubletap=function(t){return this._dispatchEvent("doubletap",t)},t.prototype.longpressstart=function(){var t;if(this.session&&!this.session.started.longpress)return t=this._getGestureEvent(this.session.startEvent),this.session.started.longpress=t,this._dispatchEvent("longpressstart",t),this._dispatchEvent("longpress",t)},t.prototype.longpressend=function(t){return this._dispatchEvent("longpressend",t)},t.prototype._updateTouchForce=function(){var t,e,n;if(null!=(e=this.session)&&null!=(n=e.lastEvent)?n.touches.length:void 0)return this.session.force=this.session.lastEvent.touches[0].force||0,t=this._getGestureEvent(this.session.lastEvent),this.forcetapchange(t),this.session.force>=GestureForceTapMobile?this.forcetapstart(t):this.forcetapend(t),setTimeout(this._updateTouchForce,GestureForceTapMobilePollTime)},t.prototype._updateMacForce=function(t){if(this.session)return this.session.force=Utils.modulate(t.webkitForce,[0,3],[0,1]),this.forcetapchange(this._getGestureEvent(t)),t.webkitForce>=GestureForceTapDesktop?this.forcetapstart(t):this.forcetapend(t)},t.prototype.forcetapchange=function(t){return this._dispatchEvent("forcetapchange",t)},t.prototype.forcetapstart=function(t){if(this.session&&!this.session.started.forcetap)return this.session.started.forcetap=t,this._dispatchEvent("forcetapstart",t),this._dispatchEvent("forcetap",t)},t.prototype.forcetapend=function(t){if(this.session&&this.session.started.forcetap)return this.session.started.forcetap=null,this._dispatchEvent("forcetapend",t)},t.prototype.panstart=function(t){return this.session.started.pan=t,this._dispatchEvent("panstart",t,this.session.started.pan.target)},t.prototype.pan=function(t){var e;if(this._dispatchEvent("pan",t,this.session.started.pan.target),e=this._getDirection(t.delta))return this["pan"+e](t)},t.prototype.panend=function(t){return this._dispatchEvent("panend",t,this.session.started.pan.target),this.session.started.pan=null},t.prototype.panup=function(t){return this._dispatchEvent("panup",t,this.session.started.pan.target)},t.prototype.pandown=function(t){return this._dispatchEvent("pandown",t,this.session.started.pan.target)},t.prototype.panleft=function(t){return this._dispatchEvent("panleft",t,this.session.started.pan.target)},t.prototype.panright=function(t){return this._dispatchEvent("panright",t,this.session.started.pan.target)},t.prototype.pinchstart=function(t){return this.session.started.pinch=t,this.scalestart(t,this.session.started.pinch.target),this.rotatestart(t,this.session.started.pinch.target),this._dispatchEvent("pinchstart",t)},t.prototype.pinch=function(t){return this._dispatchEvent("pinch",t),this.scale(t,this.session.started.pinch.target),this.rotate(t,this.session.started.pinch.target)},t.prototype.pinchend=function(t){return this._dispatchEvent("pinchend",t),this.scaleend(t,this.session.started.pinch.target),this.rotateend(t,this.session.started.pinch.target),this.session.started.pinch=null},t.prototype.scalestart=function(t){return this._dispatchEvent("scalestart",t)},t.prototype.scale=function(t){return this._dispatchEvent("scale",t)},t.prototype.scaleend=function(t){return this._dispatchEvent("scaleend",t)},t.prototype.rotatestart=function(t){return this._dispatchEvent("rotatestart",t)},t.prototype.rotate=function(t){return this._dispatchEvent("rotate",t)},t.prototype.rotateend=function(t){return this._dispatchEvent("rotateend",t)},t.prototype.swipestart=function(t){return this._dispatchEvent("swipestart",t),this.session.started.swipe=t,this.swipedirectionstart(t)},t.prototype.swipe=function(t){return this._dispatchEvent("swipe",t),this.swipedirection(t)},t.prototype.swipeend=function(t){return this._dispatchEvent("swipeend",t)},t.prototype.swipedirectionstart=function(t){var e,n,i,o,r,s,a,u;if(t.offsetDirection&&!this.session.started.swipedirection)return this.session.started.swipedirection=t,e=this.session.started.swipedirection.offsetDirection,this._dispatchEvent("swipe"+e+"start",t),o=this._edgeForSwipeDirection(e),n=Utils.frameGetMaxX(App.frame),i=Utils.frameGetMaxY(App.frame),"top"===o&&0<(r=t.start.y-App.frame.y)&&r<GestureEdgeSwipeDistance&&this.edgeswipedirectionstart(t),"right"===o&&n-GestureEdgeSwipeDistance<(s=t.start.x)&&s<n&&this.edgeswipedirectionstart(t),"bottom"===o&&i-GestureEdgeSwipeDistance<(a=t.start.y)&&a<i&&this.edgeswipedirectionstart(t),"left"===o&&0<(u=t.start.x-App.frame.x)&&u<GestureEdgeSwipeDistance?this.edgeswipedirectionstart(t):void 0},t.prototype.swipedirection=function(t){var e;if(this.session.started.swipedirection)return e=this.session.started.swipedirection.offsetDirection,this._dispatchEvent("swipe"+e,t),this.session.started.edgeswipedirection?this.edgeswipedirection(t):void 0},t.prototype.swipedirectionend=function(t){var e;if(this.session.started.swipedirection)return e=this.session.started.swipedirection.offsetDirection,this._dispatchEvent("swipe"+e+"end",t)},t.prototype.edgeswipedirection=function(t){var e;return e=this._edgeForSwipeDirection(this.session.started.edgeswipedirection.offsetDirection),App.emit("edgeswipe",this._createEvent("edgeswipe",t)),App.emit("edgeswipe"+e,this._createEvent("edgeswipe"+e,t)),this._dispatchEvent("edgeswipe"+e,t)},t.prototype.edgeswipedirectionstart=function(t){var e;if(!this.session.started.edgeswipedirection)return this.session.started.edgeswipedirection=t,e=this._edgeForSwipeDirection(this.session.started.edgeswipedirection.offsetDirection),App.emit("edgeswipestart",this._createEvent("edgeswipestart",t)),App.emit("edgeswipe"+e+"start",this._createEvent("edgeswipe"+e+"start",t))},t.prototype.edgeswipedirectionend=function(t){var e;return e=this._edgeForSwipeDirection(this.session.started.edgeswipedirection.offsetDirection),App.emit("edgeswipeend",this._createEvent("edgeswipeend",t)),App.emit("edgeswipe"+e+"end",this._createEvent("edgeswipe"+e+"end",t))},t.prototype._process=function(t){if(this.session)return this.session.events.push(t),t.eventCount=this.session.eventCount++,(Math.abs(t.delta.x)>0||Math.abs(t.delta.y)>0)&&(this.session.started.pan?this.pan(t):this.panstart(t)),this.session.started.pinch&&1===t.fingers?this.pinchend(t):this.session.started.pinch||2!==t.fingers?this.session.started.pinch&&this.pinch(t):this.pinchstart(t),!this.session.started.swipe&&(Math.abs(t.offset.x)>GestureSwipeThreshold||Math.abs(t.offset.y)>GestureSwipeThreshold)?this.swipestart(t):this.session.started.swipe&&this.swipe(t),this.session.lastEvent=t},t.prototype._getEventPoint=function(t){var e;return(null!=(e=t.touches)?e.length:void 0)?this._getTouchPoint(t,0):{x:t.pageX,y:t.pageY}},t.prototype._getGestureEvent=function(t){var e,n,i,o,r,s,a,u,h,p,l,c,f,d,_,m;for(Utils.extend(t,{time:Date.now(),point:this._getEventPoint(t),start:this._getEventPoint(t),previous:this._getEventPoint(t),offset:{x:0,y:0},offsetTime:0,offsetAngle:0,offsetDirection:null,delta:{x:0,y:0},deltaTime:0,deltaAngle:0,deltaDirection:null,force:0,velocity:{x:0,y:0},fingers:(null!=(a=t.touches)?a.length:void 0)||0,touchCenter:this._getEventPoint(t),touchOffset:{x:0,y:0},touchDistance:0,scale:1,scaleDirection:null,rotation:0}),(null!=(u=this.session)?u.startEvent:void 0)&&(t.start=this.session.startEvent.point,t.offset=Utils.pointSubtract(t.point,t.start),t.offsetTime=t.time-this.session.startEvent.time,t.offsetAngle=Utils.pointAngle(this.session.startEvent.point,t.point),t.offsetDirection=this._getDirection(t.offset),t.touchCenterStart=this.session.startEvent.touchCenter),(null!=(h=this.session)?h.lastEvent:void 0)&&(t.previous=this.session.lastEvent.point,t.deltaTime=t.time-this.session.lastEvent.time,t.delta=Utils.pointSubtract(t.point,this.session.lastEvent.point),t.deltaAngle=Utils.pointAngle(t.point,this.session.lastEvent.point),t.deltaDirection=this._getDirection(t.delta)),t.fingers>1&&(i=this._getTouchPoint(t,0),o=this._getTouchPoint(t,1),t.touchCenter=Utils.pointCenter(o,i),t.touchOffset=Utils.pointSubtract(o,i),t.touchDistance=Utils.max([GestureMinimumFingerDistance,Utils.pointDistance(i,o)]),t.rotation=Utils.pointAngle(i,o)),(null!=(p=this.session)?p.events:void 0)&&(e=this.session.events.filter(function(e){return 0!==e.eventCount&&e.time>t.time-1e3*GestureVelocityTime}),t.velocity=this._getVelocity(e)),(null!=(l=this.session)?l.started.pinch:void 0)&&(t.scale=t.touchDistance/this.session.started.pinch.touchDistance,t.scaleDirection=this._getScaleDirection(t.scale-this.session.lastEvent.scale),!t.scaleDirection&&(null!=(c=this.session)?c.lastEvent:void 0)&&(t.scaleDirection=this.session.lastEvent.scaleDirection)),(null!=(f=this.session)?f.lastEvent:void 0)&&(t.fingers!==(d=this.session.lastEvent.fingers)&&2===d&&(t.delta={x:0,y:0}),2===t.fingers&&2===this.session.lastEvent.fingers&&(t.delta=Utils.pointSubtract(t.touchCenter,this.session.lastEvent.touchCenter))),(null!=(_=this.session)?_.lastEvent:void 0)&&this.session.force&&(t.force=this.session.force),m=["point","start","previous","offset","delta","velocity","touchCenter","touchOffset"],r=0,s=m.length;r<s;r++)n=m[r],t[""+n+"X"]=t[n].x,t[""+n+"Y"]=t[n].y;return t},t.prototype._getTouchPoint=function(t,e){var n;return n={x:t.touches[e].pageX,y:t.touches[e].pageY}},t.prototype._getDirection=function(t){if(Math.abs(t.x)>Math.abs(t.y)){if(t.x>0)return"right";if(t.x<0)return"left"}if(Math.abs(t.x)<Math.abs(t.y)){if(t.y<0)return"up";if(t.y>0)return"down"}return null},t.prototype._edgeForSwipeDirection=function(t){return"down"===t?"top":"left"===t?"right":"up"===t?"bottom":"right"===t?"left":null},t.prototype._getScaleDirection=function(t){return t>0?"up":t<0?"down":null},t.prototype._createEvent=function(t,e){var n,i,o;i=document.createEvent("MouseEvent"),i.initMouseEvent(t,!0,!0,window,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,e.button,e.relatedTarget),i.touches=e.touches,i.changedTouches=e.touches,i.targetTouches=e.touches;for(n in e)o=e[n],i[n]=o;return i},t.prototype._dispatchEvent=function(t,e,n){var i,o,r;return i=this._createEvent(t,e),null==n&&(n=null!=(o=this.session)&&null!=(r=o.startEvent)?r.target:void 0),null==n&&(n=e.target),n.dispatchEvent(i)},t.prototype._getVelocity=function(t){var e,n,i,o;return t.length<2?{x:0,y:0}:(e=t[t.length-1],n=t[0],i=e.time-n.time,o={x:(e.point.x-n.point.x)/i,y:(e.point.y-n.point.y)/i},o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o)},t}();var Transition,__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Transition=function(t){function e(t){t.duration&&(t.time=t.duration),t=Defaults.get(this._kind,t),e.__super__.constructor.call(this,t),this.options=Utils.clone(Utils.defaults(t,{properties:{},time:.3,delay:0,view:null,curve:"ease"})),t&&(t.properties?this.options.properties=t.properties:this.options.properties={},t.view&&(this.options.view=t.view),t.duration&&(this.options.duration=t.duration),t.delay&&(this.options.delay=t.delay),t.curve&&(this.options.curve=t.curve))}return __extends(e,t),e.prototype._kind="Transition",e}(Element),Transition.prototype.start=function(t){var e,n;if(this.options.view)return this.options.view.style.transition="all "+this.options.duration+"s "+this.options.curve+" "+this.options.delay+"s",this.options.view.props=this.options.properties,t?(n=this.options.view,e=this,Utils.delay(this.options.duration,function(){return n.style.transition="",e.emit("end")})):void 0},Transition.prototype.disable=function(){if(this.options.view)return this.options.view.style.transition="none"},Transition.prototype.remove=function(){if(this.options.view)return this.options.view.style.transition=""};var Animator;Animator=function(){function t(t){null==t&&(t={}),this.setup(t)}return t.setup=function(t){throw Error("Not implemented")},t.next=function(t){throw Error("Not implemented")},t.finished=function(){throw Error("Not implemented")},t}();var LinearAnimator,__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};LinearAnimator=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.setup=function(t){return this.options=Utils.defaults(t,{time:1,precision:.001}),this._time=0},e.prototype.next=function(t){return this._time+=t,this.finished()?1:this._time/this.options.time},e.prototype.finished=function(){return this._time>=this.options.time-this.options.precision},e}(Animator);var BezierCurveAnimator,BezierCurveDefaults,UnitBezier,__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};BezierCurveDefaults={linear:[0,0,1,1],ease:[.25,.1,.25,1],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1],easein:[.42,0,1,1],easeout:[0,0,.58,1],easeinout:[.42,0,.58,1]},BezierCurveAnimator=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.setup=function(t){return Utils.isString(t)&&BezierCurveDefaults.hasOwnProperty(t.toLowerCase())&&(t={values:BezierCurveDefaults[t.toLowerCase()]}),t.values&&Utils.isString(t.values)&&BezierCurveDefaults.hasOwnProperty(t.values.toLowerCase())&&(t={values:BezierCurveDefaults[t.values.toLowerCase()],time:t.time}),Utils.isArray(t)&&4===t.length&&(t={values:t}),this.options=Utils.defaults(t,{values:BezierCurveDefaults["ease-in-out"],time:1,precision:.001}),this._unitBezier=new UnitBezier(this.options.values[0],this.options.values[1],this.options.values[2],this.options.values[3],this._time=0)},e.prototype.next=function(t){return this._time+=t,this.finished()?1:this._unitBezier.solve(this._time/this.options.time)},e.prototype.finished=function(){return this._time>=this.options.time-this.options.precision},e}(Animator),UnitBezier=function(){function t(t,e,n,i){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(i-e)-this.cy,this.ay=1-this.cy-this.by}return t.prototype.epsilon=1e-6,t.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},t.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},t.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},t.prototype.solveCurveX=function(t){var e,n,i,o,r,s;for(r=t,n=0;n<8;){if(s=this.sampleCurveX(r)-t,Math.abs(s)<this.epsilon)return r;if(e=this.sampleCurveDerivativeX(r),Math.abs(e)<this.epsilon)break;r-=s/e,n++}if(i=0,o=1,r=t,r<i)return i;if(r>o)return o;for(;i<o;){if(s=this.sampleCurveX(r),Math.abs(s-t)<this.epsilon)return r;t>s?i=r:o=r,r=.5*(o-i)+i}return r},t.prototype.solve=function(t){return this.sampleCurveY(this.solveCurveX(t))},t}();var SpringRK4Animator,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};SpringRK4Animator=function(t){function e(){return this.finished=__bind(this.finished,this),e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.setup=function(t){return this.options=Utils.defaults(t,{tension:250,friction:25,velocity:0,tolerance:1e-4,time:null}),this._time=0,this._value=0,this._velocity=this.options.velocity,this._stopSpring=!1,this._integrator=new Integrator(function(t){return function(e){return-t.options.tension*e.x-t.options.friction*e.v}}(this))},e.prototype.next=function(t){var e,n,i,o,r,s,a;return this.finished()?1:(this._time+=t,a={},s={},a.x=this._value-1,a.v=this._velocity,s=this._integrator.integrateState(a,t),this._value=1+s.x,e=s.v,i=s.x,n=s.v,o=Math.abs(i)<this.options.tolerance,r=Math.abs(n)<this.options.tolerance,this._stopSpring=o&&r,this._velocity=e,this._value)},e.prototype.finished=function(){return this._stopSpring},e}(Animator);var SpringDHOAnimator,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};SpringDHOAnimator=function(t){function e(){return this.finished=__bind(this.finished,this),e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.setup=function(t){return this.options=Utils.defaults(t,{velocity:0,tolerance:1e-4,stiffness:50,damping:2,mass:.2,time:null}),this._time=0,this._value=0,this._velocity=this.options.velocity},e.prototype.next=function(t){var e,n,i,o;return this.finished()?1:(this._time+=t,o=0-this.options.stiffness,i=0-this.options.damping,n=o*(this._value-1),e=i*this._velocity,this._velocity+=(n+e)/this.options.mass*t,this._value+=this._velocity*t,this._value)},e.prototype.finished=function(){return this._time>0&&Math.abs(this._velocity)<this.options.tolerance},e}(Animator);var Animation,AnimatorClassBezierPresets,AnimatorClasses,evaluateRelativeProperty,isRelativeProperty,numberRE,relativePropertyRE,__slice=[].slice,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},__indexOf=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};AnimatorClasses={linear:LinearAnimator,"bezier-curve":BezierCurveAnimator,"spring-rk4":SpringRK4Animator,"spring-dho":SpringDHOAnimator},AnimatorClasses.spring=AnimatorClasses["spring-rk4"],AnimatorClasses["cubic-bezier"]=AnimatorClasses["bezier-curve"],AnimatorClassBezierPresets=["ease","ease-in","easein","ease-out","easeout","ease-in-out","easeinout"],numberRE=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/,relativePropertyRE=new RegExp("^(?:([+-])=|)("+numberRE.source+")([a-z%]*)$","i"),isRelativeProperty=function(t){return Utils.isString(t)&&relativePropertyRE.test(t)},evaluateRelativeProperty=function(t,e,n){var i,o,r,s,a,u;return u=relativePropertyRE.exec(n),i=u[0],s=u[1],o=u[2],a=u[3],r=5<=u.length?__slice.call(u,4):[],s?t[e]+(s+1)*o:+o},Animation=function(t){function e(t){var n;null==t&&(t={}),this._updateColorValue=__bind(this._updateColorValue,this),this._updateNumberValue=__bind(this._updateNumberValue,this),this._updateValues=__bind(this._updateValues,this),this._update=__bind(this._update,this),this._start=__bind(this._start,this),this.start=__bind(this.start,this),t.props&&(t.properties=t.props),t.duration&&(t.time=t.duration),t=Defaults.get("Animation",t),e.__super__.constructor.call(this,t),this.options=Utils.clone(Utils.defaults(t,{view:null,properties:{},curve:"linear",curveOptions:{},time:.3,repeat:0,delay:0,debug:!1,colorModel:"husl"})),n=!1,void 0!==t.then&&(n=t.then),void 0!==t.finish&&(n=t.finish),void 0!==t.done&&(n=t.done),void 0!==t.end&&(n=t.end),void 0!==t.finished&&(n=t.finished),n&&this.on(Event.AnimationEnd,function(){var t;try{return n()}catch(e){return t=e,console.error(t.toString())}}),t.origin&&console.warn("Animation.origin: please use view.originX and view.originY"),this.options.properties=e.filterAnimatableProperties(this.options.properties),this._parseAnimatorOptions(),this._originalState=this._currentState(),this._repeatCounter=this.options.repeat}return __extends(e,t),e.define("isAnimating",{get:function(){return __indexOf.call(this.options.view.context.animations,this)>=0}}),e.prototype.start=function(){var t,e,n,i,o,r,s,a;null===this.options.view&&console.error("Animation: missing view"),t=this._animatorClass(),this.options.debug&&(console.log("Animation.duration "+this.options.time),console.log("Animation.start "+t.name,this.options.curveOptions)),this._animator=new t(this.options.curveOptions),this._target=this.options.view,this._stateA=this._currentState(),this._stateB={},r=this.options.properties;for(n in r)o=r[n],Utils.isFunction(o)?o=o(this.options.view,n):isRelativeProperty(o)&&(o=evaluateRelativeProperty(this._target,n,o)),this._stateA[n]!==o&&(this._stateB[n]=o);if(0===Utils.keys(this._stateA).length)return console.warn("Animation: nothing to animate, no animatable properties"),!1;if(Utils.isEqual(this._stateA,this._stateB))return console.warn("Animation: nothing to animate, all properties are equal to what it is now"),!1;s=this._target.animatingProperties();for(i in s)e=s[i],this._stateA.hasOwnProperty(i)&&e.stop(),"x"===i&&(this._stateA.hasOwnProperty("minX")||this._stateA.hasOwnProperty("midX")||this._stateA.hasOwnProperty("maxX"))&&e.stop(),"y"===i&&(this._stateA.hasOwnProperty("minY")||this._stateA.hasOwnProperty("midY")||this._stateA.hasOwnProperty("maxY"))&&e.stop();if(this.options.debug){console.log("Animation.start"),a=this._stateB;for(n in a)o=a[n],console.log("\t"+n+": "+this._stateA[n]+" -> "+this._stateB[n])}return this._repeatCounter>0&&this.once("end",function(t){return function(){var e;e=t._stateA;for(n in e)o=e[n],t._target[n]=o;return t._repeatCounter--,t.start()}}(this)),this.options.delay?Utils.delay(this.options.delay,this._start):this._start(),!0},e.prototype.stop=function(t){return null==t&&(t=!0),this.options.view.context.removeAnimation(this),t&&this.emit("stop"),App.Loop.off("update",this._update)},e.prototype.reverse=function(){var t,n;return n=Utils.clone(this.options),n.properties=this._originalState,t=new e(n)},e.prototype.copy=function(){return new e(Utils.clone(this.options))},e.prototype.revert=function(){return this.reverse()},e.prototype.inverse=function(){return this.reverse()},e.prototype.invert=function(){return this.reverse()},e.prototype.emit=function(t){return e.__super__.emit.apply(this,arguments),this.options.view.emit(t,this)},e.prototype.animatingProperties=function(){return Utils.keys(this._stateA)},e.prototype._start=function(){var t,e,n,i;this.options.view.context.addAnimation(this),this.emit("start"),App.Loop.on("update",this._update),this._valueUpdaters={},n=this._stateB,i=[];for(t in n)e=n[t],Color.isColorObject(e)||Color.isColorObject(this._stateA[t])?i.push(this._valueUpdaters[t]=this._updateColorValue):i.push(this._valueUpdaters[t]=this._updateNumberValue);return i},e.prototype._update=function(t){var e;return this._animator.finished()?(this._updateValues(1),this.stop(e=!1),this.emit("end"),this.emit("stop")):this._updateValues(this._animator.next(t))},e.prototype._updateValues=function(t){var e,n,i;i=this._stateB;for(e in i)n=i[e],this._valueUpdaters[e](e,t);return null},e.prototype._updateNumberValue=function(t,e){return this._target[t]=Utils.mapRange(e,0,1,this._stateA[t],this._stateB[t])},e.prototype._updateColorValue=function(t,e){return this._target[t]=Color.mix(this._stateA[t],this._stateB[t],e,!1,this.options.colorModel)},e.prototype._currentState=function(){return Utils.pick(this.options.view,Utils.keys(this.options.properties))},e.prototype._animatorClass=function(){var t,e;return e=Utils.parseFunction(this.options.curve),t=e.name.toLowerCase(),AnimatorClasses.hasOwnProperty(t)?AnimatorClasses[t]:__indexOf.call(AnimatorClassBezierPresets,t)>=0?BezierCurveAnimator:LinearAnimator},e.prototype._parseAnimatorOptions=function(){var t,e,n,i,o,r,s,a,u,h,p,l,c;if(t=this._animatorClass(),o=Utils.parseFunction(this.options.curve),e=o.name.toLowerCase(),t!==LinearAnimator&&t!==BezierCurveAnimator||((Utils.isString(this.options.curveOptions)||Utils.isArray(this.options.curveOptions))&&(this.options.curveOptions={values:this.options.curveOptions}),this.options.curveOptions.time=this.options.time),t===BezierCurveAnimator&&__indexOf.call(AnimatorClassBezierPresets,e)>=0&&(this.options.curveOptions.values=e,this.options.curveOptions.time=this.options.time),o.args.length){if(t===BezierCurveAnimator&&(this.options.curveOptions.values=o.args.map(function(t){return parseFloat(t)||0})),t===SpringRK4Animator)for(p=["tension","friction","velocity","tolerance"],n=s=0,u=p.length;s<u;n=++s)i=p[n],r=parseFloat(o.args[n]),r&&(this.options.curveOptions[i]=r);if(t===SpringDHOAnimator){for(l=["stiffness","damping","mass","tolerance"],c=[],n=a=0,h=l.length;a<h;n=++a)i=l[n],r=parseFloat(o.args[n]),r?c.push(this.options.curveOptions[i]=r):c.push(void 0);return c}}},e.filterAnimatableProperties=function(t){var e,n,i;e={};for(n in t)i=t[n],Utils.isNumber(i)||Utils.isFunction(i)||isRelativeProperty(i)||Color.isColorObject(i)||null===i?e[n]=i:Utils.isString(i)&&Color.isColorString(i)&&(e[n]=new Color(i));return e},e.prototype.toInspect=function(){return"<Animation id:"+this.id+" isAnimating:"+this.isAnimating+" ["+Utils.keys(this.options.properties)+"]>"},e.prototype.onAnimationStart=function(t){return this.on(Event.AnimationStart,t)},e.prototype.onAnimationStop=function(t){return this.on(Event.AnimationStop,t)},e.prototype.onAnimationEnd=function(t){return this.on(Event.AnimationEnd,t)},e.prototype.onAnimationDidStart=function(t){return this.on(Event.AnimationDidStart,t)},e.prototype.onAnimationDidStop=function(t){return this.on(Event.AnimationDidStop,t)},e.prototype.onAnimationDidEnd=function(t){return this.on(Event.AnimationDidEnd,t)},e}(Element);var Integrator;Integrator=function(){function t(t){this._accelerationForState=t,Utils.isFunction(this._accelerationForState)||(console.warn("Integrator: an integrator must be constructed with an acceleration function"),this._accelerationForState=function(){return 0})}return t.prototype.integrateState=function(t,e){var n,i,o,r,s,a;return n=this._evaluateState(t),i=this._evaluateStateWithDerivative(t,.5*e,n),o=this._evaluateStateWithDerivative(t,.5*e,i),r=this._evaluateStateWithDerivative(t,e,o),a=1/6*(n.dx+2*(i.dx+o.dx)+r.dx),s=1/6*(n.dv+2*(i.dv+o.dv)+r.dv),t.x=t.x+a*e,t.v=t.v+s*e,t},t.prototype._evaluateState=function(t){var e;return e={},e.dx=t.v,e.dv=this._accelerationForState(t),e},t.prototype._evaluateStateWithDerivative=function(t,e,n){var i,o;return o={},o.x=t.x+n.dx*e,o.v=t.v+n.dv*e,i={},i.dx=o.v,i.dv=this._accelerationForState(o),i},t}();var AnimationLoop,AnimatorClassBezierPresets,AnimatorClasses,getTime,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};getTime=function(){return 1e3*Utils.getTime()},AnimationLoop=function(t){function e(){this.start=__bind(this.start,this),this.delta=1/60,this.raf=!0,Utils.webkitVersion()>600&&Utils.webkitVersion()<601&&Utils.isDesktop()&&(this.raf=!1),this.maximumListeners=1/0}return __extends(e,t),e.prototype.start=function(){var t,e,n,i;return t=this,i=getTime(),n=function(){var e,n;return t.delta?e=t.delta:(n=getTime(),e=(n-i)/1e3,i=n),t.emit("update",e),t.emit("render",e)},(e=function(i){return t.raf?(n(),window.requestAnimationFrame(e)):window.setTimeout(function(){return n(),window.requestAnimationFrame(e)},0)})()},e}(EventEmitter),AnimatorClasses={linear:LinearAnimator,"bezier-curve":BezierCurveAnimator,"spring-rk4":SpringRK4Animator,spring:SpringRK4Animator,"spring-dho":SpringDHOAnimator},AnimatorClassBezierPresets=["ease","ease-in","ease-out","ease-in-out"];var Simulator,__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Simulator=function(t){function e(t){null==t&&(t={}),this._state={x:0,v:0},this.options=null,this.setup(t)}return __extends(e,t),e.define("state",{get:function(){return Utils.clone(this._state)},set:function(t){return this._state=Utils.clone(t)}}),e.prototype.setup=function(t){throw Error("Not implemented")},e.prototype.next=function(t){throw Error("Not implemented")},e.prototype.finished=function(){throw Error("Not implemented")},e}(Element);var FrictionSimulator,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};FrictionSimulator=function(t){function e(){return this.finished=__bind(this.finished,this),e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.setup=function(t){return this.options=Defaults.get("FrictionSimulator",t),this.options=Utils.defaults(t,{velocity:0,position:0}),this._state={x:this.options.position,v:this.options.velocity},this._integrator=new Integrator(function(t){return function(e){return-(t.options.friction*e.v)}}(this))},e.prototype.next=function(t){return this._state=this._integrator.integrateState(this._state,t),this._state},e.prototype.finished=function(){return Math.abs(this._state.v)<this.options.tolerance},e}(Simulator);var SpringSimulator,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};SpringSimulator=function(t){function e(){return this.finished=__bind(this.finished,this),e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.setup=function(t){return this.options=Defaults.get("SpringSimulator",t),this.options=Utils.defaults(t,{velocity:0,position:0,offset:0}),this._state={x:this.options.position,v:this.options.velocity},this._integrator=new Integrator(function(t){return function(e){return-t.options.tension*e.x-t.options.friction*e.v}}(this))},e.prototype.next=function(t){return this._state=this._integrator.integrateState(this._state,t),this.getState()},e.prototype.finished=function(){var t,e;return t=Math.abs(this._state.x)<this.options.tolerance,e=Math.abs(this._state.v)<this.options.tolerance,t&&e},e.prototype.setState=function(t){return this._state={x:t.x-this.options.offset,v:t.v}},e.prototype.getState=function(){var t;return t={x:this._state.x+this.options.offset,v:this._state.v}},e}(Simulator);var MomentumBounceSimulator,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};MomentumBounceSimulator=function(t){function e(){return this.finished=__bind(this.finished,this),e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.setup=function(t){return this.options=Defaults.get("MomentumBounceSimulator",t),this.options=Utils.defaults(t,{velocity:0,position:0,min:0,max:0}),this._frictionSimulator=new FrictionSimulator({
friction:this.options.momentum.friction,tolerance:this.options.momentum.tolerance,velocity:this.options.velocity,position:this.options.position}),this._springSimulator=new SpringSimulator({tension:this.options.bounce.tension,friction:this.options.bounce.friction,tolerance:this.options.bounce.tolerance,velocity:this.options.velocity,position:this.options.position}),this._state={x:this.options.position,v:this.options.velocity},this._useSpring=!1},e.prototype.next=function(t){return this._useSpring?this._state=this._springSimulator.next(t):(this._state=this._frictionSimulator.next(t),this._tryTransitionToSpring(this._state)),this._state},e.prototype.finished=function(){return this._useSpring?this._springSimulator.finished():this._frictionSimulator.finished()},e.prototype.setState=function(t){var e;return this._state={x:t.x,v:t.v},this._frictionSimulator.setState(this._state),this._isValidState()?this._tryTransitionToSpring():(this._state.x<=this.options.min&&(e=this.options.min),this._state.x>=this.options.max&&(e=this.options.max),this._transitionToSpring(e))},e.prototype._tryTransitionToSpring=function(t){var e,n,i;return n=this._state.x<this.options.min&&this._state.v<=0,e=this._state.x>this.options.max&&this._state.v>=0,n||e?(n&&(i=this.options.min),e&&(i=this.options.max),this._transitionToSpring(i)):this._useSpring=!1},e.prototype._transitionToSpring=function(t){return this._useSpring=!0,this._springSimulator.options.offset=t,this._springSimulator.setState(this._state)},e.prototype._isValidState=function(){var t,e,n,i,o,r;return e=this._state.x<this.options.min&&this._state.v>0,t=this._state.x>this.options.max&&this._state.v<0,i=!1,e?(n=this.options.min,i=!0):t&&(n=this.options.max,i=!0),!i||(o=this._frictionSimulator.options.friction,r=1-o*(n-this._state.x)/this._state.v,r>0)},e}(Simulator);var Simulation,SimulatorClasses,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},__indexOf=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};Event.SimulationStart="simulationStart",Event.SimulationStep="simulationStep",Event.SimulationStop="simulationStop",SimulatorClasses={spring:SpringSimulator,friction:FrictionSimulator,"inertial-scroll":MomentumBounceSimulator},Simulation=function(t){function e(t){var n;null==t&&(t={}),this._update=__bind(this._update,this),this._start=__bind(this._start,this),this.start=__bind(this.start,this),e.__super__.constructor.call(this,t),this.options=Utils.defaults(t,{view:null,properties:{},model:"spring",modelOptions:{},delay:0,debug:!1}),this._running=!1,n=SimulatorClasses[this.options.model]||SpringSimulator,this._simulator=new n(this.options.modelOptions)}return __extends(e,t),e.prototype.animatingProperties=function(){return Utils.keys(this.options.properties)},e.prototype.start=function(){var t,e,n,i;null===this.options.view&&console.error("Simulation: missing view"),this.options.debug&&console.log("Simulation.start "+this._simulator.constructor.name,this.options.modelOptions),t=this.animatingProperties(),i=this.options.view.animatingProperties();for(n in i)e=i[n],__indexOf.call(t,n)>=0&&e.stop();return this.options.delay?Utils.delay(this.options.delay,this._start):this._start(),!0},e.prototype.stop=function(t){if(null==t&&(t=!0),this._running)return this._running=!1,this.options.view.context.removeAnimation(this),t&&this.emit(Event.SimulationStop),App.Loop.off("update",this._update)},e.prototype.emit=function(t){return e.__super__.emit.apply(this,arguments),this.options.view.emit(t,this)},e.prototype._start=function(){if(!this._running)return this._running=!0,this.options.view.context.addAnimation(this),this.emit(Event.SimulationStart),App.Loop.on("update",this._update)},e.prototype._update=function(t){var e,n;return this._simulator.finished()?(this.stop(e=!1),this.emit("end"),this.emit(Event.SimulationStop)):(n=this._simulator.next(t),this.emit(Event.SimulationStep,n,t))},e.define("simulator",{get:function(){return this._simulator}}),e.prototype.finished=function(){return this._simulator.finished()},e}(Element);var FileReader,__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};FileReader=function(t){function e(t){var e;return window.FileReader?(this.reader=new window.FileReader,e=this,t===NULL&&(t={}),this.addReaderEvents(),void(t.arrayBuffer?this.arrayBuffer=t.arrayBuffer:t.binary?this.binary=t.binary:t.base64?this.base64=t.base64:t.text&&(this.text=t.text))):(properties.unsupported&&properties.unsupported(),this.emit(Event.Unsupported),!1)}return __extends(e,t),e.prototype._kind="FileReader",e.prototype.abort=function(t){this.reader!==NULL&&this.reader.abort()},e.prototype.addReaderEvents=function(){return this.reader.addEventListener("loadstart",function(t){if(that.emit(Event.LoadStart,t),parameters.start)return parameters.start(t)},!1),this.reader.addEventListener("loadend",function(t){if(that.emit(Event.LoadEnd,t),parameters.end)return parameters.end(t)},!1),this.reader.addEventListener("progress",function(t){if(that.emit(Event.Progress,t),parameters.progress)return parameters.progress(t)},!1),this.reader.addEventListener("load",function(){if(that.emit(Event.Load,that.reader.result),parameters.then)return parameters.then(that.reader.result)},!1),this.reader.addEventListener("error",function(){if(that.emit(Event.Error,that.reader.error),parameters.error)return parameters.error(that.reader.error)},!1),this.reader.addEventListener("abort",function(t){if(that.emit(Event.Abort,t),parameters.abort)return parameters.abort(t)},!1)},e.define("arrayBuffer",{get:function(){return this._arrayBuffer},set:function(t){this._arrayBuffer=t,this.reader.readAsArrayBuffer(t)}}),e.define("binary",{get:function(){return this._binary},set:function(t){this._binary=t,this.reader.readAsBinaryString(t)}}),e.define("base64",{get:function(){return this._base64},set:function(t){this._base64=t,this.reader.readAsDataURL(t)}}),e.define("text",{get:function(){return this._text},set:function(t){this._text=t,this.reader.readAsText(t)}}),e.prototype.onUnsupported=function(t){return this.on(Event.Unsupported,t)},e.prototype.onLoadStart=function(t){return this.on(Event.LoadStart,t)},e.prototype.onLoadEnd=function(t){return this.on(Event.LoadEnd,t)},e.prototype.onProgress=function(t){return this.on(Event.Progress,t)},e.prototype.onLoad=function(t){return this.on(Event.Load,t)},e.prototype.onLoaded=function(t){return this.on(Event.Load,t)},e.prototype.onDone=function(t){return this.on(Event.Loaded,t)},e.prototype.onAbort=function(t){return this.on(Event.Abort,t)},e.prototype.onQuit=function(t){return this.on(Event.Quit,t)},e}(Element);var Location,__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Location=function(t){function e(t){return t||(t={}),navigator.geolocation?(t.current&&(t.success=t.current,this.current(t)),t.watch&&(t.success=t.watch,this.watch(t)),!0):(t.unsupported&&t.unsupported(),this.emit(Event.Unsupported),!1)}return __extends(e,t),e.prototype._kind="Location",e.prototype.current=function(t){var e,n;Utils.isBoolean(t)&&(e=t,t={}),n=this,t||(t={}),t.accurate===NULL&&(t.accurate=!1),e&&(t.accurate=e),navigator.geolocation.getCurrentPosition(function(e){e.coords.timestamp=e.timestamp,n.emit(Event.Success,e.coords),t.success&&t.success(e.coords)},function(e){n.emit(Event.Error,e),t.error&&t.error(e)},{enableHighAccuracy:t.accurate})},e.prototype.watch=function(t){var e,n;Utils.isBoolean(t)&&(e=t,t={}),t||(t={}),n=this,t||(t={}),t.accurate===NULL&&(t.accurate=!1),e&&(t.accurate=e),this.watch=navigator.geolocation.watchPosition(function(e){e.coords.timestamp=e.timestamp,n.emit(Event.Success,e.coords),t.success&&t.success(e.coords)},function(e){n.emit(Event.Error,e),t.error&&t.error(e)},{enableHighAccuracy:t.accurate})},e.prototype.clear=function(){this.watch&&(this.emit(Event.Clear),navigator.geolocation.clearWatch(this.watch))},e.prototype.onUnsupported=function(t){this.on(Event.Unsupported,t)},e.prototype.onSuccess=function(t){this.on(Event.Success,t)},e.prototype.onError=function(t){this.on(Event.Error,t)},e.prototype.onClear=function(t){this.on(Event.Clear,t)},e}(Element);var Thread,__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Thread=function(t){function e(t){return t===NULL&&(t={}),window.Worker?Utils.isFunction(t)?void(this.process=t):t.process?void(this.process=t.process):t.receive?void(this.onReceive=t.receive):void 0:(t.unsupported&&t.unsupported(),this.emit(Event.Unsupported),!1)}return __extends(e,t),e.prototype._kind="Thread",e.define("process",{get:function(){return this._process},set:function(t){var e,n,i;return n=this,window.send=window.postMessage,window.URL=window.URL||window.webkitURL,e=t.toString().match(/function[^{]+\{([\s\S]*)\}$/)[1],i=new Blob(["self.send = postMessage;\n"+e],{type:"text/javascript"}),this.worker&&this.end(),this.worker=new Worker(window.URL.createObjectURL(i)),this.worker.addEventListener("message",function(t){return n.emit(Event.Receive,t)},!1),this.worker.addEventListener(Event.Error,function(t){return n.emit(Event.Error,t)},!1)}}),e.prototype.send=function(t){this.worker!==NULL&&(this.worker.postMessage(t),this.emit(Event.Send,t))},e.prototype.end=function(){this.worker!==NULL&&(this.worker.terminate(),delete this.worker,this.worker=NULL,this.emit(Event.End))},e.prototype.stop=function(){this.end()},e.prototype.terminate=function(){this.terminate()},e.prototype.onUnsupported=function(t){this.on(Event.Unsupported,t)},e.prototype.onReceive=function(t){this.on(Event.Receive,t)},e.prototype.onSend=function(t){this.on(Event.Send,t)},e.prototype.onEnd=function(t){this.on(Event.End,t)},e.prototype.onStop=function(t){this.on(Event.End,t)},e.prototype.onTerminate=function(t){this.on(Event.End,t)},e.prototype.onError=function(t){this.on(Event.Error,t)},e}(Element);var Notification,__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};window.Notification&&(window._Notification=window.Notification),Notification=function(t){function e(t){var e,n;if(t||(t={}),!window._Notification)return t.unsupported&&t.unsupported(),this.emit(Event.Unsupported),!1;if(n=this,e={},t.title&&(t.title=""),t.text&&(t.body=t.text),t.content&&(t.body=t.content),t.body&&(e.body=t.body),t.icon&&(e.icon=Utils.parseAsset(t.icon)),t.vibrate!==NULL&&(e.vibrate=t.vibrate),t.silent!==NULL&&(e.silent=t.silent),"granted"===window._Notification.permission)this._displayNotification();else{if("denied"!==window._Notification.permission)return void window._Notification.requestPermission(function(t){return"granted"===t?(n.emit(Event.Granted,t),this._displayNotification()):n.emit(Event.Denied,t)});t.denied&&t.denied(),n.emit(Event.Denied)}return!0}return __extends(e,t),e.prototype._kind="Notification",e.prototype.close=function(t){this._notification&&this._notification.close()},e.prototype.requestPermission=function(t){var e;return e===NULL&&(e={}),window._Notification.requestPermission(function(e){return"granted"!==e?(t.denied&&t.denied(e),void this.emit(Event.Denied,e)):(t.granted&&t.granted(e),void this.emit(Event.Granted,e))})},e.prototype.isGranted=function(){return"granted"===window._Notification.permission},e.prototype.onUnsupported=function(t){this.on(Event.Unsupported,t)},e.prototype.onGranted=function(t){this.on(Event.Granted,t)},e.prototype.onDenied=function(t){this.on(Event.Denied,t)},e.prototype.onError=function(t){this.on(Event.Error,t)},e.prototype.onClick=function(t){this.on(Event.onClick,t)},e.prototype.onShow=function(t){this.on(Event.Show,t)},e.prototype.onClose=function(t){this.on(Event.Close,t)},e.prototype._displayNotification=function(){this._notification=new window._Notification(properties.title,options),this._notification.addEventListener("close",function(){properties.close&&properties.close(),that.emit(Event.Close)}),this._notification.addEventListener("show",function(){properties.show&&properties.show(),that.emit(Event.Show)}),this._notification.addEventListener("click",function(){properties.click&&properties.click(),that.emit(Event.Click)}),this._notification.addEventListener("error",function(){properties.error&&properties.error(),that.emit(Event.Error)})},e}(Element);var App,Title,kw,res,url,_i,_len,_ref;for(App=window,App._kind="App",App._ee=new EventEmitter,App._pages_counter=0,App._keywords=["center","left","right","top","bottom","auto","inline-block","inline","block","none","fit","fitCenter","fill","fillWidth","fillHeight","fillHeightCenter","text","pointer","progress","move","help","grabbing","grab","default","crosshair","copy","col-resize","e-resize","normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","vertical","horizontal"],_ref=App._keywords,_i=0,_len=_ref.length;_i<_len;_i++)kw=_ref[_i],App[res=kw.replace(/(-)\w/gi,function(t){return t.slice(1).toUpperCase()})]=kw;App._responsives={},window.__IS_DIRECT_PATH=!1,window.__ID&&8===window.__ID.length&&(url=App.location.pathname.split("/"),url.shift(),url[0]===window.__ID&&(window.__IS_DIRECT_PATH=!0)),Title=function(t){return App.title=t},App.define=function(t,e){return Object.defineProperty(this,t,e)},App.emit=function(t,e){if(this._wrapper)return this._wrapper.emit(t,e)},App.once=function(t,e){if(this._wrapper)return this._wrapper.once(t,e)},App.on=function(t,e){if(this._wrapper)return this._wrapper.on(t,e)},App.off=function(t,e){if(this._wrapper)return this._wrapper.off(t,e)},App.reset=function(){var t,e,n,i,o;for(this.id=Utils.randomID(),this.element=NULL,this._routes={},this._page=null,this.pages=[],this._responsives={},this._fonts=[],this._fontsCollection=[],this.DefaultContext?(this._wrapper&&this._wrapper.destroy(!0),this.CurrentContext.reset()):(this.DefaultContext=new Context({name:"Default",backgroundColor:white}),this.CurrentContext=this.DefaultContext),e=[Event.Abort,Event.Quit,Event.Error,Event.HashChange,Event.Load,Event.Resize,Event.Scroll,Event.Show,Event.Close,Event.Blur,Event.Focus,Event.HistoryChanged],o=[],n=0,i=e.length;n<i;n++)t=e[n],o.push(Event.wrap(window).addEventListener(t,function(t){this.emit(t.type,t)}));return o},App.running=!1,App.run=function(t){var e;App.running=!1,e=function(e){this.reset(),Defaults.setup(),this._element=document.createElement("div"),this._element.setAttribute("id","MagiXApp::"+App.id),this._element.style.background="white",this._element.style.width="100%",this._element.style.height="100%",this._element.style.position="fixed",this._element.style.top="0",this._element.style.left="0",this._element.style.right="0",this._element.style.bottom="0",this._element.style.webkitFontSmoothing="antialiased",this.CurrentContext._element.appendChild(this._element),this._wrapper=new View({width:"100%",height:"100%"}),this._element.appendChild(this._wrapper._element),this._wrapper._element.setAttribute("id","MagiXWrapper::"+this._wrapper.id),App.on(Event.HistoryChanged,function(t){if(t.state)return Routes.routing()}),Utils.isSafari()&&history.replaceState({},""),App._updateResponsivesStates(),App.onResize(function(){return App._updateResponsivesStates()}),t&&(App.running=!0,this.emit(Event.Run),t())},__domReady?e():Utils.domComplete(e)},App.setup=function(){this.GestureInputRecognizer=new GestureRecognizer,this.Loop=new AnimationLoop,Utils.domComplete(this.Loop.start),this.define("selected",{configurable:!0,get:function(){return this.getSelection().toString()}}),this.define("page",{configurable:!0,get:function(){return App._page},set:function(t){t!==App._page&&(App._page&&(App.removePage(App._page),App._page=null),this.addPage(t))}}),this.define("pages",{configurable:!0,get:function(){return App._wrapper.children}}),this.define("title",{configurable:!0,get:function(){return document.title},set:function(t){document.title=t}}),this.define("fontName",{configurable:!0,get:function(){return this._element.style.fontFamily},set:function(t){this._element.style.fontFamily=t+", sans-serif"}}),this.define("fontFamily",{configurable:!0,get:function(){return this.fontName},set:function(t){this.fontName=t}}),this.define("fontWeight",{configurable:!0,get:function(){return this._element.style.fontWeight},set:function(t){this._element.style.fontFamily=t}}),this.define("fontSize",{configurable:!0,get:function(){return this._element.style.fontSize},set:function(t){this._element.style.fontSize=t}}),this.define("textColor",{configurable:!0,get:function(){return this._element.style.color},set:function(t){this._element.style.color=t}}),this.define("width",{configurable:!0,get:function(){return this.innerWidth}}),this.define("height",{configurable:!0,get:function(){return this.innerHeight}}),this.define("size",{configurable:!0,get:function(){return{width:this.width,height:this.height}}}),this.define("frame",{configurable:!0,get:function(){return{x:0,y:0,width:this.width,height:this.height}}}),this.go=function(t,e){"main"!==t&&"index"!==t||(t=""),Utils.startsWith(t,"/")||(t="/"+t),window.USE_URL&&(window.USE_URL=t),e!==!0&&(t=Utils.parseURL(t)),history.pushState?history.pushState({},null,t):log("App: your browser does not support the HTML5 pushState method."),Routes.routing()},this.updateURL=function(t,e){"main"!==t&&"index"!==t||(t=""),Utils.startsWith(t,"/")||(t="/"+t),window.USE_URL&&(window.USE_URL=t),e!==!0&&(t=Utils.parseURL(t)),history.pushState?history.pushState({},null,t):log("App: your browser does not support the HTML5 pushState method.")},this.pathname=function(){var t;return t=void 0,t=App.USE_URL?App.USE_URL.split("/"):App.location.pathname.split("/"),t.shift(),window.__IS_DIRECT_PATH?(t.shift(),0===t.length&&t.push("")):void 0!==App.USE_PROJECT_PATH&&(t.shift(),t.shift(),0===t.length&&t.push("")),t},this.parameters=function(){var t,e;return t=window.location.search.substr(1),e={},t.split("&").forEach(function(t){var n;n=t.split("="),""!==n[0]&&(e[n[0]]=decodeURIComponent(n[1]))}),e},this.hash=function(){return location.hash.replace("#","")},this.addPage=function(t){var e,n,i,o;for(App._responsives={},o=App._wrapper.children,n=0,i=o.length;n<i;n++)e=o[n],e._kind&&"Page"===e._kind&&(e.parent=null);if(App._page&&(App._page.parent=null),t._kind&&"Page"===t._kind)return App._page=t,App._page.parent=this},this.removePage=function(t){return t.parent=null},this.enterFullscreen=function(){return!!this.page&&this.page.enterFullscreen()},this.exitFullscreen=function(){return!!this.page&&this.page.exitFullscreen()},this.isFullscreen=function(){return!!this.page&&this.page.isFullscreen()},this.inWebView=function(){var t;try{return window.self!==window.top}catch(e){return t=e,!0}},this.isOnline=function(){return navigator.onLine},this.isOffline=function(){return!navigator.onLine},this.vibrate=function(t){return!!navigator.vibrate&&void window.navigator.vibrate(t)}},App.battery=!1,navigator.getBattery&&navigator.getBattery().then(function(t){App.battery=t,t.addEventListener("chargingchange",function(){App.emit("change:batteryCharging",t.charging)}),t.addEventListener("levelchange",function(){App.emit("change:batteryLevel",t.level)}),t.addEventListener("chargingtimechange",function(){App.emit("change:chargingTime",t.chargingTime)}),t.addEventListener("dischargingtimechange",function(){App.emit("change:dischargingTime",t.dischargingTime)})}),App.toInspect=function(t){return function(){return"<App id:"+(t.id||null)+">"}}(this),App.setup(),App.onFocus=function(t){this.on(Event.Focus,t)},App.onResignFocus=function(t){this.on(Event.Blur,t)},App.onBlur=function(t){this.on(Event.Blur,t)},App.onResize=function(t){this.on(Event.Resize,t)},App.onAbort=function(t){this.on(Event.Abort,t)},App.onQuit=function(t){this.on(Event.Quit,t)},App.onHashChange=function(t){this.on(Event.HashChange,t)},App.onLoad=function(t){this.on(Event.Load,t)},App.onLoaded=function(t){this.on(Event.Load,t)},App.onDone=function(t){this.on(Event.Loaded,t)},App.onShow=function(t){this.on(Event.Show,t)},App.onClose=function(t){this.on(Event.Close,t)},App.onClick=function(t){this.on(Event.Click,t)},App.onDoubleClick=function(t){this.on(Event.DoubleClick,t)},App.onIn=function(t){this.on(Event.In,t)},App.onOut=function(t){this.on(Event.Out,t)},App.onDown=function(t){this.on(Event.Down,t)},App.onOver=function(t){this.on(Event.Over,t)},App.onUp=function(t){this.on(Event.Up,t)},App.onMove=function(t){this.on(Event.Move,t)},App.onRightClick=function(t){this.on(Event.RightClick,t)},App.onMouseIn=function(t){this.on(Event.MouseIn,t)},App.onMouseUp=function(t){this.on(Event.MouseUp,t)},App.onMouseDown=function(t){this.on(Event.MouseDown,t)},App.onMouseOver=function(t){this.on(Event.MouseOver,t)},App.onMouseOut=function(t){this.on(Event.MouseOut,t)},App.onMouseMove=function(t){this.on(Event.MouseMove,t)},App.onMouseWheel=function(t){this.on(Event.MouseWheel,t)},App.onScroll=function(t){this.on(Event.Scroll,t)},App.onTouchStart=function(t){this.on(Event.TouchStart,t)},App.onTouchEnd=function(t){this.on(Event.TouchEnd,t)},App.onTouchMove=function(t){this.on(Event.TouchMove,t)},App.onTap=function(t){this.on(Event.Tap,t)},App.onTapStart=function(t){this.on(Event.TapStart,t)},App.onTapEnd=function(t){this.on(Event.TapEnd,t)},App.onDoubleTap=function(t){this.on(Event.DoubleTap,t)},App.onForceTap=function(t){this.on(Event.ForceTap,t)},App.onForceTapChange=function(t){this.on(Event.ForceTapChange,t)},App.onForceTapStart=function(t){this.on(Event.ForceTapStart,t)},App.onForceTapEnd=function(t){this.on(Event.ForceTapEnd,t)},App.onLongPress=function(t){this.on(Event.LongPress,t)},App.onLongPressStart=function(t){this.on(Event.LongPressStart,t)},App.onLongPressEnd=function(t){this.on(Event.LongPressEnd,t)},App.onSwipe=function(t){this.on(Event.Swipe,t)},App.onSwipeStart=function(t){this.on(Event.SwipeStart,t)},App.onSwipeEnd=function(t){this.on(Event.SwipeEnd,t)},App.onSwipeUp=function(t){this.on(Event.SwipeUp,t)},App.onSwipeUpStart=function(t){this.on(Event.SwipeUpStart,t)},App.onSwipeUpEnd=function(t){this.on(Event.SwipeUpEnd,t)},App.onSwipeDown=function(t){this.on(Event.SwipeDown,t)},App.onSwipeDownStart=function(t){this.on(Event.SwipeDownStart,t)},App.onSwipeDownEnd=function(t){this.on(Event.SwipeDownEnd,t)},App.onSwipeLeft=function(t){this.on(Event.SwipeLeft,t)},App.onSwipeLeftStart=function(t){this.on(Event.SwipeLeftStart,t)},App.onSwipeLeftEnd=function(t){this.on(Event.SwipeLeftEnd,t)},App.onSwipeRight=function(t){this.on(Event.SwipeRight,t)},App.onSwipeRightStart=function(t){this.on(Event.SwipeRightStart,t)},App.onSwipeRightEnd=function(t){this.on(Event.SwipeRightEnd,t)},App.onPan=function(t){this.on(Event.Pan,t)},App.onPanStart=function(t){this.on(Event.PanStart,t)},App.onPanEnd=function(t){this.on(Event.PanEnd,t)},App.onPanLeft=function(t){this.on(Event.PanLeft,t)},App.onPanRight=function(t){this.on(Event.PanRight,t)},App.onPanUp=function(t){this.on(Event.PanUp,t)},App.onPanDown=function(t){this.on(Event.PanDown,t)},App.onScale=function(t){this.on(Event.Scale,t)},App.onScaleStart=function(t){this.on(Event.ScaleStart,t)},App.onScaleEnd=function(t){this.on(Event.ScaleEnd,t)},App.onRotate=function(t){this.on(Event.Rotate,t)},App.onRotateStart=function(t){this.on(Event.RotateStart,t)},App.onRotateEnd=function(t){this.on(Event.RotateEnd,t)},App.onImportProgress=function(t){this.on(Event.ImportProgress,t)},App.onImportEnd=function(t){this.on(Event.ImportEnd,t)},App.onPreloadProgress=function(t){this.on(Event.PreloadProgress,t)},App.onPreloadEnd=function(t){this.on(Event.PreloadEnd,t)},App.onKeyDown=function(t){this.on(Event.KeyDown,t)},App.onKeyPress=function(t){this.on(Event.KeyPress,t)},App.onKeyUp=function(t){this.on(Event.KeyUp,t)};var Font,Fonts;App._WebFontLoad=!1,App._WebFontLoaded=!1,App._fonts=[],App._fontsCollection=[],App.WebFontConfig={google:{families:[]}},App._googleFont=[],App._googleFontTmp=[],Font=function(){function t(t,e){return Utils.isString(t)&&(t={name:t}),Utils.isObject(t)&&Utils.isString(e)&&(t.weight=e),Fonts(t)}return t.prototype._kind="Font",t}(),Fonts=function(){var t;if(t=Utils.clone(App._googleFont),App._googleFont=[],Fonts._updateFonts(arguments),App._fontsCollection.length>0&&(App.fontName=App._fontsCollection[0].name),!Utils.isEqual(t,App._googleFont))return App._googleFont.length>0?App._WebFontLoad===!1?(App._WebFontLoad=!0,App.WebFontConfig.google.families=Utils.mergeArray(App.WebFontConfig.google.families,App._googleFont),Utils.domLoadScript(("https:"===document.location.protocol?"https":"http")+"://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js",function(){if(App._WebFontLoaded=!0,App._googleFontTmp.length)return App.WebFontConfig.google.families=App._googleFontTmp,App.WebFont.load(App.WebFontConfig)})):App._WebFontLoaded?(App.WebFontConfig.google.families=Utils.mergeArray(App.WebFontConfig.google.families,App._googleFont),App.WebFont.load(App.WebFontConfig)):App._googleFontTmp=Utils.mergeArray(App._googleFontTmp,App._googleFont):void 0},Fonts.getInstalled=function(){return App._fonts},Fonts._updateFonts=function(t){var e,n,i,o,r,s;if(r=function(t){return t.name?(t._name=t.name.split(" ").join("+"),t.weight||(t.weight="400"),t.sets||(t.sets="latin"),t._name+":"+t.weight+":"+t.sets):""},t)if(n=new Fonts._fontDetector,Utils.isString(t)&&(t=[t]),Utils.isObject(t)&&t.name){if(i=t.name.replace(/\s+/g,""),App._fonts[i]=t.name,App._fontsCollection.push(t),!n.detect(t.name))return App._googleFont.push(r(t))}else if(Utils.isArray(t)||Utils.isObject(t)){for(o=0,s=[];o<t.length;)"string"==typeof t[o]&&(i=t[o].replace(/\s+/g,""),e={name:t[o]},App._fonts[i]=t[o],App._fontsCollection.push(e),n.detect(t[o])||App._googleFont.push(r(e))),Utils.isObject(t[o])&&t[o].name&&(i=t[o].name.replace(/\s+/g,""),e=t[o],App._fonts[i]=t[o].name,App._fontsCollection.push(e),n.detect(t[o].name)||App._googleFont.push(r(t[o]))),s.push(o++);return s}},Fonts._fontDetector=function(){var t,e,n,i,o,r,s,a,u;t=["monospace","sans-serif","serif"],u="mmmmmmmmmmlli",a="72px",o=document.getElementsByTagName("body")[0],s=document.createElement("span"),i=function(i){var r,a,u;r=!1;for(a in t)s.style.fontFamily=i+","+t[a],o.appendChild(s),u=s.offsetWidth!==n[t[a]]||s.offsetHeight!==e[t[a]],o.removeChild(s),r=r||u;return r},s.style.fontSize=a,s.innerHTML=u,n={},e={};for(r in t)s.style.fontFamily=t[r],o.appendChild(s),n[t[r]]=s.offsetWidth,e[t[r]]=s.offsetHeight,o.removeChild(s);this.detect=i};var Routes,__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};App.Before=NULL,App._routes={},Routes=function(t){function e(t){if(!Utils.isObject(t))throw new Error("Routes: routes must be in an object.");App._routes=t,e.routing()}return __extends(e,t),e.prototype._kind="Routes",e.prototype.getAll=function(){return App._routes},e.add=function(t,n){if(n._kind&&"Page"===n._kind)return App._routes[t]=n,e.routing()},e.remove=function(t){if(App._routes[t])return delete App._routes[t]},e.routing=function(){var t,e,n,i,o,r,s,a,u,h,p,l;if(r=App.pathname(),i=function(t){var e,n,i;App.Before&&"function"==typeof App.Before&&(i=App.Before(),i===!1)||(e=!0,n=Utils.isFunction(App._routes[t])?App._routes[t]():App._routes[t],n&&"Page"===n._kind&&(App.page=n))},Utils.isFileUrl(App.location.href))throw e="Error: Project opened as a local file. Please set index.html as root / using a virtual server to use Routes.",alert(e),Error(e);o=r[0],a=!1;for(u in App._routes)if(Utils.startsWith(u,"/")&&(o="/"+r[0]),Utils.startsWith(u,"match:")){u=u.replace("match:","");try{if(s=new RegExp(u),h=s.test(o),h||(h=s.test("/"+r.join("/"))),h)return void i("match:"+u)}catch(e){t=e,console.log("App: Invalid regex, "+u)}}else if(u===o||""===o&&("main"===u||"index"===u||"Main"===u))return void i(u);if(!a)for(n=["default","404","Default","defaults","Defaults"],p=0,l=n.length;p<l;p++)e=n[p],App._routes.hasOwnProperty(e)&&i(e)},e}(Element);var Import;Import=function(t,e){var n,i,o,r,s;if(t){for(Utils.isString(t)&&(t=[t]),i=[],r=0,s=t.length;r<s;r++)n=t[r],n.indexOf(".js")===-1&&(n="/build/"+n+".js",App.USE_PROJECT_PATH&&(o=App.location.pathname.split("/"),o.shift(),o.shift(),n="/p/"+o[0]+n)),App.__IS_DIRECT_PATH&&Utils.startsWith(n,"/build/")&&(n="/"+window.__ID+n),App.__IS_PREVIEW?n+="?b="+(new Date).getTime():App.__BUILD&&(n+="?b="+App.__BUILD),i.push(n);return App.USE_PROJECT_PATH&&$LAB.setGlobalDefaults({CacheBust:!0}),$LAB.setGlobalDefaults({ErrorHandler:function(t){console.error(t.stack)}}).script(i).wait(function(){if(App.emit(Event.ImportEnd),e)return e()})}};var Preload;Preload=function(t,e){var n,i,o,r,s,a,u,h,p;if(t){for(Utils.isString(t)&&(t=[t]),s=[],o=0,n=0,a=0,h=t.length;a<h;a++)r=t[a],s.push({image:r,loaded:!1});for(u=0,p=s.length;u<p;u++)r=s[u],r.loaded||(r.loaded=!0,i=new Image({source:r.image,display:!1}),i.parent=null,i.on(Event.Load,function(t,n){var i;o++,i=100*o/s.length,App.emit(Event.PreloadProgress,{images:s,current:n.image,progress:i}),o===s.length&&(App.emit(Event.PreloadEnd),e&&e())}))}};var Above,Below,Desktop,Mobile,Netbook,Phone,QHD,Screen,TV,Tablet,UHD,Watch,When;Watch="Watch",Mobile="Mobile",Phone="Phone",Tablet="Tablet",Netbook="Netbook",Desktop="Desktop",TV="TV",QHD="QHD",UHD="UHD",When=function(t,e,n){var i,o,r,s,a,u,h,p,l,c,f;for(t=Utils.capitalizeFirst(t),a={},arguments[3]&&Utils.isObject(arguments[3])&&(n={view:arguments[2],properties:arguments[3]}),Utils.isObject(n)&&!Utils.isArray(n)&&(n=[n]),u=0,l=n.length;u<l;u++)if(i=n[u],i.view&&i.properties){if(i.view._originalValues){for(o=[],s=Object.keys(i.properties),p=0,f=s.length;p<f;p++)r=s[p],r in i.view&&(o[r]=i.view[r]);i.view._originalValues=Utils.defaults(i.view._originalValues,o)}else for(i.view._originalValues={},s=Object.keys(i.properties),h=0,c=s.length;h<c;h++)r=s[h],r in i.view&&(i.view._originalValues[r]=i.view[r]);i.view["_"+t+e]||(i.view["_"+t+e]={}),i.view["_"+t+e]=Utils.extend(i.view["_"+t+e],i.properties),App._responsives[i.view.id]=i.view,a[i.view.id]=i.view}return App._updateResponsives(a)},App.when=When,Below=function(t,e,n){return When("below",t,e,n)},Above=function(t,e,n){return When("above",t,e,n)},Screen={definitions:{Watch:0,Mobile:320,Phone:480,Tablet:760,Netbook:960,Desktop:1200,TV:1600,QHD:1980,UHD:2600},below:[UHD,QHD,TV,Desktop,Netbook,Tablet,Phone,Mobile,Watch],above:[Watch,Mobile,Phone,Tablet,Netbook,Desktop,TV,QHD,UHD]},App._updateResponsivesStates=function(){var t;Below.states={Watch:!1,Mobile:!1,Phone:!1,Tablet:!1,Netbook:!1,UHD:!1,QHD:!1,TV:!1,Desktop:!1},Above.states={Watch:!1,Mobile:!1,Phone:!1,Tablet:!1,Netbook:!1,UHD:!1,QHD:!1,TV:!1,Desktop:!1};for(t in Screen.definitions)App.width>=Screen.definitions[t]&&(Above.states[t]=!0),App.width<=Screen.definitions[t]&&(Below.states[t]=!0);App.page&&App._updateResponsives(App._responsives)},App._updateResponsives=function(t){var e,n,i,o,r,s,a,u,h,p,l;for(r in t){for(o=t[r],i={},p=Screen.below,s=0,u=p.length;s<u;s++)n=p[s],e=Utils.capitalizeFirst(n),o["_Below"+e]&&Below.states[e]===!0&&(i=Utils.extend(i,o["_Below"+e]));for(l=Screen.above,a=0,h=l.length;a<h;a++)n=l[a],e=Utils.capitalizeFirst(n),o["_Above"+e]&&Above.states[e]===!0&&(i=Utils.extend(i,o["_Above"+e]));o.props=o._originalValues,o.props=i}};var View,__bind=function(t,e){return function(){return t.apply(e,arguments);
}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},__indexOf=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},__slice=[].slice;View=function(t){function e(t){null==t&&(t={}),this.addListener=__bind(this.addListener,this),this.once=__bind(this.once,this),this._element={},e.__super__.constructor.apply(this,arguments),this._children=[],this._createElement(),this._context.addView(this),this._context.emit("view:create",this),this.userInteraction=!1,t.parent||("Page"===this._kind?t.parent=App.page:App.running&&(App.page?t.parent=App.page:(App.page=new Page({backgroundColor:white,parent:App}),t.parent=App.page))),this.props=Defaults.getDefaults(this._kind,t),t.parent&&delete t.parent,t.addTo&&delete t.addTo,t.props&&(this.props=t.props)}return __extends(e,t),e.prototype._kind="View",e.prototype._elementType="div",e.define("html",{get:function(){return this._element.innerHTML||""},set:function(t){return this._element.innerHTML=t,this.emit("change:html",t)}}),e.define("context",{get:function(){return this._context}}),e.define("_domEventManager",{get:function(){return this._context.domEventManager.wrap(this._element)}}),e.define("element",{get:function(){return this._element}}),e.define("style",{importable:!0,exportable:!1,get:function(){return this._element.style},set:function(t){return Utils.extend(this._element.style,t),this.emit("change:style")}}),e.define("classList",{importable:!0,exportable:!1,get:function(){return this._element.classList}}),e.define("click",{get:function(){return this._eventClick},set:function(t){this._eventClick=t,this.on(Event.Click,t)}}),e.define("doubleClick",{get:function(){return this._eventDoubleClick},set:function(t){this._eventDoubleClick=t,this.on(Event.DoubleClick,t)}}),e.define("down",{get:function(){return this._eventDown},set:function(t){this._eventDown=t,this.on(Event.Down,t)}}),e.define("over",{get:function(){return this._eventOver},set:function(t){this._eventOver=t,this.on(Event.Over,t)}}),e.define("up",{get:function(){return this._eventUp},set:function(t){this._eventUp=t,this.on(Event.Up,t)}}),e.define("in",{get:function(){return this._eventIn},set:function(t){this._eventIn=t,this.on(Event.In,t)}}),e.define("out",{get:function(){return this._eventOut},set:function(t){this._eventOut=t,this.on(Event.Out,t)}}),e.define("mouseDown",{get:function(){return this._eventDown},set:function(t){this._eventDown=t,this.on(Event.Down,t)}}),e.define("mouseOver",{get:function(){return this._eventOver},set:function(t){this._eventOver=t,this.on(Event.Over,t)}}),e.define("mouseUp",{get:function(){return this._eventUp},set:function(t){this._eventUp=t,this.on(Event.Up,t)}}),e.define("mouseIn",{get:function(){return this._eventIn},set:function(t){this._eventIn=t,this.on(Event.In,t)}}),e.define("mouseOut",{get:function(){return this._eventOut},set:function(t){this._eventOut=t,this.on(Event.Out,t)}}),e._def=function(t,e,n){return this.define(t,{get:function(){return this["_"+t]===NULL?e:this["_"+t]},set:function(e){return this["_"+t]=e,n.call(this,e),this.emit("change:"+t,e)}})},e._def_style=function(t,e,n){return this._def(t,n,function(t){return this._element.style[e]=t})},e._alias=function(t,e){return this.define(t,{get:function(){return this[""+e]},set:function(t){return this[""+e]=t}})},e.define("do",{get:function(){return this._do},set:function(t){if(Utils.isFunction(t))return this._do=t,t.call(this)}}),e.define("name",{get:function(){return this._getPropertyValue("name")},set:function(t){return this._setPropertyValue("name",t),this._element.setAttribute("name",t)}}),e._def("fixed",!1,function(t){return t===!0?(this._fixed=!0,this._element.style.position="fixed"):(this._fixed=!1,""!==this._element.style.left?this._element.style.position="absolute":this._element.style.position="")}),e.define("margin",{get:function(){return this._margin===NULL&&(this._margin={x:0,y:0,top:0,right:0,bottom:0,left:0}),this._margin},set:function(t){var e,n,i;this._margin===NULL&&(this._margin={x:0,y:0,top:0,right:0,bottom:0,left:0}),"object"!=typeof t?("center"===t&&(t="auto"),this._margin.x=t,this._margin.y=t,this._margin.top=t,this._margin.right=t,this._margin.bottom=t,this._margin.left=t):t.x!==NULL&&("center"===t.x&&(t.x="auto"),this._margin.x=t.x,t.left===NULL&&(t.left=t.x),t.right===NULL&&(t.right=t.x)),t.y!==NULL&&("center"===t.y&&(t.y="auto"),this._margin.y=t.y,t.top===NULL&&(t.top=t.y),t.bottom===NULL&&(t.bottom=t.y)),t.top!==NULL&&(this._margin.top=t.top),t.bottom!==NULL&&(this._margin.bottom=t.bottom),t.left!==NULL&&(this._margin.left=t.left),t.right!==NULL&&(this._margin.right=t.right),this.emit("change:margin",this._margin),i="",e=NULL;for(n in this._margin)"x"!==n&&"y"!==n&&(e=this._margin[n],"number"==typeof this._margin[n]&&(e=this._margin[n]+"px"),i+=e+" ");return this._element.style.margin=i}}),e._alias("mg","margin"),e.define("marginX",{get:function(){return this.margin.x},set:function(t){return this.margin={x:t}}}),e.define("marginY",{get:function(){return this.margin.y},set:function(t){return this.margin={y:t}}}),e.define("marginTop",{get:function(){return this.margin.top},set:function(t){return this.margin={top:t}}}),e.define("marginRight",{get:function(){return this.margin.right},set:function(t){return this.margin={right:t}}}),e.define("marginBottom",{get:function(){return this.margin.bottom},set:function(t){return this.margin={bottom:t}}}),e.define("marginLeft",{get:function(){return this.margin.left},set:function(t){return this.margin={left:t}}}),e.define("padding",{get:function(){return this._padding===NULL&&(this._padding={x:0,y:0,top:0,right:0,bottom:0,left:0}),this._padding},set:function(t){var e,n,i;this._padding===NULL&&(this._padding={x:0,y:0,top:0,right:0,bottom:0,left:0}),"object"!=typeof t?(this._padding.x=t,this._padding.y=t,this._padding.top=t,this._padding.right=t,this._padding.bottom=t,this._padding.left=t):(t.x!==NULL&&(this._padding.x=t.x,t.left===NULL&&(t.left=t.x),t.right===NULL&&(t.right=t.x)),t.y!==NULL&&(this._padding.y=t.y,t.top===NULL&&(t.top=t.y),t.bottom===NULL&&(t.bottom=t.y)),t.top!==NULL&&(this._padding.top=t.top),t.bottom!==NULL&&(this._padding.bottom=t.bottom),t.left!==NULL&&(this._padding.left=t.left),t.right!==NULL&&(this._padding.right=t.right)),this.emit("change:padding",this._padding),i="",e=NULL;for(n in this._padding)"x"!==n&&"y"!==n&&(e=this._padding[n],"number"==typeof this._padding[n]&&(e=this._padding[n]+"px"),i+=e+" ");return this._element.style.padding=i}}),e._alias("pg","padding"),e.define("paddingX",{get:function(){return this.padding.x},set:function(t){return this.padding={x:t}}}),e.define("paddingY",{get:function(){return this.padding.y},set:function(t){return this.padding={y:t}}}),e.define("paddingTop",{get:function(){return this.padding.top},set:function(t){return this.padding={top:t}}}),e.define("paddingRight",{get:function(){return this.padding.right},set:function(t){return this.padding={right:t}}}),e.define("paddingBottom",{get:function(){return this.padding.bottom},set:function(t){return this.padding={bottom:t}}}),e.define("paddingLeft",{get:function(){return this.padding.left},set:function(t){return this.padding={left:t}}}),e.define("x",{get:function(){var t;return t=this._element.style.left,t.indexOf("px")>=0&&(t=parseFloat(t,10)),""===t&&(t=0),t},set:function(t){return this._keepCenterX=!1,Utils.isObject(t)&&(t.centerX&&(this._keepCenterX=!0),t=t.value),Utils.isNumber(t)&&(t+="px"),this.fixed||(this._element.style.position="absolute"),this._element.style.left=t,this.emit("change:x",t),this.emit("change:left",t),this.emit("change:point",this.point),this.emit("change:frame",this.frame)}}),e.define("y",{get:function(){var t;return t=this._element.style.top,t.indexOf("px")>=0&&(t=parseFloat(t,10)),""===t&&(t=0),t},set:function(t){return this._keepCenterY=!1,Utils.isObject(t)&&(t.centerY&&(this._keepCenterY=!0),t=t.value),Utils.isNumber(t)&&(t+="px"),this.fixed||(this._element.style.position="absolute"),this._element.style.top=t,this.emit("change:y",t),this.emit("change:top",t),this.emit("change:point",this.point),this.emit("change:frame",this.frame)}}),e._alias("top","y"),e._alias("left","x"),e.define("bottom",{get:function(){var t;return t=this._element.style.bottom,t.indexOf("px")>=0&&(t=parseFloat(t,10)),""===t&&(t=0),t},set:function(t){return Utils.isNumber(t)&&(t+="px"),this.fixed||(this._element.style.position="absolute"),this._element.style.bottom=t,this.emit("change:bottom",t)}}),e.define("right",{get:function(){var t;return t=this._element.style.right,t.indexOf("px")>=0&&(t=parseFloat(t,10)),""===t&&(t=0),t},set:function(t){return Utils.isNumber(t)&&(t+="px"),this.fixed||(this._element.style.position="absolute"),this._element.style.right=t,this.emit("change:right",t)}}),e.define("width",{configurable:!0,get:function(){var t,e,n;return this._width!==NULL&&"number"!=typeof this._width?this._width:0===this._element.offsetWidth&&this._width!==NULL?this._width:(e=""!==this._element.style.borderLeftWidth?this._element.style.borderLeftWidth:0,n=""!==this._element.style.borderRightWidth?this._element.style.borderRightWidth:0,t=parseFloat(e,10)+parseFloat(n,10),this._element.offsetWidth-t)},set:function(t){return"auto"===t?void(this._element.style.width=""):(this._width=t,Utils.isNumber(t)&&(t+="px"),this._element.style.width=t,this.emit("change:width",this._width),this.emit("change:size",this.size),this.emit("change:frame",this.frame))}}),e.define("height",{configurable:!0,get:function(){var t,e,n;return this._height!==NULL&&"number"!=typeof this._height?this._height:0===this._element.offsetHeight&&this._height!==NULL?this._height:(n=""!==this._element.style.borderTopWidth?this._element.style.borderTopWidth:0,e=""!==this._element.style.borderBottomWidth?this._element.style.borderBottomWidth:0,t=parseFloat(n,10)+parseFloat(e,10),this._element.offsetHeight-t)},set:function(t){return"auto"===t?void(this._element.style.height=""):(this._height=t,Utils.isNumber(t)&&(t+="px"),this._element.style.height=t,this.emit("change:height",this._height),this.emit("change:size",this.size),void this.emit("change:frame",this.frame))}}),e._alias("w","width"),e._alias("h","height"),e._def("minWidth",null,function(t){return Utils.isNumber(t)&&(t+="px"),this._element.style.minWidth=t}),e._def("maxWidth",null,function(t){return Utils.isNumber(t)&&(t+="px"),this._element.style.maxWidth=t}),e._def("minHeight",null,function(t){return Utils.isNumber(t)&&(t+="px"),this._element.style.minHeight=t}),e._def("maxHeight",null,function(t){return Utils.isNumber(t)&&(t+="px"),this._element.style.maxHeight=t}),e._def_min=function(t){return this.define("min"+t.toUpperCase(),{get:function(){var e;return e="left","y"===t&&(e="top"),"string"==typeof this[t]&&this[t].indexOf("%")>=0?parseFloat(this.computedStyle()[e],10):this[t]},set:function(e){this[t]=e}})},e._def_mid=function(t){return this.define("mid"+t.toUpperCase(),{get:function(){var e,n;return n="width","y"===t&&(n="height"),e="left","y"===t&&(e="top"),"string"==typeof this[t]&&this[t].indexOf("%")>=0?parseFloat(this.computedStyle()[e],10)+this[n]/2:this[t]+this[n]/2},set:function(e){var n;n="width","y"===t&&(n="height"),this[t]=e-this[n]/2}})},e._def_max=function(t){return this.define("max"+t.toUpperCase(),{get:function(){var e,n;return n="width","y"===t&&(n="height"),e="left","y"===t&&(e="top"),"string"==typeof this[t]&&this[t].indexOf("%")>=0?parseFloat(this.computedStyle()[e],10)+this[n]:this[t]+this[n]},set:function(e){var n;n="width","y"===t&&(n="height"),this[t]=e-this[n]}})},e._def_min("x"),e._def_min("y"),e._def_mid("x"),e._def_mid("y"),e._def_max("x"),e._def_max("y"),e.define("point",{get:function(){return{x:this.x,y:this.y}},set:function(t){t.x!==NULL&&(this.x=t.x),t.y!==NULL&&(this.y=t.y)}}),e.define("size",{get:function(){return{width:this.width,height:this.height}},set:function(t){t.width!==NULL&&(this.width=t.width),t.height!==NULL&&(this.height=t.height)}}),e.define("frame",{get:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},set:function(t){t.x!==NULL&&(this.x=t.x),t.y!==NULL&&(this.y=t.y),t.width!==NULL&&(this.width=t.width),t.height!==NULL&&(this.height=t.height)}}),e.define("windowFrame",{get:function(){return{x:this._element.getBoundingClientRect().left,y:this._element.getBoundingClientRect().top,width:this.width,height:this.height}},set:function(t){return t.x!==NULL&&(this.x=t.x),t.y!==NULL&&(this.y=t.y),this.width=t.widthif(t.width!==NULL),t.height!==NULL&&(this.height=t.height),this.fixed=!0}}),e.define("display",{get:function(){var t;return t=this._element.style.display,"none"!==t&&(""===t||t)},set:function(t){return Utils.isString(t)?(this._element.style.display=t,this._element.style.webkitDisplay=t):(t=t?"block":"none",this._element.style.display=t)}}),e.define("visible",{get:function(){var t;return t=this._element.style.visibility,"visible"===t||""===t},set:function(t){return t=t?"visible":"hidden",this._element.style.visibility=t}}),e.define("backgroundColor",{configurable:!0,get:function(){return this._background===NULL?null:this._background},set:function(t){return t||(t=""),"clear"===t&&(t="transparent"),t=Color.toColor(t),t&&t.color?this._background=t.color:this._background=t,this._element.style.background=t}}),e._alias("bc","backgroundColor"),e.define("image",{configurable:!0,get:function(){return this._image!==NULL&&this._image},set:function(t){return this._background=null,this._image=t,this._element.style.backgroundImage="url("+Utils.parseAsset(t)+")",this._element.style.backgroundSize="cover",this.imageRepeat=!1}}),e._alias("backgroundImage","image"),e.define("background",{get:function(){return this.image},set:function(t){return Color.isColor(t)||t.color||t===clear?this.backgroundColor=t:(this.image=t,this.imagePosition="center center",this.imageSize="cover",this.imageRepeat=!1)}}),e.define("imageSize",{get:function(){return this._imageSize===NULL?"cover":this._image},set:function(t){return this._imageSize=t,Utils.isNumber(t)&&(t=100*t+"%"),this._element.style.backgroundSize=t}}),e._alias("imageScale","imageSize"),e.define("imageRepeat",{get:function(){return this._imageRepeat===NULL||this._imageRepeat},set:function(t){return t||"repeat"===t?(this._imageRepeat=!0,this._element.style.backgroundRepeat="repeat","cover"===this.imageSize?this.imageSize="auto":void 0):(this._imageRepeat=!1,this._element.style.backgroundRepeat="no-repeat")}}),e.define("imageFixed",{get:function(){return this._imageFixed===NULL&&(this._imageFixed=!1),this._imageFixed},set:function(t){return t?(this._imageFixed=!0,t="fixed"):(this._imageFixed=!1,t="scroll"),this._element.style.backgroundAttachment=t}}),e.define("imagePosition",{get:function(){return this._imagePosition===NULL&&(this._imagePosition=""),this._imagePosition},set:function(t){return this._imagePosition=t,"number"==typeof t&&(t+="px"),this._element.style.backgroundPosition=t}}),e._def_style("opacity","opacity",1),e._alias("alpha","opacity"),e.define("clip",{get:function(){return this._clip===NULL&&(this._clip=!0),this._clip},set:function(t){return t===!0?(this._clip=!0,t="hidden"):(this._clip=!1,t="visible"),this._element.style.overflow=t}}),e.define("scrollTop",{get:function(){return this._element.scrollTop},set:function(t){return this._element.scrollTop=t}}),e._alias("scrollY","scrollTop"),e.define("scrollLeft",{get:function(){return this._element.scrollLeft},set:function(t){return this._element.scrollLeft=t}}),e._alias("scrollX","scrollLeft"),e.define("scrollFrame",{importable:!1,get:function(){var t;return t={x:this.scrollX,y:this.scrollY,width:this.width,height:this.height}},set:function(t){return this.scrollX=t.x,this.scrollY=t.y}}),e.define("scrollWidth",{get:function(){return this._element.scrollWidth}}),e.define("scrollHeight",{get:function(){return this._element.scrollHeight}}),e.define("scroll",{configurable:!0,get:function(){return this._scroll!==NULL&&this._scroll},set:function(t){return t===!0?(this._scroll=!0,this._element.style.overflow="scroll",this._element.style.webkitOverflowScrolling="touch"):(this._scroll=!1,this.clip?this._element.style.overflow="hidden":this._element.style.overflow="auto")}}),e.define("scrollHorizontal",{configurable:!0,get:function(){return this._scrollHorizontal!==NULL&&this._scrollHorizontal},set:function(t){t===!0?(this._scrollHorizontal=!0,this._element.style.overflowX="scroll",this.clip&&!this.scrollVertical&&(this._element.style.overflowY="hidden"),this._element.style.webkitOverflowScrolling="touch"):(this._scrollHorizontal=!1,this.clip?this._element.style.overflowX="hidden":this._element.style.overflowX="auto")}}),e.define("scrollVertical",{configurable:!0,get:function(){return this._scrollVertical!==NULL&&this._scrollVertical},set:function(t){return t===!0?(this._scrollVertical=!0,this._element.style.overflowY="scroll",this.clip&&!this.scrollHorizontal&&(this._element.style.overflowX="hidden"),this._element.style.webkitOverflowScrolling="touch"):(this._scrollVertical=!1,this.clip?this._element.style.overflowY="hidden":this._element.style.overflowY="auto")}}),e._def_style("cursor","cursor","auto"),e.define("parent",{enumerable:!1,exportable:!1,importable:!0,get:function(){return this._parent||null},set:function(t){if(t!==this._parent&&t!==-1){if(Utils.domCompleteCancel(this.__insertElement),this._parent&&(this._parent===App._wrapper&&(App._page=null,App.emit("change:page",{added:[],removed:[this]})),this.emit(Event.WillDisappear),this.willDisappear&&this.willDisappear(),this._parent._children=Utils.without(this._parent._children,this),this._element.parentNode===this._parent._element&&this._parent._element.removeChild(this._element),this._parent.emit("change:children",{added:[],removed:[this]}),this.emit(Event.DidDisappear),this.didDisappear&&this.didDisappear()),t){if("App"===t._kind){if("Page"!==this._kind)throw Error("View: parent view must be a page, not the App.");t=App._wrapper,App._page=this,App._pages_counter++}this.emit(Event.WillAppear),this.willAppear&&this.willAppear(this.__options),t._element.appendChild(this._element),t._children.push(this),"App"===t._kind&&"Page"===this._kind&&App.emit("change:page",{added:[this],removed:[]}),t.emit("change:children",{added:[this],removed:[]}),this.didAppear&&(this._didAppear=!0,this.didAppear(this.__options)),this.emit(Event.DidAppear)}return this._parent=t,this.emit("change:parent")}}}),e.define("children",{enumerable:!1,exportable:!1,importable:!1,get:function(){return Utils.clone(this._children)}}),e.define("siblings",{enumerable:!1,exportable:!1,importable:!1,get:function(){return this.parent?Utils.without(this.parent._children,this):null}}),e.define("descendants",{enumerable:!1,exportable:!1,importable:!1,get:function(){var t,e;return e=[],t=function(n){return e.push(n),n.children.map(t)},this.children.map(t),e}}),e.define("index",{get:function(){return this._index||(this._index=0),this._index},set:function(t){return this._index=parseInt(t),this.emit("change:index",t),this._element.style.zIndex=t}}),e.define("flex",{get:function(){return this._flex},set:function(t){return t===!0?this._element.style.flex="1":t===!1?this._element.style.flex="0":(this._element.style.flex=String(t),this._element.style.webkitFlex=String(t)),this._flex=t}}),e.define("originX",{get:function(){return this._originX===NULL?.5:this._originX},set:function(t){(t<0||t>1)&&(t=.5),this._originX=t,this._originY===NULL&&(this._originY=.5),this._element.style.transformOrigin=100*t+"% "+100*this._originY+"%"}}),e.define("originY",{get:function(){return this._originY===NULL?.5:this._originY},set:function(t){return(t<0||t>1)&&(t=.5),this._originY=t,this._originX===NULL&&(this._originX=.5),this._element.style.transformOrigin=100*this._originX+"% "+100*t+"%"}}),e._def("perspective",0,function(t){return this._element.style.perspective=t+"px"}),e._def("preserve3D",!1,function(t){return t=t?"preserve-3d":"flat",this._element.style.webkitTransformStyle=t,this._element.style.transformStyle=t}),e._def("translate",0,function(t){return this._translateX=t,this._translateY=t,this._updateTransform()}),e._def("translateX",0,function(t){return this._translateY===NULL&&(this._translateY=0),this._updateTransform()}),e._def("translateY",0,function(t){return this._translateX===NULL&&(this._translateX=0),this._updateTransform()}),e._def("translateZ",0,function(t){return this._translateZ===NULL&&(this._translateZ=0),this._updateTransform()}),e._def("rotation",0,function(){return this._updateTransform()}),e._alias("rotate","rotation"),e._def("rotationX",0,function(){return this._updateTransform()}),e._alias("rotateX","rotationX"),e._def("rotationY",0,function(){return this._updateTransform()}),e._alias("rotateY","rotationY"),e._def("rotationZ",0,function(){return this._updateTransform()}),e._alias("rotateZ","rotationZ"),e._def("scale",1,function(t){return this._scaleX=t,this._scaleY=t,this._updateTransform()}),e._def("scaleX",1,function(t){return this._scaleY===NULL&&(this._scaleY=1),this._updateTransform()}),e._def("scaleY",1,function(t){return this._scaleX===NULL&&(this._scaleX=1),this._updateTransform()}),e._def("skew",0,function(t){return this._skewX=t,this._skewY=t,this._updateTransform()}),e._def("skewX",0,function(t){return this._skewY===NULL&&(this._skewY=0),this._updateTransform()}),e._def("skewY",0,function(t){return this._skewX===NULL&&(this._skewX=0),this._updateTransform()}),e._def("blur",0,function(t){return this._f_blur="blur("+t+"px) ",this._updateEffects()}),e._def("brightness",1,function(t){return this._f_brightness="brightness("+t+") ",this._updateEffects()}),e._def("saturate",100,function(t){return this._f_saturate="saturate("+t+"%) ",this._updateEffects()}),e.define("hueRotate",{get:function(){return this._hueRotate===NULL?0:this._hueRotate},set:function(t){return(t<0||t>360)&&(t=0),this._hueRotate=t,this._f_hueRotate="hue-rotate("+t+"deg) ",this._updateEffects()}}),e._def("contrast",100,function(t){return this._f_contrast="contrast("+t+"%) ",this._updateEffects()}),e.define("invert",{get:function(){return this._invert===NULL?0:this._invert},set:function(t){return(t<0||t>100)&&(t=0),this._invert=t,this._f_invert="invert("+t+"%) ",this._updateEffects()}}),e.define("grayscale",{get:function(){return this._grayscale===NULL?0:this._grayscale},set:function(t){return(t<0||t>100)&&(t=0),this._grayscale=t,this._f_grayscale="grayscale("+t+"%) ",this._updateEffects()}}),e.define("sepia",{get:function(){return this._sepia===NULL?0:this._sepia},set:function(t){return(t<0||t>100)&&(t=0),this._sepia=t,this._f_sepia="sepia("+t+"%) ",this._updateEffects()}}),e._def("backdropBlur",0,function(t){return this._bf_blur="blur("+t+"px) ",this._updateBackDropEffects()}),e._def("backdropBrightness",1,function(t){return this._bf_brightness="brightness("+t+") ",this._updateBackDropEffects()}),e._def("backdropSaturate",100,function(t){return this._bf_saturate="saturate("+t+"%) ",this._updateBackDropEffects()}),e.define("backdropHueRotate",{get:function(){return this._hueRotate===NULL?0:this._hueRotate},set:function(t){return(t<0||t>360)&&(t=0),this._hueRotate=t,this._bf_hueRotate="hue-rotate("+t+"deg) ",this._updateBackDropEffects()}}),e._def("backdropContrast",100,function(t){return this._bf_contrast="contrast("+t+"%) ",this._updateBackDropEffects()}),e.define("backdropInvert",{get:function(){return this._invert===NULL?0:this._invert},set:function(t){return(t<0||t>100)&&(t=0),this._invert=t,this._bf_invert="invert("+t+"%) ",this._updateBackDropEffects()}}),e.define("backdropGrayscale",{get:function(){return this._grayscale===NULL?0:this._grayscale},set:function(t){return(t<0||t>100)&&(t=0),this._grayscale=t,this._bf_grayscale="grayscale("+t+"%) ",this._updateBackDropEffects()}}),e.define("backdropSepia",{get:function(){return this._sepia===NULL?0:this._sepia},set:function(t){return(t<0||t>100)&&(t=0),this._sepia=t,this._bf_sepia="sepia("+t+"%) ",this._updateBackDropEffects()}}),e._def("shadowX",0,function(){return this._updateShadow()}),e._def("shadowY",0,function(){return this._updateShadow()}),e._def("shadowBlur",0,function(){return this._updateShadow()}),e._def("shadowSpread",0,function(){return this._updateShadow()}),e._def("shadowColor","black",function(){return this._updateShadow()}),e.define("shadowInset",{get:function(){return this._shadowInset===NULL?"":this._shadowInset},set:function(t){return t=t?"inset":"",this._shadowInset=t,this._updateShadow()}}),e.define("borderBox",{get:function(){return this._borderBox===NULL&&(this._borderBox=!1),this._borderBox},set:function(t){return t===!0?(this._borderBox=!0,this._element.style.boxSizing="border-box"):(this._borderBox=!1,this._element.style.boxSizing="content-box")}}),e._def("borderRadius",0,function(t){return"number"==typeof t&&(t+="px"),this._element.style.borderRadius=t,this._element.style.webkitBorderRadius=t,this._element.style.mozBorderRadius=t,this._element.style.msBorderRadius=t,this._element.style.oBorderRadius=t}),e._alias("br","borderRadius"),e._alias("cornerRadius","borderRadius"),e._def("borderTopLeftRadius",0,function(t){return"number"==typeof t&&(t+="px"),this._element.style.borderTopLeftRadius=t,this._element.style.webkitBorderTopLeftRadius=t,this._element.style.mozBorderTopLeftRadius=t,this._element.style.msBorderTopLeftRadius=t,this._element.style.oBorderTopLeftRadius=t}),e._def("borderTopRightRadius",0,function(t){return"number"==typeof t&&(t+="px"),this._element.style.borderTopRightRadius=t,this._element.style.webkitBorderTopRightRadius=t,this._element.style.mozBorderTopRightRadius=t,this._element.style.msBorderTopRightRadius=t,this._element.style.oBorderTopRightRadius=t}),e._def("borderBottomLeftRadius",0,function(t){return"number"==typeof t&&(t+="px"),this._element.style.borderBottomLeftRadius=t,this._element.style.webkitBorderBottomLeftRadius=t,this._element.style.mozBorderBottomLeftRadius=t,this._element.style.msBorderBottomLeftRadius=t,this._element.style.oBorderBottomLeftRadiuss=t}),e._def("borderBottomRightRadius",0,function(t){return"number"==typeof t&&(t+="px"),this._element.style.borderBottomRightRadius=t,this._element.style.webkitBorderBottomRightRadius=t,this._element.style.mozBorderBottomRightRadius=t,this._element.style.msBorderBottomRightRadius=t,this._element.style.oBorderBottomRightRadius=t}),e._def("borderColor","",function(t){return"clear"===t&&(t="transparent"),this._element.style.borderColor=t}),e._def("borderTopColor","",function(t){return"clear"===t&&(t="transparent"),this._element.style.borderTopColor=t}),e._def("borderBottomColor","",function(t){return"clear"===t&&(t="transparent"),this._element.style.borderBottomColor=t}),e._def("borderLeftColor","",function(t){return"clear"===t&&(t="transparent"),this._element.style.borderLeftColor=t}),e._def("borderRightColor","",function(t){return"clear"===t&&(t="transparent"),this._element.style.borderRightColor=t}),e._def_style("borderStyle","borderStyle","solid"),e._def("borderWidth",0,function(t){return"number"==typeof t&&(t+="px"),this._element.style.borderWidth=t,this._element.style.borderStyle=this.borderStyle}),e._def("borderLeftWidth",0,function(t){return"number"==typeof t&&(t+="px"),this._element.style.borderLeftWidth=t,this._element.style.borderStyle=this.borderStyle}),e._def("borderRightWidth",0,function(t){return"number"==typeof t&&(t+="px"),this._element.style.borderRightWidth=t,this._element.style.borderStyle=this.borderStyle}),e._def("borderTopWidth",0,function(t){return"number"==typeof t&&(t+="px"),this._element.style.borderTopWidth=t,this._element.style.borderStyle=this.borderStyle}),e._def("borderBottomWidth",0,function(t){return"number"==typeof t&&(t+="px"),this._element.style.borderBottomWidth=t,this._element.style.borderStyle=this.borderStyle}),e.define("userInteraction",{get:function(){return this._userInteraction===NULL&&(this._userInteraction=!1),this._userInteraction},set:function(t){return t?(this._userInteraction=!0,this.classList.remove("no-select"),this.classList.add("select")):(this._userInteraction=!1,this.classList.remove("select"),this.classList.add("no-select"))}}),e._alias("interaction","userInteraction"),e.define("states",{enumerable:!1,exportable:!1,importable:!1,get:function(){return null!=this._states?this._states:this._states=new ViewStates(this)}}),e.define("draggable",{get:function(){return null!=this._draggable?this._draggable:this._draggable=new ViewDraggable(this)},set:function(t){if(Utils.isBoolean(t))return this.draggable.enabled=t}}),e.define("transition",{get:function(){return this._transition},set:function(t){var e;return t===!1?void(this._transition&&this._transition.disable()):(e={view:this,duration:.2},"object"==typeof t&&(t.duration&&(e.duration=t.duration),t.delay&&(e.delay=t.delay),t.curve&&(e.curve=t.curve)),this._transition=new Transition(e),this._transition.start())}}),e.define("isAnimating",{enumerable:!1,exportable:!1,get:function(){return 0!==this.animations().length}}),e.define("hoverAnimated",{get:function(){return this._hover?this._hover.values:this._hover={},this._hover},set:function(t){var e,n;if(!t||"object"!=typeof t)return!1;for(this._hover={},this._hover.originalValues={},this._hover.transition=null,this._hover.animate=!0,this._hover.options={duration:.2},t.hasOwnProperty("animated")&&t.animated===!1&&(this._hover.animate=!1),t.hasOwnProperty("options")&&(this._hover.options=t.options,delete t.options),n=Object.keys(t),e=0;e<n.length;)n[e]in this&&(this._hover.originalValues[n[e]]=this[n[e]]),e++;return this._hover.values=t,this.on(Event.In,function(t,e){var n,i;if(!this._hover.animate)return void(this.props=this._hover.values);i={properties:this._hover.values,view:this};for(n in this._hover.options)i[n]=this._hover.options[n];return this._hover.transition=new Transition(i),this._hover.transition.start()}),this.on(Event.Out,function(t,e){return this._hover.animate?(this._hover.transition.options||(this._hover.transition.options={}),this._hover.transition.options.properties=this._hover.originalValues,this._hover.transition.start(!0)):void(this.props=this._hover.originalValues)})}}),e.define("hover",{get:function(){return this.hoverAnimated},set:function(t){return t.animate!==NULL&&(t.animated=t.animate),t.animated===NULL&&(t.animated=!1),this.hoverAnimated=t}}),e.define("delegate",{get:function(){return null===this._delegate&&(this._delegate=null),this._delegate},set:function(t){return this._delegate=t}}),e.define("pointerEvent",{get:function(){return"none"!==this._element.style.pointerEvents},set:function(t){return t=t?"auto":"none",this._element.style.pointerEvents=t}}),e._alias("pointerEvents","pointerEvent"),e._alias("ignoreEvent","pointerEvent"),e._def("tooltip",null,function(t){return this._element.setAttribute("title",t)}),e.define("blend",{get:function(){return this._element.style.mixBlendMode},set:function(t){return this._element.style.mixBlendMode=t}}),e._def("force2d",!1,function(t){if(t===!0)return this._element.style.webkitTransform="",this._element.style.mozTransform="",this._element.style.msTransform="",this._element.style.oTransform="",this._element.style.transform=""}),e.define("fontSize",{get:function(){return parseFloat(this._element.style.fontSize,10)},set:function(t){"number"==typeof t&&(t+="px"),this._element.style.fontSize=t}}),e._alias("fsize","fontSize"),e.define("fontStyle",{get:function(){return this._element.style.fontStyle},set:function(t){return this._element.style.fontStyle=t}}),e.define("fontWeight",{get:function(){return this._element.style.fontWeight},set:function(t){return this._element.style.fontWeight=t}}),e._alias("weight","fontWeight"),e.define("fontName",{get:function(){return this._element.style.fontFamily},set:function(t){return this._element.style.fontFamily=t+", sans-serif"}}),e._alias("fontFamily","fontName"),e.define("font",{get:function(){return this._element.style.font},set:function(t){return this._element.style.font=t;
}}),e.define("color",{get:function(){return this._element.style.color},set:function(t){return"clear"===t&&(t="transparent"),t=Color.toColor(t),t=t&&t.color?t.color:t,this._element.style.color=t}}),e.define("align",{get:function(){return this._element.style.textAlign},set:function(t){return this._element.style.textAlign=t}}),e._alias("textAlignment","align"),e._alias("textAlign","align"),e.prototype.addChild=function(t){return t.parent=this},e.prototype.add=function(t){return this.addChild(t)},e.prototype.removeChild=function(t){if(!(__indexOf.call(this.children,t)<0))return t.parent=null},e.prototype.remove=function(t){return this.removeChild(t)},e.prototype.ancestors=function(t){var e,n;if(null==t&&(t=!1),n=[],e=this,t===!1)for(;e.parent;)n.push(e.parent),e=e.parent;else for(;e._parentOrContext();)n.push(e._parentOrContext()),e=e._parentOrContext();return n},e.prototype.childrenWithName=function(t){return this.children.filter(function(e){return e.name===t})},e.prototype.siblingsWithName=function(t){return this.siblings.filter(function(e){return e.name===t})},e.prototype.childrenAbove=function(t,e,n){return null==e&&(e=0),null==n&&(n=0),this.children.filter(function(i){return Utils.framePointForOrigin(i.frame,e,n).y<t.y})},e.prototype.childrenBelow=function(t,e,n){return null==e&&(e=0),null==n&&(n=0),this.children.filter(function(i){return Utils.framePointForOrigin(i.frame,e,n).y>t.y})},e.prototype.childrenLeft=function(t,e,n){return null==e&&(e=0),null==n&&(n=0),this.children.filter(function(i){return Utils.framePointForOrigin(i.frame,e,n).x<t.x})},e.prototype.childrenRight=function(t,e,n){return null==e&&(e=0),null==n&&(n=0),this.children.filter(function(i){return Utils.framePointForOrigin(i.frame,e,n).x>t.x})},e.prototype._parentOrContext=function(){return this.parent?this.parent:this._context._parent?this._context._parent:void 0},e.prototype.bringToFront=function(){if(this.siblings)return this.index=Utils.max(Utils.union([0],this.siblings.map(function(t){return t.index})))+1},e.prototype.sendToBack=function(){if(this.siblings)return this.index=Utils.max(Utils.union([0],this.siblings.map(function(t){return t.index})))-1},e.prototype.placeBefore=function(t){var e,n,i,o;if(!(__indexOf.call(this.siblings,t)<0)){for(o=this.siblings,n=0,i=o.length;n<i;n++)e=o[n],e.index<=t.index&&(e.index-=1);return this.index=t.index+1}},e.prototype.placeBehind=function(t){var e,n,i,o;if(!(__indexOf.call(this.siblings,t)<0)){for(o=this.siblings,n=0,i=o.length;n<i;n++)e=o[n],e.index>=t.index&&(e.index+=1);return this.index=t.index-1}},e.prototype.computedStyle=function(t){return t!==NULL?window.getComputedStyle(this._element).getPropertyValue(t):window.getComputedStyle(this._element)},e.prototype.cx=function(){var t;return t=this.computedStyle().getPropertyValue("left"),""===t?null:parseFloat(t,10)},e.prototype.cy=function(){var t;return t=this.computedStyle().getPropertyValue("top"),""===t?null:parseFloat(t,10)},e.prototype.cwidth=function(){return parseFloat(this.computedStyle().getPropertyValue("width"),10)},e.prototype.cheight=function(){return parseFloat(this.computedStyle().getPropertyValue("height"),10)},e.prototype.destroy=function(t){var e,n,i,o,r;if(this.parent&&(this.parent._children=Utils.without(this.parent._children,this)),null!=(o=this._element.parentNode)&&o.removeChild(this._element),this.removeAllListeners(),this._context.removeView(this),this._context.emit("view:destroy",this),t)for(r=this.descendants,n=0,i=r.length;n<i;n++)e=r[n],e.destroy()},e.prototype.copy=function(){var t;return t=Utils.clone(this),t._element=this._element.cloneNode(!0),t._element.instance=t,t._events=NULL,t._id=Utils.randomID(),t._element.setAttribute("id","MagiX"+this._kind+"::"+t.id),t._parent=null,t},e.prototype.copySingle=function(){var t;return t=Utils.clone(this),t._parent=null,t._element=this._element.cloneNode(!1),t._events=NULL,t._id=Utils.randomID(),t._element.setAttribute("id","MagiX"+this._kind+"::"+t.id),t._children=[],t},e.prototype.querySelector=function(t){return this._element.querySelector(t)},e.prototype.querySelectorAll=function(t){return this._element.querySelectorAll(t)},e.prototype.pixelAlign=function(){return this.x=parseInt(this.x),this.y=parseInt(this.y)},e.prototype.contentFrame=function(){var t,e,n,i,o;for(n=0,e=0,t=0;t<this.children.length;)i=this.children[t].x+this.children[t].width,o=this.children[t].y+this.children[t].height,i>n&&(n=i),o>e&&(e=o),t++;return{x:0,y:0,width:n,height:e}},e.prototype.centerFrame=function(){var t,e,n;return this.parent?(t=this.frame,n=this.parent.width,Utils.isString(this.parent.width)&&(n=this.parent.cwidth()),e=this.parent.height,Utils.isString(this.parent.height)&&(e=this.parent.cheight()),Utils.frameSetMidX(t,parseInt(n/2-this.borderWidth-this.marginLeft)),Utils.frameSetMidY(t,parseInt(e/2-this.borderWidth-this.marginTop)),t):(t=this.frame,Utils.frameSetMidX(t,parseInt(this._context.width/2)-this.borderWidth-this.marginLeft),Utils.frameSetMidY(t,parseInt(this._context.height/2)-this.borderWidth-this.marginTop),t)},e.prototype.absoluteCenter=function(t){var e,n;if(e=this.centerFrame(),this.x={value:e.x,centerX:!0},this.y={value:e.y,centerY:!0},!t){if(!this.parent)return;(Utils.isString(this.parent.width)||Utils.isString(this.parent.height))&&(n=this,App.onResize(function(){if(e=n.centerFrame(),n._keepCenterX&&(n.x={value:e.x,centerX:!0}),n._keepCenterY)return n.y={value:e.y,centerY:!0}}))}return this},e.prototype.absoluteCenterX=function(t,e){var n;if(null==t&&(t=0),this.x={value:this.centerFrame().x+t,centerX:!0},!e){if(!this.parent)return;(Utils.isString(this.parent.width)||Utils.isString(this.parent.height))&&(n=this,App.onResize(function(){var e;if(e=n.centerFrame(),n._keepCenterX)return n.x={value:e.x+t,centerX:!0}}))}return this},e.prototype.absoluteCenterY=function(t,e){var n;if(null==t&&(t=0),this.y={value:this.centerFrame().y+t,centerY:!0},!e){if(!this.parent)return;(Utils.isString(this.parent.width)||Utils.isString(this.parent.height))&&(n=this,App.onResize(function(){var e;if(e=n.centerFrame(),n._keepCenterY)return n.y={value:e.y+t,centerY:!0}}))}return this},e.prototype.center=function(){this._element.style.position="absolute",this.x="50%",this.y="50%",this.marginLeft=-(this.width/2),this.marginTop=-(this.height/2)},e.prototype.centerX=function(t){this.element.style.position="absolute",this.x="50%",t===NULL&&(t=0),this.marginLeft=-(this.width/2)+t},e.prototype.centerY=function(t){this.element.style.position="absolute",this.y="50%",t===NULL&&(t=0),this.marginTop=-(this.height/2)+t},e.prototype.animate=function(t){var e,n;return n=t.start,n||(n=!0),delete t.start,t.view=this,e=new Animation(t),n&&e.start(),e},e.prototype.animations=function(){return this._context.animations.filter(function(t){return function(e){return e.options.view===t}}(this))},e.prototype.animatingProperties=function(){var t,e,n,i,o,r,s,a,u;for(e={},a=this.animations(),i=0,r=a.length;i<r;i++)for(t=a[i],u=t.animatingProperties(),o=0,s=u.length;o<s;o++)n=u[o],e[n]=t;return e},e.prototype.animateStop=function(){var t;return Utils.invoke(this.animations(),"stop"),null!=(t=this._draggable)?t.animateStop():void 0},e.prototype.animatingProperties=function(){var t,e,n,i,o,r,s,a,u;for(r={},a=this.animations(),e=0,i=a.length;e<i;){for(t=a[e],u=t.animatingProperties(),n=0,o=u.length;n<o;)s=u[n],r[s]=t,n++;e++}return r},e.prototype.enterFullscreen=function(){document.fullscreenElement&&document.webkitFullscreenElement&&document.mozFullScreenElement&&document.msFullscreenElement||(this._element.requestFullscreen?this._element.requestFullscreen():this._element.webkitRequestFullscreen?this._element.webkitRequestFullscreen():this._element.mozRequestFullScreen?this._element.mozRequestFullScreen():this._element.msRequestFullscreen&&this._element.msRequestFullscreen())},e.prototype.exitFullscreen=function(){(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)&&(document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen())},e.prototype.isFullscreen=function(){return!!(document.fullscreenEnabled||document.mozFullscreenEnabled||document.webkitIsFullScreen)},e.prototype.fadeIn=function(t){return this._fade(1,t)},e.prototype.fadeOut=function(t){return this._fade(0,t)},e.prototype.show=function(){return this.display=!0},e.prototype.hide=function(){return this.display=!1},e.prototype.removeAll=function(){var t;for(t=0;t<this.children.length;)this.removeChild(this.children[t]),t++},e.prototype.empty=function(){return this.removeAll()},e.prototype.emit=function(){var t,n,i,o;if(n=arguments[0],t=2<=arguments.length?__slice.call(arguments,1):[],this._cancelClickEventInDragSession&&(n===Event.Click||n===Event.Tap||n===Event.TapStart||n===Event.TapEnd||n===Event.LongPress||n===Event.LongPressStart||n===Event.LongPressEnd)&&this._parentDraggableView()){if(i=null!=(o=this._parentDraggableView())?o.draggable.velocity:void 0,Math.abs(i.x)>this._cancelClickEventInDragSessionVelocity)return;if(Math.abs(i.y)>this._cancelClickEventInDragSessionVelocity)return}return e.__super__.emit.apply(this,[n].concat(__slice.call(t),[this]))},e.prototype.once=function(t,n){return e.__super__.once.call(this,t,n),this._addListener(t,n)},e.prototype.addListener=function(t,n){if(t&&n)return e.__super__.addListener.call(this,t,n),this._addListener(t,n)},e.prototype.removeListener=function(t,n){if(!t)throw Error("View.off needs a valid event name");return e.__super__.removeListener.call(this,t,n),this._removeListener(t,n)},e.prototype._addListener=function(t,e){if((Utils.domValidEvent(this._element,t)||__indexOf.call(Utils.values(Gesture),t)>=0)&&!this._domEventManager.listeners(t).length)return this._domEventManager.addEventListener(t,function(e){return function(n){return e.emit(t,n)}}(this))},e.prototype._removeListener=function(t,e){if(!this.listeners(t).length)return this._domEventManager.removeAllListeners(t)},e.prototype._parentDraggableView=function(){var t,e,n,i,o;for(i=this.ancestors(),e=0,n=i.length;e<n;e++)if(t=i[e],null!=(o=t._draggable)?o.enabled:void 0)return t;return null},e.prototype.on=e.prototype.addListener,e.prototype.off=e.prototype.removeListener,e.prototype.onWillAppear=function(t){this.on(Event.WillAppear,t)},e.prototype.onAppear=function(t){this.on(Event.Appear,t)},e.prototype.onDidAppear=function(t){this.on(Event.DidAppear,t)},e.prototype.onWillDisappear=function(t){this.on(Event.WillDisappear,t)},e.prototype.onDisappear=function(t){this.on(Event.Disappear,t)},e.prototype.onDidDisappear=function(t){this.on(Event.DidDisappear,t)},e.prototype.onClick=function(t){this.on(Event.Click,t)},e.prototype.onDoubleClick=function(t){this.on(Event.DoubleClick,t)},e.prototype.onIn=function(t){this.on(Event.In,t)},e.prototype.onOut=function(t){this.on(Event.Out,t)},e.prototype.onDown=function(t){this.on(Event.Down,t)},e.prototype.onOver=function(t){this.on(Event.Over,t)},e.prototype.onUp=function(t){this.on(Event.Up,t)},e.prototype.onMove=function(t){this.on(Event.Move,t)},e.prototype.onRightClick=function(t){this.on(Event.RightClick,t)},e.prototype.onMouseIn=function(t){this.on(Event.MouseIn,t)},e.prototype.onMouseUp=function(t){this.on(Event.MouseUp,t)},e.prototype.onMouseDown=function(t){this.on(Event.MouseDown,t)},e.prototype.onMouseOver=function(t){this.on(Event.MouseOver,t)},e.prototype.onMouseOut=function(t){this.on(Event.MouseOut,t)},e.prototype.onMouseMove=function(t){this.on(Event.MouseMove,t)},e.prototype.onMouseWheel=function(t){this.on(Event.MouseWheel,t)},e.prototype.onScrollStart=function(t){this.on(Event.ScrollStart,t)},e.prototype.onScroll=function(t){this.on(Event.Scroll,t)},e.prototype.onScrollEnd=function(t){this.on(Event.ScrollEnd,t)},e.prototype.onScrollAnimationDidStart=function(t){this.on(Event.ScrollAnimationDidStart,t)},e.prototype.onScrollAnimationDidEnd=function(t){this.on(Event.ScrollAnimationDidEnd,t)},e.prototype.onTouchStart=function(t){this.on(Event.TouchStart,t)},e.prototype.onTouchEnd=function(t){this.on(Event.TouchEnd,t)},e.prototype.onTouchMove=function(t){this.on(Event.TouchMove,t)},e.prototype.onAnimationStart=function(t){this.on(Event.AnimationStart,t)},e.prototype.onAnimationStop=function(t){this.on(Event.AnimationStop,t)},e.prototype.onAnimationEnd=function(t){this.on(Event.AnimationEnd,t)},e.prototype.onAnimationDidStart=function(t){this.on(Event.AnimationDidStart,t)},e.prototype.onAnimationDidStop=function(t){this.on(Event.AnimationDidStop,t)},e.prototype.onAnimationDidEnd=function(t){this.on(Event.AnimationDidEnd,t)},e.prototype.onDragStart=function(t){this.on(Event.DragStart,t)},e.prototype.onDragWillMove=function(t){this.on(Event.DragWillMove,t)},e.prototype.onDragMove=function(t){this.on(Event.DragMove,t)},e.prototype.onDragDidMove=function(t){this.on(Event.DragDidMove,t)},e.prototype.onDrag=function(t){this.on(Event.Drag,t)},e.prototype.onDragEnd=function(t){this.on(Event.DragEnd,t)},e.prototype.onDragAnimationStart=function(t){this.on(Event.DragAnimationStart,t)},e.prototype.onDragAnimationEnd=function(t){this.on(Event.DragAnimationEnd,t)},e.prototype.onDirectionLockStart=function(t){this.on(Event.DirectionLockStart,t)},e.prototype.onDragEnter=function(t){this.on(Event.DragEnter,t)},e.prototype.onDragOver=function(t){this.on(Event.DragOver,t)},e.prototype.onDragLeave=function(t){this.on(Event.DragLeave,t)},e.prototype.onDrop=function(t){this.on(Event.Drop,t)},e.prototype.onStateSwitch=function(t){this.on(Event.StateDidSwitch,t)},e.prototype.onStateDidSwitch=function(t){this.on(Event.StateDidSwitch,t)},e.prototype.onStateWillSwitch=function(t){this.on(Event.StateWillSwitch,t)},e.prototype.onTap=function(t){this.on(Event.Tap,t)},e.prototype.onTapStart=function(t){this.on(Event.TapStart,t)},e.prototype.onTapEnd=function(t){this.on(Event.TapEnd,t)},e.prototype.onDoubleTap=function(t){this.on(Event.DoubleTap,t)},e.prototype.onForceTap=function(t){this.on(Event.ForceTap,t)},e.prototype.onForceTapChange=function(t){this.on(Event.ForceTapChange,t)},e.prototype.onForceTapStart=function(t){this.on(Event.ForceTapStart,t)},e.prototype.onForceTapEnd=function(t){this.on(Event.ForceTapEnd,t)},e.prototype.onLongPress=function(t){this.on(Event.LongPress,t)},e.prototype.onLongPressStart=function(t){this.on(Event.LongPressStart,t)},e.prototype.onLongPressEnd=function(t){this.on(Event.LongPressEnd,t)},e.prototype.onSwipe=function(t){this.on(Event.Swipe,t)},e.prototype.onSwipeStart=function(t){this.on(Event.SwipeStart,t)},e.prototype.onSwipeEnd=function(t){this.on(Event.SwipeEnd,t)},e.prototype.onSwipeUp=function(t){this.on(Event.SwipeUp,t)},e.prototype.onSwipeUpStart=function(t){this.on(Event.SwipeUpStart,t)},e.prototype.onSwipeUpEnd=function(t){this.on(Event.SwipeUpEnd,t)},e.prototype.onSwipeDown=function(t){this.on(Event.SwipeDown,t)},e.prototype.onSwipeDownStart=function(t){this.on(Event.SwipeDownStart,t)},e.prototype.onSwipeDownEnd=function(t){this.on(Event.SwipeDownEnd,t)},e.prototype.onSwipeLeft=function(t){this.on(Event.SwipeLeft,t)},e.prototype.onSwipeLeftStart=function(t){this.on(Event.SwipeLeftStart,t)},e.prototype.onSwipeLeftEnd=function(t){this.on(Event.SwipeLeftEnd,t)},e.prototype.onSwipeRight=function(t){this.on(Event.SwipeRight,t)},e.prototype.onSwipeRightStart=function(t){this.on(Event.SwipeRightStart,t)},e.prototype.onSwipeRightEnd=function(t){this.on(Event.SwipeRightEnd,t)},e.prototype.onPan=function(t){this.on(Event.Pan,t)},e.prototype.onPanStart=function(t){this.on(Event.PanStart,t)},e.prototype.onPanEnd=function(t){this.on(Event.PanEnd,t)},e.prototype.onPanLeft=function(t){this.on(Event.PanLeft,t)},e.prototype.onPanRight=function(t){this.on(Event.PanRight,t)},e.prototype.onPanUp=function(t){this.on(Event.PanUp,t)},e.prototype.onPanDown=function(t){this.on(Event.PanDown,t)},e.prototype.onScale=function(t){this.on(Event.Scale,t)},e.prototype.onScaleStart=function(t){this.on(Event.ScaleStart,t)},e.prototype.onScaleEnd=function(t){this.on(Event.ScaleEnd,t)},e.prototype.onRotate=function(t){this.on(Event.Rotate,t)},e.prototype.onRotateStart=function(t){this.on(Event.RotateStart,t)},e.prototype.onRotateEnd=function(t){this.on(Event.RotateEnd,t)},e.prototype.toInspect=function(){var t;return t=function(t){return parseInt(t)===t?parseInt(t):Utils.round(t,1)},this.name?"<"+this._kind+" id:"+this.id+" name:"+this.name+" ("+t(this.x)+","+t(this.y)+") "+t(this.width)+"x"+t(this.height)+">":"<"+this._kind+" id:"+this.id+" ("+t(this.x)+","+t(this.y)+") "+t(this.width)+"x"+t(this.height)+">"},e.prototype._createElement=function(){return this._element=document.createElement(this._elementType),this._element.setAttribute("id","MagiX"+this._kind+"::"+this.id),this._element.style.overflow="hidden",this._element.style.outline="none",this._element.style.position="relative",this._element.instance=this},e.prototype._insertElement=function(){return this.bringToFront(),this._context._element.appendChild(this._element)},e.prototype._fade=function(t,e){var n;return e||(e={}),n=!1,"number"==typeof e&&(n=e,e={}),e.props&&(e.properties=e.props),e.properties||(e.properties={}),e.properties.opacity=t,e.curve||(e.curve="linear"),n&&(e.time=n),this.animate(e)},e.prototype._updateShadow=function(){return this._element.style.boxShadow=this.shadowX+"px "+this.shadowY+"px "+this.shadowBlur+"px "+this.shadowSpread+"px "+this.shadowColor+" "+this.shadowInset},e.prototype._updateEffects=function(){var t;this._f_blur||(this._f_blur=""),this._f_hueRotate||(this._f_hueRotate=""),this._f_invert||(this._f_invert=""),this._f_contrast||(this._f_contrast=""),this._f_grayscale||(this._f_grayscale=""),this._f_sepia||(this._f_sepia=""),this._f_saturate||(this._f_saturate=""),this._f_brightness||(this._f_brightness=""),t=this._f_blur+this._f_brightness+this._f_saturate+this._f_hueRotate+this._f_contrast+this._f_invert+this._f_sepia+this._f_grayscale,this._element.style.WebkitFilter=t,this._element.style.filter=t},e.prototype._updateBackDropEffects=function(){var t;this._bf_blur||(this._bf_blur=""),this._bf_hueRotate||(this._bf_hueRotate=""),this._bf_invert||(this._bf_invert=""),this._bf_contrast||(this._bf_contrast=""),this._bf_grayscale||(this._bf_grayscale=""),this._bf_sepia||(this._bf_sepia=""),this._bf_saturate||(this._bf_saturate=""),this._bf_brightness||(this._bf_brightness=""),t=this._bf_blur+this._bf_brightness+this._bf_saturate+this._bf_hueRotate+this._bf_contrast+this._bf_invert+this._bf_sepia+this._bf_grayscale,this._element.style.WebkitBackdropFilter=t,this._element.style.backdropFilter=t},e.prototype._updateTransform=function(){var t,e,n,i;return t="",this._translateX===NULL&&this._translateY===NULL||(e="",n="","number"==typeof this._translateX&&(e="px"),"number"==typeof this._translateY&&(n="px"),t+="translate("+this._translateX+e+", "+this._translateY+n+") "),this._translateZ!==NULL&&(i="","number"==typeof this._translateZ&&(i="px"),t+="translateZ("+this._translateZ+i+") "),this._rotation!==NULL&&(t+="rotate("+this._rotation+"deg) "),this._rotationX!==NULL&&(t+="rotateX("+this._rotationX+"deg) "),this._rotationY!==NULL&&(t+="rotateY("+this._rotationY+"deg) "),this._rotationZ!==NULL&&(t+="rotateZ("+this._rotationZ+"deg) "),this._scale!==NULL&&(t+=this._scaleX===this._scaleY?"scale("+this._scaleX+") ":"scale("+this._scaleX+", "+this._scaleY+") "),this._skewX===NULL&&this._skewY===NULL||(t+=this._skewX===this._skewY?"skew("+this._skewX+"deg) ":"skew("+this._skewX+"deg, "+this._skewY+"deg) "),this._element.style.webkitTransform=t,this._element.style.mozTransform=t,this._element.style.msTransform=t,this._element.style.oTransform=t,this._element.style.transform=t},e}(Element);var ViewStates,ViewStatesIgnoredKeys,__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},__indexOf=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},__slice=[].slice;ViewStatesIgnoredKeys=["ignoreEvent"],ViewStates=function(t){function e(t){this.view=t,this._states={},this._orderedStates=[],this.animationOptions={},this._currentState="default",this._previousStates=[],this.add("default",this.view.props),e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.add=function(t,n){var i,o,r;{if(!Utils.isObject(t))return i=function(){throw Error('Usage example: view.states.add("someName", {x:500})')},Utils.isString(t)||i(),Utils.isObject(n)||i(),this._orderedStates.push(t),this._states[t]=e.filterStateProperties(n);for(o in t)r=t[o],this.add(o,r)}},e.prototype.remove=function(t){if(this._states.hasOwnProperty(t))return delete this._states[t],this._orderedStates=Utils.without(this._orderedStates,t)},e.prototype.switch=function(t,e,n){var i,o,r,s,a,u,h,p,l,c,f;if(null==n&&(n=!1),r=arguments,s=NULL,Utils.isFunction(arguments[1])?s=arguments[1]:Utils.isFunction(arguments[2])?s=arguments[2]:Utils.isFunction(arguments[3])&&(s=arguments[3]),!this._states.hasOwnProperty(t))throw Error("No such state: '"+t+"'");this.emit(Event.StateWillSwitch,this._currentState,t,this),this._previousStates.push(this._currentState),this._currentState=t,u={},o=this.animatingKeys(),c=this._states[t];for(h in c)l=c[h],__indexOf.call(ViewStatesIgnoredKeys,h)>=0||__indexOf.call(o,h)<0||(Utils.isFunction(l)&&(l=l.call(this.view,this.view,h,t)),u[h]=l);i=[];for(a in u)p=u[a],Utils.isNumber(p)?i.push(a):Color.isColorObject(p)?i.push(a):null===p&&i.push(a);return 0===i.length&&(n=!0),n===!0?(this.view.props=u,this.emit(Event.StateDidSwitch,Utils.last(this._previousStates),this._currentState,this)):(null==e&&(e=this.animationOptions),e.properties=u,null!=(f=this._animation)&&f.stop(),this._animation=this.view.animate(e),this._animation.once("stop",function(e){return function(){for(a in u)p=u[a],Utils.isNumber(p)||Color.isColorObject(p)||(e.view[a]=p);if(s&&s(Utils.last(e._previousStates),e._currentState,e),Utils.last(e._previousStates)!==t)return e.emit(Event.StateDidSwitch,Utils.last(e._previousStates),e._currentState,e)}}(this)))},e.prototype.switchInstant=function(t,e){return this.switch(t,null,!0,e)},e.define("state",{get:function(){return this._currentState}}),e.define("current",{get:function(){return this._currentState}}),e.define("all",{get:function(){return Utils.clone(this._orderedStates)}}),e.prototype.states=function(){return Utils.clone(this._orderedStates)},e.prototype.animatingKeys=function(){var t,e,n,i;t=[],i=this._states;for(n in i)e=i[n],t=Utils.union(t,Utils.keys(e));return t},e.prototype.previous=function(t,e){var n,i,o;return n=arguments,o=Utils.last(n),i=NULL,Utils.isFunction(o)&&(n=Array.prototype.slice.call(arguments),i=n.pop(),t===i&&(t=NULL),e===i&&(e={})),null==t&&(t=this.states()),this.switch(Utils.arrayPrev(t,this._currentState),e,i)},e.prototype.next=function(){var t,e,n,i,o,r;return t=arguments,i=Utils.last(t),e=NULL,r=this,Utils.isFunction(i)&&(t=Array.prototype.slice.call(arguments),e=t.pop()),o=Utils.arrayFromArguments(t),o.length||(o=this.states(),n=o.indexOf(this._currentState),o=n+1>o.length?[o[0]]:[o[n+1]]),this.switch(Utils.arrayNext(o,this._currentState),function(){return o.shift(),o.length>0?e?r.next(o,e):r.next(o):e?e():void 0})},e.prototype.last=function(t){var e,n,i,o;return e=arguments,i=Utils.last(e),n=NULL,o=NULL,Utils.isFunction(i)&&(e=Array.prototype.slice.call(arguments),n=e.pop(),t===n&&(t={})),o=this._previousStates.length?this._previousStates:this.states(),this.switch(Utils.last(o),t,n)},e.prototype.emit=function(){var t,n;return t=1<=arguments.length?__slice.call(arguments,0):[],e.__super__.emit.apply(this,arguments),(n=this.view).emit.apply(n,t)},e.filterStateProperties=function(t){var e,n,i;n={};for(e in t)i=t[e],Utils.isString(i)&&Utils.endsWith(e.toLowerCase(),"color")&&Color.isColorString(i)?n[e]=new Color(i):(Utils.isNumber(i)||Utils.isFunction(i)||Utils.isBoolean(i)||Utils.isString(i)||Color.isColorObject(i)||null===i)&&(n[e]=i);return n},e}(Element);var ViewDraggable,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Event.DragSessionStart="dragsessionstart",Event.DragSessionMove="dragsessionmove",Event.DragSessionEnd="dragsessionend",Event.DragAnimationDidStart=Event.DragAnimationStart,Event.DragAnimationDidEnd=Event.DragAnimationEnd,Event.DirectionLockDidStart=Event.DirectionLockStart,ViewDraggable=function(t){function e(t){var n;this.view=t,this._stopSimulation=__bind(this._stopSimulation,this),this._onSimulationStop=__bind(this._onSimulationStop,this),this._onSimulationStep=__bind(this._onSimulationStep,this),this._touchEnd=__bind(this._touchEnd,this),this._touchMove=__bind(this._touchMove,this),this._touchStart=__bind(this._touchStart,this),this._updateViewPosition=__bind(this._updateViewPosition,this),this.touchStart=__bind(this.touchStart,this),n=Defaults.get("ViewDraggable",{}),e.__super__.constructor.call(this,n),Utils.extend(this,n),this.enabled=!0,this._eventBuffer=new EventBuffer,this._constraints=null,this._ignoreUpdateViewPosition=!0,this.attach()}return __extends(e,t),e.define("speedX",e.simpleProperty("speedX",1)),e.define("speedY",e.simpleProperty("speedY",1)),e.define("horizontal",e.simpleProperty("horizontal",!0)),e.define("vertical",e.simpleProperty("vertical",!0)),e.define("momentumVelocityMultiplier",e.simpleProperty("momentumVelocityMultiplier",800)),e.define("directionLock",e.simpleProperty("directionLock",!1)),e.define("directionLockThreshold",e.simpleProperty("directionLockThreshold",{x:10,y:10})),e.define("propagateEvent",e.simpleProperty("propagateEvent",!0)),e.define("constraints",{get:function(){return this._constraints},set:function(t){if(t&&Utils.isObject(t)?(t=Utils.pick(t,["x","y","width","height"]),t=Utils.defaults(t,{x:0,y:0,width:0,height:0}),this._constraints=t):this._constraints={x:0,y:0,width:0,height:0},this._constraints)return this._updateSimulationConstraints(this._constraints)}}),e.define("isDragging",{get:function(){return this._isDragging||!1}}),e.define("isAnimating",{get:function(){return this._isAnimating||!1}}),e.define("isMoving",{get:function(){return this._isMoving||!1}}),e.define("viewStartPoint",{get:function(){return this._viewStartPoint||this.view.point}}),e.define("cursorStartPoint",{get:function(){return this._cursorStartPoint||{x:0,y:0}}}),e.define("viewCursorOffset",{get:function(){return this._viewCursorOffset||{x:0,y:0}}}),e.define("offset",{get:function(){var t;return this._correctedViewStartPoint?t={x:this.view.x-this._correctedViewStartPoint.x,y:this.view.y-this._correctedViewStartPoint.y}:{x:0,y:0}}}),e.prototype.attach=function(){return this.view.on(Gesture.TapStart,this.touchStart),this.view.on("change:x",this._updateViewPosition),this.view.on("change:y",this._updateViewPosition)},e.prototype.remove=function(){return this.view.off(Gesture.TapStart,this.touchStart),this.view.off(Gesture.Pan,this._touchMove),this.view.off(Gesture.PanEnd,this._touchEnd)},e.prototype.updatePosition=function(t){return t},e.prototype.touchStart=function(t){return this._touchStart(t)},e.prototype._updateViewPosition=function(){if(this._ignoreUpdateViewPosition!==!0)return this._point=this.view.point},e.prototype._touchStart=function(t){var e,n,i,o,r,s;for(Event.wrap(document).addEventListener(Gesture.Pan,this._touchMove),Event.wrap(document).addEventListener(Gesture.TapEnd,this._touchEnd),this._isMoving=this.isAnimating,s=this.view.animations(),o=0,r=s.length;o<r;o++)e=s[o],n=e.options.properties,(n.hasOwnProperty("x")||n.hasOwnProperty("y"))&&e.stop();return this._stopSimulation(),this._resetdirectionLock(),t.preventDefault(),this.propagateEvent===!1&&t.stopPropagation(),i=Event.touchEvent(t),this._eventBuffer.push({x:i.clientX,y:i.clientY,t:Date.now()}),this._viewStartPoint=this.view.point,this._correctedViewStartPoint=this.view.point,this.constraints&&this.bounce&&(this._correctedViewStartPoint=this._constrainPosition(this._correctedViewStartPoint,this.constraints,1/this.overdragScale)),this._cursorStartPoint={x:i.clientX,y:i.clientY},this._viewCursorOffset={x:i.clientX-this._correctedViewStartPoint.x,y:i.clientY-this._correctedViewStartPoint.y},this._point=this._correctedViewStartPoint,this._ignoreUpdateViewPosition=!1,this.emit(Event.DragSessionStart,t)},e.prototype._touchMove=function(t){var e,n,i,o,r;if(this.enabled){if(this._point||this.touchStart(t),this._lastEvent=t,t.preventDefault(),this.propagateEvent===!1&&t.stopPropagation(),r=Event.touchEvent(t),this._eventBuffer.push({x:r.clientX,y:r.clientY,t:Date.now()}),n=Utils.clone(this._point),i=this.view.scale*this.view.scaleX,o=this.view.scale*this.view.scaleY,this.horizontal&&(n.x=this._point.x+t.delta.x*i*this.speedX),this.vertical&&(n.y=this._point.y+t.delta.y*o*this.speedY),this._point=Utils.clone(n),this._constraints&&(n=this._constrainPosition(n,this._constraints,this.overdragScale)),this.directionLock){if(!this._directionLockEnabledX&&!this._directionLockEnabledY)return e=t.offset,e.x=e.x*this.speedX*this.view.scaleX*this.view.scale,e.y=e.y*this.speedY*this.view.scaleY*this.view.scale,void this._updatedirectionLock(e);this._directionLockEnabledX&&(n.x=this._viewStartPoint.x),this._directionLockEnabledY&&(n.y=this._viewStartPoint.y)}return n.x===this._viewStartPoint.x&&n.y===this._viewStartPoint.y||this._isDragging||(this._isDragging=!0,this._isMoving=!0,this.emit(Event.DragStart,t)),this.isDragging&&this.emit(Event.DragWillMove,t),this.pixelAlign&&(this.horizontal&&(n.x=parseInt(n.x)),this.vertical&&(n.y=parseInt(n.y))),this._ignoreUpdateViewPosition=!0,this.view.point=this.updatePosition(n),this._ignoreUpdateViewPosition=!1,this.isDragging&&(this.emit(Event.Move,this.view.point),this.emit(Event.DragDidMove,t)),this.emit(Event.DragSessionMove,t)}},e.prototype._touchEnd=function(t){return Event.wrap(document).removeEventListener(Gesture.Pan,this._touchMove),Event.wrap(document).removeEventListener(Gesture.TapEnd,this._touchEnd),this.propagateEvent===!1&&t.stopPropagation(),this._startSimulation(),this.emit(Event.DragSessionEnd,t),this._isDragging&&this.emit(Event.DragEnd,t),this._isDragging=!1,this._ignoreUpdateViewPosition=!0},e.define("constraintsOffset",{get:function(){var t,e,n,i,o,r,s,a;return this.constraints?(a=this._calculateConstraints(this.constraints),i=a.minX,e=a.maxX,o=a.minY,n=a.maxY,s=this.view.point,t={x:Utils.clamp(s.x,i,e),y:Utils.clamp(s.y,o,n)},r={x:s.x-t.x,y:s.y-t.y}):{x:0,y:0}}}),e.define("isBeyondConstraints",{get:function(){var t;return t=this.constraintsOffset,0!==t.x||0!==t.y}}),e.prototype._clampAndScale=function(t,e,n,i){return t<e&&(t=e+(t-e)*i),t>n&&(t=n+(t-n)*i),t},e.prototype._calculateConstraints=function(t){var e;return t?(t.width<this.view.width&&(t.width=this.view.width),t.height<this.view.height&&(t.height=this.view.height),e={minX:Utils.frameGetMinX(t),maxX:Utils.frameGetMaxX(t),minY:Utils.frameGetMinY(t),maxY:Utils.frameGetMaxY(t)},e.maxX-=this.view.width,e.maxY-=this.view.height,e):e={minX:1/0,maxX:1/0,minY:1/0,maxY:1/0}},e.prototype._constrainPosition=function(t,e,n){var i,o,r,s,a,u;return u=this._calculateConstraints(this._constraints),r=u.minX,i=u.maxX,s=u.minY,o=u.maxY,a=this.overdrag?{x:this._clampAndScale(t.x,r,i,n),y:this._clampAndScale(t.y,s,o,n)}:{x:Utils.clamp(t.x,r,i),y:Utils.clamp(t.y,s,o)},0!==this.speedX&&this.horizontal!==!1||(a.x=t.x),0!==this.speedY&&this.vertical!==!1||(a.y=t.y),a},e.define("velocity",{get:function(){return this.isAnimating?this._calculateSimulationVelocity():this._eventBuffer.velocity}}),e.define("angle",{get:function(){return this._eventBuffer.angle}}),e.define("direction",{get:function(){var t;return t=this.velocity,Math.abs(t.x)>Math.abs(t.y)?t.x>0?"right":"left":t.y>0?"down":"up";
}}),e.prototype.calculateVelocity=function(){return this.velocity},e.prototype._calculateSimulationVelocity=function(){var t,e,n;return e=this._simulation.x.finished(),n=this._simulation.y.finished(),t={x:0,y:0},e||(t.x=this._simulation.x.simulator.state.v/this.momentumVelocityMultiplier),n||(t.y=this._simulation.y.simulator.state.v/this.momentumVelocityMultiplier),t},e.prototype.emit=function(t,n){return this.view.emit(t,n),e.__super__.emit.call(this,t,n)},e.prototype._updatedirectionLock=function(t){if(this._directionLockEnabledX=Math.abs(t.y)>this.directionLockThreshold.y,this._directionLockEnabledY=Math.abs(t.x)>this.directionLockThreshold.x,this._directionLockEnabledX||this._directionLockEnabledY)return this.emit(Event.DirectionLockStart,{x:this._directionLockEnabledX,y:this._directionLockEnabledY})},e.prototype._resetdirectionLock=function(){return this._directionLockEnabledX=!1,this._directionLockEnabledY=!1},e.prototype._setupSimulation=function(){if(!this._simulation)return this._simulation={x:this._setupSimulationForAxis("x"),y:this._setupSimulationForAxis("y")},this._updateSimulationConstraints(this.constraints)},e.prototype._setupSimulationForAxis=function(t){var e,n;return e={},e[t]=!0,n=new Simulation({view:this.view,properties:e,model:"inertial-scroll",modelOptions:{momentum:this.momentumOptions,bounce:this.bounceOptions}}),n.on(Event.SimulationStep,function(e){return function(n){return e._onSimulationStep(t,n)}}(this)),n.on(Event.SimulationStop,function(e){return function(n){return e._onSimulationStop(t,n)}}(this)),n},e.prototype._updateSimulationConstraints=function(t){var e,n,i,o,r;if(this._simulation)return t?(r=this._calculateConstraints(this._constraints),i=r.minX,e=r.maxX,o=r.minY,n=r.maxY,this._simulation.x.simulator.options={min:i,max:e},this._simulation.y.simulator.options={min:o,max:n}):(this._simulation.x.simulator.options={min:-(1/0),max:+(1/0)},this._simulation.y.simulator.options={min:-(1/0),max:+(1/0)})},e.prototype._onSimulationStep=function(t,e){var n,i,o,r,s,a,u;if(!("x"===t&&this.horizontal===!1||"y"===t&&this.vertical===!1))return this.constraints?this.bounce?n=e.x-this.view[t]:(u=this._calculateConstraints(this._constraints),r=u.minX,i=u.maxX,s=u.minY,o=u.maxY,"x"===t&&(n=Utils.clamp(e.x,r,i)-this.view[t]),"y"===t&&(n=Utils.clamp(e.x,s,o)-this.view[t])):n=e.x-this.view[t],a=this.view.point,"x"===t&&(a[t]=a[t]+n),"y"===t&&(a[t]=a[t]+n),this.updatePosition(a),this.view[t]=this.updatePosition(a)[t],this.emit(Event.Move,this.view.point)},e.prototype._onSimulationStop=function(t,e){if(("x"!==t||this.horizontal!==!1)&&("y"!==t||this.vertical!==!1)&&this._simulation)return this.pixelAlign&&(this.view[t]=parseInt(this.view[t])),this._simulation.x.finished()&&this._simulation.y.finished()?this._stopSimulation():void 0},e.prototype._startSimulation=function(){var t,e,n,i,o,r,s,a,u,h;if((this.momentum||this.bounce)&&!(this.isBeyondConstraints===!1&&this.momentum===!1||this.isBeyondConstraints===!1&&this.isDragging===!1||(h=this._calculateConstraints(this._constraints),n=h.minX,t=h.maxX,i=h.minY,e=h.maxY,o=this.overdrag===!0||this.view.x>n&&this.view.x<t,r=this.overdrag===!0||this.view.y>i&&this.view.y<e,o===r&&r===!1)))return s=this.velocity,a=s.x*this.momentumVelocityMultiplier*this.speedX*this.view.scaleX*this.view.scale,u=s.y*this.momentumVelocityMultiplier*this.speedY*this.view.scaleY*this.view.scale,this._setupSimulation(),this._isAnimating=!0,this._isMoving=!0,this._simulation.x.simulator.setState({x:this.view.x,v:a}),o&&this._simulation.x.start(),this._simulation.y.simulator.setState({x:this.view.y,v:u}),r&&this._simulation.y.start(),this.emit(Event.DragAnimationStart)},e.prototype._stopSimulation=function(){var t,e;if(this._isAnimating=!1,this._simulation)return null!=(t=this._simulation)&&t.x.stop(),null!=(e=this._simulation)&&e.y.stop(),this._simulation=null,this.emit(Event.Move,this.view.point),this.emit(Event.DragAnimationEnd)},e.prototype.animateStop=function(){return this._stopSimulation()},e.prototype.onMove=function(t){return this.on(Event.Move,t)},e.prototype.onDragStart=function(t){return this.on(Event.DragStart,t)},e.prototype.onDragWillMove=function(t){return this.on(Event.DragWillMove,t)},e.prototype.onDragMove=function(t){return this.on(Event.DragMove,t)},e.prototype.onDragDidMove=function(t){return this.on(Event.DragDidMove,t)},e.prototype.onDrag=function(t){return this.on(Event.Drag,t)},e.prototype.onDragEnd=function(t){return this.on(Event.DragEnd,t)},e.prototype.onDragAnimationStart=function(t){return this.on(Event.DragAnimationStart,t)},e.prototype.onDragAnimationEnd=function(t){return this.on(Event.DragAnimationEnd,t)},e.prototype.onDirectionLockStart=function(t){return this.on(Event.DirectionLockStart,t)},e}(Element);var Page,__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Page=function(t){function e(t){t.url&&(t.parent=-1),t.parent||t.url||(t.parent=App),e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype._kind="Page",e.define("title",{configurable:!0,get:function(){return App.title},set:function(t){App.title=t}}),e.define("url",{configurable:!0,get:function(){return this.url},set:function(t){Routes.add(t,this)}}),e.prototype.isFirst=function(){return!App._pages_counter},e.prototype.toInspect=function(){return this.name?"<Page id:"+this.id+" name:"+this.name+">":"<Page id:"+this.id+">"},e}(View);var Text,__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Text=function(t){function e(t){var n,i;null==t&&(t={}),t.header?(this._kind="TextHeader",this._elementType="h1"):t.paragraph&&(i="TextParagraph",n="p"),e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype._kind="Text",e.prototype._assigned={},e.prototype._text="",e.define("text",{configurable:!0,get:function(){return this._text},set:function(t){var e,n,i,o;for(o=this.children,n=0,i=o.length;n<i;n++)e=o[n],e.parent=null;this._assigned={},this._text=t,this.html=Utils.e(t),this.emit("change:text",t)}}),e.define("value",{configurable:!0,get:function(){return this.text},set:function(t){this.text=t,this.emit("change:value",t)}}),e.define("header",{configurable:!0,get:function(){return this._header},set:function(t){t&&(this.text=this._header=t,this.emit("change:header",t))}}),e.define("paragraph",{configurable:!0,get:function(){return this._paragraph},set:function(t){t&&(this.text=this._paragraph=t,this.emit("change:paragraph",t))}}),e.define("indent",{get:function(){return this._element.style.textIndent},set:function(t){"number"==typeof t&&(t+="px"),this._element.style.textIndent=t}}),e._alias("textIndent","indent"),e.define("decoration",{get:function(){return this._element.style.textDecoration},set:function(t){return this._element.style.textDecoration=t}}),e._alias("textDecoration","decoration"),e.define("spacing",{get:function(){return parseFloat(this._element.style.letterSpacing,10)},set:function(t){"number"==typeof t&&(t+="px"),this._element.style.letterSpacing=t}}),e._alias("letterSpacing","spacing"),e.define("wordSpacing",{get:function(){return parseFloat(this._element.style.wordSpacing,10)},set:function(t){"number"==typeof t&&(t+="px"),this._element.style.wordSpacing=t}}),e.define("wrap",{get:function(){return"break-word"===this._element.style.wordWrap},set:function(t){t===!0?this._element.style.wordWrap="break-word":this._element.style.wordWrap="normal"}}),e.define("break",{get:function(){return void 0!==this._break&&this._break},set:function(t){t===!0?(this._break===!0,this._element.style.wordBreak="break-all"):(this._break===!1,this._element.style.wordBreak="normal")}}),e.define("whiteSpace",{get:function(){return this._element.style.whiteSpace},set:function(t){return this._element.style.whiteSpace=t}}),e.define("nowrap",{get:function(){return"nowrap"===this._element.style.whiteSpace},set:function(t){t===!0?this._element.style.whiteSpace="nowrap":this._element.style.whiteSpace="normal"}}),e.define("lineHeight",{get:function(){return parseFloat(this._element.style.lineHeight)},set:function(t){"number"==typeof t&&(t+="px"),this._element.style.lineHeight=t}}),e._def("textShadowX",0,function(){return this._updateTextShadow()}),e._def("textShadowY",0,function(){return this._updateTextShadow()}),e._def("textShadowBlur",0,function(){return this._updateTextShadow()}),e._def("textShadowColor","",function(){return this._updateTextShadow()}),e.prototype.uppercase=function(){return this._element.style.textTransform="uppercase"},e.prototype.lowercase=function(){return this._element.style.textTransform="lowercase"},e.prototype.underline=function(){return this._element.style.textDecoration="underline"},e.prototype.capitalize=function(){void 0!==this._text&&(this._text.charAt(0).toUpperCase()+this._text.slice(1),this.html=this._text)},e.prototype.centerText=function(){if(this.align="center",this.parent)return this.lineHeight=this.parent.height},e.prototype.assignLink=function(t,e,n){if(t&&t.length>0)return this._assigned[t]={url:e,options:n},this._assignProcessor()},e.prototype.assign=function(t,e){t&&t.length>0&&(this._assigned[t]={options:e},this._assignProcessor())},e.prototype._assignProcessor=function(){var t,n,i,o,r,s,a;t=Utils.keys(this._assigned).length,s="",n=0,a=this;for(i in this._assigned){this._assigned[i].url?this._assigned[i].assign=new Link({color:"inherit",display:"inline",href:this._assigned[i].url}):this._assigned[i].assign=new e({color:"inherit",display:"inline"});for(o in this._assigned[i].options)this._assigned[i].assign[o]=this._assigned[i].options[o];s+=i,n<t-1&&(s+="|"),n++}return r=new RegExp("("+s+")","g"),this.html=this._text.replace(r,function(t){var e,n;return n=a._assigned[t].assign._elementType,e=new RegExp("(</?"+n+">)","i"),a._assigned[t].assign._element.outerHTML.split(e)[0]+t+("</"+n+">")})},e.prototype._updateTextShadow=function(){return this._element.style.textShadow=this.textShadowX+"px "+this.textShadowY+"px "+this.textShadowBlur+"px "+this.textShadowColor},e}(View);var Link,__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Link=function(t){function e(t){e.__super__.constructor.apply(this,arguments),this.on(Event.Click,function(t,e){if(!this.external)return e.url&&this.auto?this._isExternal(e.url)?void 0:(App.go(e.url,!0),t.preventDefault()):void t.preventDefault()})}return __extends(e,t),e.prototype._kind="Link",e.prototype._elementType="a",e.define("url",{get:function(){return this._element.getAttribute("href")},set:function(t){this._element.setAttribute("href",Utils.parseURL(t))}}),e.define("href",{get:function(){return this.url},set:function(t){this.url=t}}),e.define("path",{get:function(){return this.url},set:function(t){this.url=t}}),e.define("link",{get:function(){return this.url},set:function(t){this.url=t}}),e.define("auto",{get:function(){return this._auto===NULL&&(this._auto=!0),this._auto},set:function(t){t===!0?this._auto=!0:this._auto=!1}}),e.define("external",{get:function(){return this._external||(this._external=!1),this._external},set:function(t){t===!0?this._external=!0:this._external=!1}}),e.define("blank",{get:function(){return this._blank!==NULL&&(this._blank=!1),this._blank},set:function(t){t===!0?(this._blank=!0,this.external=!0,this._element.setAttribute("target","_blank")):(this._blank=!1,this.external=!1,this._element.setAttribute("target","_self"))}}),e.define("tab",{get:function(){return this.blank},set:function(t){this.blank=t}}),e.prototype.go=function(t,e){return this.url?!this._isExternal(this.url)&&(App.go(this.url,!0),t)?t.preventDefault():void 0:void(t&&t.preventDefault())},e.prototype._isExternal=function(t){var e,n;return e=function(t){return t.replace("http://","").replace("https://","").split("/")[0]},n=e(t),""!==n&&e(location.href)!==n},e}(Text);var Image,__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};window._Image=window.Image,Image=function(t){function e(t){e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype._kind="Image",e.prototype._elementType="img",e.define("src",{get:function(){return this._src},set:function(t){this._src=t,this._element.setAttribute("src",Utils.parseAsset(t))}}),e.define("image",{get:function(){return this.src},set:function(t){this.src=t}}),e.define("source",{get:function(){return this.src},set:function(t){this.src=t}}),e.define("url",{get:function(){return this.src},set:function(t){this.src=t}}),e.define("aspect",{get:function(){return void 0===this._aspect&&(this._aspect="fit"),this._aspect},set:function(t){return"fit"===t?(this.props={width:"auto",height:"auto",maxWidth:"100%",maxHeight:"100%"},this._aspect="fit"):"fitCenter"===t?(this.props={width:"auto",height:"auto",maxWidth:"100%",maxHeight:"100%",display:"block",margin:"auto"},this._aspect="fitCenter"):"fill"===t?(this.props={width:"100%",height:"100%",maxWidth:"",maxHeight:""},this._aspect="fill"):"fillWidth"===t?(this.props={width:"100%",height:"auto",maxWidth:"",maxHeight:""},this._aspect="fillWidth"):"fillHeight"===t?(this.props={width:"auto",height:"100%",maxWidth:"",maxHeight:""},this._aspect="fillHeight"):"fillHeightCenter"===t?(this.props={width:"auto",height:"100%",maxWidth:"",maxHeight:"",display:"block",margin:"auto"},this._aspect="fillHeightCenter"):void 0}}),e.define("original",{get:function(){return{width:this.element.naturalWidth,height:this.element.naturalHeight}}}),e.define("loaded",{get:function(){return void 0===this._eventLoaded?null:this._eventLoaded},set:function(t){t&&(this._eventLoaded=t,this.on(Event.Load,t))}}),e.define("then",{get:function(){return this.loaded},set:function(t){this.loaded=t}}),e.prototype.onLoad=function(t){this.on(Event.Load,t)},e.prototype.onLoaded=function(t){this.on(Event.Load,t)},e.prototype.onDone=function(t){this.on(Event.Load,t)},e}(View);var Button,__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Button=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype._kind="Button",e.prototype._elementType="button",e.define("icon",{get:function(){return this.image},set:function(t){this.backgroundColor="none",this.image=t,this.imagePosition="center center",this.imageSize="100% 100%",this.imageRepeat=!1,this.padding=0}}),e.prototype.focus=function(){this._element.focus()},e.prototype.resignFocus=function(){this._element.blur()},e}(Text);var Knob,Slider,__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},__bind=function(t,e){return function(){return t.apply(e,arguments)}};Event.SliderValueChange="sliderValueChange",Knob=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.define("constrained",e.simpleProperty("constrained",!1)),e}(View),Slider=function(t){function e(t){null==t&&(t={}),this._setRadius=__bind(this._setRadius,this),this._updateFrame=__bind(this._updateFrame,this),this._updateKnob=__bind(this._updateKnob,this),this._updateFill=__bind(this._updateFill,this),this._touchEnd=__bind(this._touchEnd,this),this._touchStart=__bind(this._touchStart,this),this._updateValue=__bind(this._updateValue,this),Utils.defaults(t,{backgroundColor:"#ccc",borderRadius:50,clip:!1,width:300,height:10,value:0,knobSize:30}),null==t.hitArea&&(t.hitArea=t.knobSize),this.knob=new Knob({backgroundColor:"#fff",shadowY:1,shadowBlur:3,shadowColor:"rgba(0,0,0,0.35)",name:"knob"}),this.fill=new View({backgroundColor:"#333",width:0,force2d:!0,name:"fill",backgroundColor:"#179afc"}),this.sliderOverlay=new View({backgroundColor:null,name:"sliderOverlay"}),e.__super__.constructor.call(this,t),this.knob.parent=this.fill.parent=this.sliderOverlay.parent=this,this.width>this.height?this.fill.height=this.height:this.fill.width=this.width,this.fill.borderRadius=this.sliderOverlay.borderRadius=this.borderRadius,this.knob.draggable.enabled=!0,this.knob.draggable.overdrag=!1,this.knob.draggable.momentum=!0,this.knob.draggable.momentumOptions={friction:5,tolerance:.25},this.knob.draggable.bounce=!1,this.knob.borderRadius=this.knobSize/2,t.value&&(this.value=t.value),this._updateFrame(),this._updateKnob(),this._updateFill(),this.on("change:frame",this._updateFrame),this.on("change:borderRadius",this._setRadius),this.knob.on("change:size",this._updateKnob),this.knob.on("change:frame",this._updateValue),this.knob.on("change:frame",this._updateFill),t.noknob?t.knobSize&&(this.knobSize=t.knobSize):(this.fill.on(Event.TapStart,this._touchStart),this.fill.on(Event.TapEnd,this._touchEnd),this.sliderOverlay.on(Event.TapStart,this._touchStart),this.sliderOverlay.on(Event.TapEnd,this._touchEnd))}return __extends(e,t),e.prototype._kind="Slider",e.define("knobSize",{get:function(){return this._knobSize},set:function(t){return this._knobSize=t,this.knob.width=this._knobSize,this.knob.height=this._knobSize,this._updateFrame()}}),e.define("hitArea",{get:function(){return this._hitArea},set:function(t){return this._hitArea=t,this.width>this.height?(this.sliderOverlay.width=this.width+this.hitArea,this.sliderOverlay.height=this.hitArea):(this.sliderOverlay.width=this.hitArea,this.sliderOverlay.height=this.height+this.hitArea)}}),e.define("min",{get:function(){return this._min||0},set:function(t){return this._min=t}}),e.define("max",{get:function(){return this._max||1},set:function(t){return this._max=t}}),e.define("value",{get:function(){return this.width>this.height?this.valueForPoint(this.knob.midX):this.valueForPoint(this.knob.midY)},set:function(t){return this.width>this.height?this.knob.midX=this.pointForValue(t):this.knob.midY=this.pointForValue(t),this._updateFill(),this._updateValue()}}),e.prototype.pointForValue=function(t){return this.width>this.height?this.knob.constrained?Utils.modulate(t,[this.min,this.max],[0+this.knob.width/2,this.width-this.knob.width/2],!0):Utils.modulate(t,[this.min,this.max],[0,this.width],!0):this.knob.constrained?Utils.modulate(t,[this.min,this.max],[0+this.knob.height/2,this.height-this.knob.height/2],!0):Utils.modulate(t,[this.min,this.max],[0,this.height],!0)},e.prototype.valueForPoint=function(t){return this.width>this.height?this.knob.constrained?Utils.modulate(t,[0+this.knob.width/2,this.width-this.knob.width/2],[this.min,this.max],!0):Utils.modulate(t,[0,this.width],[this.min,this.max],!0):this.knob.constrained?Utils.modulate(t,[0+this.knob.height/2,this.height-this.knob.height/2],[this.min,this.max],!0):Utils.modulate(t,[0,this.height],[this.min,this.max],!0)},e.prototype.animateToValue=function(t,e){return null==e&&(e={curve:"spring(300,25,0)"}),this.width>this.height?e.properties={x:this.pointForValue(t)-this.knob.width/2}:e.properties={y:this.pointForValue(t)-this.knob.height/2},this.knob.animate(e)},e.prototype.onValueChange=function(t){return this.on(Event.SliderValueChange,t)},e.prototype._updateValue=function(){if(this._lastUpdatedValue!==this.value)return this._lastUpdatedValue=this.value,this.emit("change:value",this.value),this.emit(Event.SliderValueChange,this.value)},e.prototype._touchStart=function(t){return t.preventDefault(),this.width>this.height?this.value=this.valueForPoint(Event.touchEvent(t).viewX):this.value=this.valueForPoint(Event.touchEvent(t).viewY),this.knob.draggable._touchStart(t),this._updateValue()},e.prototype._touchEnd=function(t){return this._updateValue()},e.prototype._updateFill=function(){return this.width>this.height?this.fill.width=this.knob.midX:this.fill.height=this.knob.midY},e.prototype._updateKnob=function(){return this.width>this.height?(this.knob.midX=this.fill.width,this.knob.absoluteCenterY()):(this.knob.midY=this.fill.height,this.knob.absoluteCenterX())},e.prototype._updateFrame=function(){return this.knob.draggable.constraints={x:-this.knob.width/2,y:-this.knob.height/2,width:this.width+this.knob.width,height:this.height+this.knob.height},this.knob.constrained&&(this.knob.draggable.constraints={x:0,y:0,width:this.width,height:this.height}),this.width>this.height?(this.fill.height=this.height,this.knob.absoluteCenterY()):(this.fill.width=this.width,this.knob.absoluteCenterX()),this.width>this.height?this.knob.draggable.speedY=0:this.knob.draggable.speedX=0,this.sliderOverlay.absoluteCenter()},e.prototype._setRadius=function(){var t;return t=this.borderRadius,this.fill.style.borderRadius=""+t+"px 0 0 "+t+"px"},e}(View);var ProgressBar,__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};ProgressBar=function(t){function e(t){t.noknob=!0,e.__super__.constructor.apply(this,arguments),this.removeChild(this.knob),t.value===NULL&&(this.value=.5)}return __extends(e,t),e.prototype._kind="ProgressBar",e}(Slider);var TextInput,__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};TextInput=function(t){function e(t){t&&t.multiline&&(this._elementType="textarea",this._multiline=!0,this._resizable=!0),e.__super__.constructor.apply(this,arguments),t.userInteraction||(this.userInteraction=!0),this._multiline&&this.on(Event.Input,function(t,e){this.autoresize&&(e.height="auto",e.height=e.element.scrollHeight)})}return __extends(e,t),e.prototype._kind="Input",e.prototype._elementType="input",e.prototype._multiline=!1,e.define("text",{configurable:!0,get:function(){return this._element.value},set:function(t){this._multiline&&(this._element.innerHTML=t),this._element.value=t,this.emit("change:text",t)}}),e.define("value",{configurable:!0,get:function(){return this._multiline?this._element.value:this.text},set:function(t){this._multiline&&(this._element.innerHTML=t),this.text=t,this.emit("change:value",t)}}),e.define("val",{configurable:!0,get:function(){return this.value},set:function(t){return this.value=t}}),e.define("multiline",{get:function(){return!!this.multiline&&this.multiline}}),e.define("placeholder",{get:function(){return this._element.getAttribute("placeholder")},set:function(t){this._element.setAttribute("placeholder",t)}}),e.define("secure",{get:function(){return void 0===this._secureTextEntry&&(this._secureTextEntry=!1),this._secureTextEntry},set:function(t){t===!0?(this._secureTextEntry=!0,this._element.setAttribute("type","password")):(this._secureTextEntry=!1,this._element.setAttribute("type","text"))}}),e.define("maxlength",{get:function(){return void 0===this._maxlength&&(this._maxlength=0),this._maxlength},set:function(t){this._maxlength=t,this._element.setAttribute("maxlength",t)}}),e.define("limit",{get:function(){return this.limit},set:function(t){this.maxlength=t}}),e.define("readonly",{get:function(){return void 0===this._readonly&&(this._readonly=!0),this._readonly},set:function(t){t===!0?(this._readonly=!0,this._element.setAttribute("readonly","on")):(this._readonly=!1,this._element.setAttribute("readonly","off"))}}),e.define("autocomplete",{get:function(){return void 0===this._autocomplete&&(this._autocomplete=!0),this._autocomplete},set:function(t){t===!0?(this._autocomplete=!0,this._element.setAttribute("autocomplete","on")):(this._autocomplete=!1,this._element.setAttribute("autocomplete","off"))}}),e.define("autocorrect",{get:function(){return void 0===this._autocorrect&&(this._autocorrect=!0),this._autocorrect},set:function(t){t===!0?(this._autocorrecte=!0,this._element.setAttribute("autocorrect","on")):(this._autocorrect=!1,this._element.setAttribute("autocorrect","off"))}}),e.define("autocapitalize",{get:function(){return void 0===this._autocapitalize&&(this._autocapitalize=!0),this._autocapitalize},set:function(t){t===!0?(this._autocapitalize=!0,this._element.setAttribute("autocapitalize","on")):(this._autocapitalize=!1,this._element.setAttribute("autocapitalize","off"))}}),e.define("spellcheck",{get:function(){return void 0===this._spellcheck&&(this._spellcheck=!0),this._spellcheck},set:function(t){t===!0?(this._spellcheck=!0,this._element.setAttribute("spellcheck","true")):(this._spellcheck=!1,this._element.setAttribute("spellcheck","false"))}}),e.define("resizable",{get:function(){return void 0===this._resizable&&(this._resizable=!1),this._resizable},set:function(t){t===!0?(this._resizable=!0,void 0===this._resizeDirection?this._element.style.resize="":this._element.style.resize=this._resizeDirection):(this._resizable=!1,this._element.style.resize="none")}}),e.define("resize",{get:function(){return this.resizable},set:function(t){this.resizable=t}}),e.define("resizeDirection",{get:function(){return void 0===this._resizeDirection&&(this._resizable?this._resizeDirection="both":this._resizeDirection=!1),this._resizeDirection},set:function(t){"vertical"===t||"horizontal"===t?(this._resizeDirection=t,this._resizable&&(this._element.style.resize=t)):this._resizeDirection=""}}),e.define("autoresize",{get:function(){return void 0===this._autoresize&&(this._autoresize=!1),this._autoresize},set:function(t){t===!0?this._autoresize=!0:this._autoresize=!1}}),e.prototype.fit=function(){return this.height=this.scrollHeight},e.prototype.focus=function(){this._element.focus()},e.prototype.resignFocus=function(){this._element.blur()},e.prototype.select=function(){this._element.select()},e.prototype.empty=function(){this.value=""},e.prototype.onKeyDown=function(t){return this.on(Event.KeyDown,t)},e.prototype.onKeyPress=function(t){return this.on(Event.KeyPress,t)},e.prototype.onKeyUp=function(t){return this.on(Event.KeyUp,t)},e.prototype.onFocus=function(t){return this.on(Event.Focus,t)},e.prototype.onResignFocus=function(t){return this.on(Event.ResignFocus,t)},e.prototype.onBlur=function(t){return this.on(Event.ResignFocus,t)},e.prototype.onChange=function(t){return this.on(Event.Change,t)},e.prototype.onWillFocus=function(t){return this.on(Event.WillFocus,t)},e.prototype.onWillResignFocus=function(t){return this.on(Event.WillResignFocus,t)},e.prototype.onInput=function(t){return this.on(Event.Input,t)},e.prototype.onSelect=function(t){return this.on(Event.Select,t)},e}(Text);var FileInput,__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};FileInput=function(t){function e(t){e.__super__.constructor.apply(this,arguments),this._element.setAttribute("type","file"),this._element.setAttribute("tabindex","1")}return __extends(e,t),e.prototype._kind="FileInput",e.prototype._elementType="input",e.define("accept",{get:function(){return this._accept},set:function(t){var e,n;if("string"==typeof t&&(t=[t]),"object"==typeof t){for(n="",e=0;e<t.length;)n+=t[e],e!==t.length-1&&(n+=", "),e++;this._accept=t,this._element.setAttribute("accept",n)}}}),e.define("value",{get:function(){return this._element.value}}),e.define("file",{get:function(){return this._element.files[0]}}),e.define("files",{get:function(){return this._element.files}}),e.define("multiple",{get:function(){return!!this._multiple&&this._multiple},set:function(t){return t===!0?(this._multiple=!0,this._element.setAttribute("multiple","multiple")):(this._multiple=!1,this._element.removeAttribute("multiple"))}}),e.prototype.focus=function(){this._element.focus()},e.prototype.resignFocus=function(){this._element.blur()},e.prototype.open=function(){this._element.click()},e.prototype.onFocus=function(t){return this.on(Event.Focus,t)},e.prototype.onResignFocus=function(t){return this.on(Event.ResignFocus,t)},e.prototype.onBlur=function(t){return this.on(Event.Blur,t)},e.prototype.onChange=function(t){return this.on(Event.Change,t)},e.prototype.onWillFocus=function(t){return this.on(Event.WillFocus,t)},e.prototype.onWillResignFocus=function(t){return this.on(Event.WillResignFocus,t)},e}(View);var Say,say,__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Say=function(t){function e(t,n){var i,o,r,s,a,u,h,p;if(null==n&&(n={}),e.__super__.constructor.apply(this,arguments),!window.speechSynthesis)return n.unsupported&&n.unsupported(),this.emit(Event.Unsupported),log("Say: feature not supported."),!1;if(this.message=new SpeechSynthesisUtterance,s=e.getVoicesAvailable(),n.voice)for(a=0,h=s.length;a<h;a++)r=s[a],r.name===n.voice&&(this.message.voice=r);else if(n.voiceID)for(i=0,u=0,p=s.length;u<p;u++)r=s[u],n.voiceID===i&&(this.message.voice=r),i++;o=this,this.message.voiceURI="native",n.volume&&(this.message.volume=n.volume),n.rate&&(this.message.rate=n.rate),n.pitch&&(this.message.pitch=n.pitch),t&&(this.message.text=t),n.language&&(this.message.lang=n.language),this.message.onboundary=function(t){o.emit(Event.Boundary,t)},this.message.onend=function(t){o.emit(Event.End,t)},this.message.onerror=function(t){o.emit(Event.Error,t)},this.message.onmark=function(t){o.emit(Event.Mark,t)},this.message.onpause=function(t){o.emit(Event.Pause,t)},this.message.onresume=function(t){o.emit(Event.Resume,t)},this.message.onstart=function(t){o.emit(Event.Start,t)},n.auto!==!1&&speechSynthesis.speak(this.message)}return __extends(e,t),e.prototype._kind="Say",e.prototype.speak=function(){this.message&&window.speechSynthesis.speak(this.message)},e.prototype.pause=function(){window.speechSynthesis.pause()},e.prototype.resume=function(){window.speechSynthesis.resume()},e.prototype.cancel=function(){window.speechSynthesis.cancel()},e.getVoicesAvailable=function(){return window.speechSynthesis.getVoices()},e.getVoicesNameAvailable=function(){var t,e,n,i,o;for(n=window.speechSynthesis.getVoices(),e=[],i=0,o=n.length;i<o;i++)t=n[i],e.push(t.name);return e},e.prototype.onUnsupported=function(t){this.on(Event.Unsupported,t)},e.prototype.onBoundary=function(t){this.on(Event.Boundary,t)},e.prototype.onEnd=function(t){this.on(Event.End,t)},e.prototype.onError=function(t){this.on(Event.Error,t)},e.prototype.onMark=function(t){this.on(Event.Mark,t)},e.prototype.onPause=function(t){this.on(Event.Pause,t)},e.prototype.onResume=function(t){this.on(Event.Resume,t)},e.prototype.onStart=function(t){this.on(Event.Start,t)},e}(Element),say=Say;var SpeechRecognition,__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};window.webkitSpeechRecognition&&(window._SpeechRecognition=window.webkitSpeechRecognition),window.SpeechRecognition&&(window._SpeechRecognition=window.SpeechRecognition),SpeechRecognition=function(t){function e(t,e){return null==e&&(e={}),window._SpeechRecognition?(this.recognition=new window._SpeechRecognition,e.continuous&&(this.recognition.continuous=e.continuous),e.interimResults&&(this.recognition.interimResults=e.interimResults),e.language&&(this.recognition.lang=e.language),e.grammars&&(this.recognition.grammars=e.grammars),e.maxAlternatives&&(this.recognition.maxAlternatives=e.maxAlternatives),this.recognition.onaudiostart=function(t){that.emit(Event.AudioStart,t)},this.recognition.onaudioend=function(t){that.emit(Event.AudioEnd,t)},this.recognition.onend=function(t){
that.emit(Event.End,t)},this.recognition.onerror=function(t){that.emit(Event.Error,t)},this.recognition.onstart=function(t){that.emit(Event.Start,t)},this.recognition.onnomatch=function(t){that.emit(Event.NoMatch,t)},this.recognition.onresult=function(t){that.emit(Event.Result,t)},this.recognition.onsoundstart=function(t){that.emit(Event.SoundStart,t)},this.recognition.onsoundend=function(t){that.emit(Event.SoundEnd,t)},this.recognition.onspeechstart=function(t){that.emit(Event.SpeechStart,t)},void(this.recognition.onspeechend=function(t){that.emit(Event.SpeechEnd,t)})):(e.unsupported&&e.unsupported(),this.emit(Event.Unsupported),this.supported=!1,log("SpeechRecognition: feature not supported."),!1)}return __extends(e,t),e.prototype._kind="SpeechRecognition",e.prototype.supported=!1,e.prototype.abort=function(){this.recognition.abort()},e.prototype.start=function(){this.recognition.start()},e.prototype.stop=function(){this.recognition.stop()},e.prototype.onUnsupported=function(t){this.on(Event.Unsupported,t)},e.prototype.onAudioStart=function(t){this.on(Event.AudioStart,t)},e.prototype.onAudioEnd=function(t){this.on(Event.AudioEnd,t)},e.prototype.onNoMatch=function(t){this.on(Event.NoMatch,t)},e.prototype.onResult=function(t){this.on(Event.Result,t)},e.prototype.onSoundStart=function(t){this.on(Event.SoundStart,t)},e.prototype.onSoundEnd=function(t){this.on(Event.SoundEnd,t)},e.prototype.onSpeechStart=function(t){this.on(Event.SpeechStart,t)},e.prototype.onSpeechEnd=function(t){this.on(Event.SpeechEnd,t)},e.prototype.onEnd=function(t){this.on(Event.End,t)},e.prototype.onError=function(t){this.on(Event.Error,t)},e.prototype.onStart=function(t){this.on(Event.Start,t)},e}(Element);var Canvas,__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Canvas=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype._kind="Canvas",e.prototype._elementType="canvas",e.prototype.getContext=function(t){return null==t&&(t="2d"),this._element.getContext(t)},e}(View);var WebView,__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};WebView=function(t){function e(t){e.__super__.constructor.apply(this,arguments),this._sandbox={},this.content=this._element.contentWindow,this.document=this._element.contentDocument}return __extends(e,t),e.prototype._kind="WebView",e.prototype._elementType="iframe",e.prototype.reload=function(){return this._element.contentWindow.location.reload()},e.define("url",{get:function(){return this._url===NULL&&(this._url=""),this._url},set:function(t){this._url=t,this._element.setAttribute("src",t)}}),e.define("src",{get:function(){return this.url},set:function(t){this.url=t}}),e._def_enabled=function(t){return this.define(t,{get:function(){return void 0===this["_"+t]||this["_"+t]},set:function(e){return e!==!0&&(e=!1),this["_"+t]=e,this["_"+t.replace("Enabled","")]=e,this._updateSandbox()}})},e._def_enabled("scriptsEnabled"),e._def_enabled("formsEnabled"),e._def_enabled("popupsEnabled"),e._def_enabled("pointerLockEnabled"),e._def_enabled("sameOriginEnabled"),e._def_enabled("navigationEnabled"),e.prototype.onLoad=function(t){return this.on(Event.Load,t)},e.prototype.onLoaded=function(t){return this.on(Event.Loaded,t)},e.prototype.onDone=function(t){return this.on(Event.Loaded,t)},e.prototype._updateSandbox=function(){var t,e,n;n={forms:"allow-forms",pointerLock:"allow-pointer-lock",popups:"allow-popups",sameOrigin:"allow-same-origin",scripts:"allow-scripts",navigation:"allow-top-navigation"},e="";for(t in this._sandbox)n[t]!==NULL&&this._sandbox[t]===!1&&delete n[t];for(t in n)e+=n[t]+" ";this._element.setAttribute("sandbox",e)},e}(View);var Dropdown,__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Dropdown=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype._kind="Dropdown",e.prototype._elementType="select",e.define("options",{get:function(){return this._options===NULL&&(this._options={}),this._options},set:function(t){var e,n,i;if(!Utils.isObject(t))return!1;this._options=t,i=[];for(n in t)n!==NULL?(e=document.createElement("option"),e.text=t[n],t[n].value!==NULL&&e.setAttribute("value",n),i.push(this._element.add(e))):i.push(void 0);return i}}),e.define("enabled",{get:function(){return this._enabled===NULL&&(this._enabled=!0),this._enabled},set:function(t){t===!0?(this._enabled=t,this._element.disabled=!1):(this._enabled=!1,this._element.disabled=!0)}}),e.define("value",{get:function(){return this._element.options[this._element.selectedIndex].value},set:function(t){this._element.value=t}}),e.prototype.focus=function(){this._element.setAttribute("autofocus","autofocus")},e.prototype.resignFocus=function(){this._element.removeAttribute("autofocus")},e.prototype.onFocus=function(t){this.on(Event.Focus,t)},e.prototype.onResignFocus=function(t){this.on(Event.ResignFocus,t)},e.prototype.onBlur=function(t){this.on(Event.Blur,t)},e.prototype.onChange=function(t){this.on(Event.Change,t)},e}(View);var Checkbox,CheckboxInput,__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};CheckboxInput=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype._kind="CheckboxInput",e.prototype._elementType="input",e}(View),Checkbox=function(t){function e(t){var n;this.input=new CheckboxInput,this.input._element.setAttribute("type","checkbox"),this.input.style.verticalAlign="middle",this.label=new Text(App.Originals.Checkbox.Text),e.__super__.constructor.apply(this,arguments),n=this,this.addChild(this.input),this.addChild(this.label),this.onClick(function(){if(this.enabled)return n.checked?n.checked=!1:n.checked=!0})}return __extends(e,t),e.prototype._kind="Checkbox",e.define("enabled",{get:function(){return this._enabled===NULL&&(this._enabled=!0),this._enabled},set:function(t){t===!0?(this._enabled=!0,this.input._element.disabled=!1):(this._enabled=!1,this.input._element.disabled=!0)}}),e.define("checked",{get:function(){return this.input._element.checked},set:function(t){t===!0?(this.input._element.checked=!0,this.emit("change:value",!0),this.emit("change:checked",!0)):(this.input._element.checked=!1,this.emit("change:value",!1),this.emit("change:checked",!1))}}),e.define("text",{get:function(){return this.label.text},set:function(t){this.label.text=t}}),e.prototype.focus=function(){this.input._element.focus()},e.prototype.resignFocus=function(){this.input._element.blur()},e.prototype.onChange=function(t){this.on("change:value",t)},e}(View);var RadioButton,RadioButtonInput,RadioButtonOriginalInput,__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};RadioButtonOriginalInput=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.element.setAttribute("type","radio"),this.style.verticalAlign="middle"}return __extends(e,t),e.prototype._elementType="input",e.prototype._kind="RadioButtonInput",e}(View),RadioButtonInput=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.props={width:18,height:18,padding:0,borderRadius:10,borderWidth:1,borderColor:"rgba(0, 0, 0, 0.08)",backgroundColor:white,display:inlineBlock},this.style.float="left",this.dot=new View({width:10,height:10,borderRadius:5,backgroundColor:"#179afc",opacity:0,parent:this}),this.dot.absoluteCenter(),this.checked=!1}return __extends(e,t),e.prototype._kind="RadioButtonInput",e}(View),RadioButton=function(t){function e(t){null==t&&(t={}),this.input=NULL,t.original?this.input=new RadioButtonOriginalInput:(t.original=!1,this.input=new RadioButtonInput),this.original=t.original,this.label=new Text(App.Originals.RadioButton.Text),this.original&&(this.label.fontSize=12),e.__super__.constructor.apply(this,arguments),this.addChild(this.input),this.addChild(this.label),this.on(Event.Click,function(t,e){if(this.enabled)return this.checked=!0})}return __extends(e,t),e.prototype._kind="RadioButton",e.define("enabled",{get:function(){return this._enabled===NULL&&(this._enabled=!0),this._enabled},set:function(t){t===!0?(this._enabled=!0,this.original?this.input._element.disabled=!1:this.input.opacity=1):(this._enabled=!1,this.original?this.input._element.disabled=!0:this.input.opacity=.5)}}),e.define("checked",{get:function(){return this.original?this.input._element.checked:this.input.checked},set:function(t){var e,n,i,o;if(t!==this.input._element.checked)if(t===!0){if((t!==this.input.checked||this.original)&&(this.emit("change:value",!0),this.emit("change:checked",!0)),this.original)this.input._element.checked=!0;else if(this.input.checked=!0,this.input.dot.opacity=1,this._group&&App.__radiobuttons[this._group])for(o=App.__radiobuttons[this._group],n=0,i=o.length;n<i;n++)e=o[n],e&&e!==this&&(e.checked=!1)}else(t!==this.input.checked||this.original)&&(this.emit("change:value",!1),this.emit("change:checked",!1)),this.original?this.input._element.checked=!1:(this.input.checked=!1,this.input.dot.opacity=0)}}),e.define("text",{get:function(){return this.label.text},set:function(t){this.label.text=t,this.emit("change:text",t)}}),e.define("group",{get:function(){return this._group===NULL&&(this._group=""),this._group},set:function(t){var e;this._group&&!this.orignal&&(e=App.__radiobuttons[this._group].indexof(this),e>-1&&App.__radiobuttons[this._group].splice(e,1)),this._group=t,this.original?this.input._element.setAttribute("name",t):(App.__radiobuttons||(App.__radiobuttons={}),App.__radiobuttons[this._group]||(App.__radiobuttons[this._group]=[]),App.__radiobuttons[this._group].push(this))}}),e.prototype.focus=function(){this.input._element.focus()},e.prototype.resignFocus=function(){this.input._element.blur()},e.prototype.onChange=function(t){return this.on("change:value",t)},e}(View);var Pview,__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Pview=function(t){function e(t){this.pview=new Object,e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype._kind="Pview",e.prototype.play=function(){this.pview.play()},e.prototype.load=function(){this.pview.load()},e.prototype.pause=function(){this.pview.pause()},e.prototype.canPlayType=function(t){return this.pview.canPlayType(t)},e.prototype.addTextTrack=function(t,e,n){this._element.addTextTrack(t,e,n)},e.define("video",{get:function(){return this.pview.currentSrc},set:function(t){if(this.pview.mediaType!==NULL){if("video"===this.pview.mediaType)return void(this.pview.src=Utils.parseAsset(t));this.pview.pause(),this._element.removeChild(this.pview)}this.pview=document.createElement("video"),this.pview.style.overflow="hidden",this.pview.style.display="block",this.pview.style.width="100%",this.pview.innerHTML="",this.pview.mediaType="video",this._element.appendChild(this.pview),this.pview.source=document.createElement("source"),this.pview.source.setAttribute("src",Utils.parseAsset(t)),this.pview.appendChild(this.pview.source),this._updateProperties(),this.pview.element=Event.wrap(this.pview).element,this.pview.on=this.pview.addEventListener,this.pview.off=this.pview.removeEventListener}}),e.define("audio",{get:function(){return this.pview.currentSrc},set:function(t){if(this.pview.mediaType!==NULL){if("audio"===this.pview.mediaType)return void(this.pview.src=Utils.parseAsset(t));this.pview.pause(),this._element.removeChild(this.pview)}this.pview=document.createElement("audio"),this.pview.style.overflow="hidden",this.pview.style.display="block",this.pview.style.width="100%",this.pview.innerHTML="",this.pview.mediaType="audio",this._element.appendChild(this.pview),this.pview.source=document.createElement("source"),this.pview.source.setAttribute("src",Utils.parseAsset(t)),this.pview.appendChild(this.pview.source),this._updateProperties(),this.pview.element=Event.wrap(this.pview).element,this.pview.on=this.pview.addEventListener,this.pview.off=this.pview.removeEventListener}}),e.define("autoplay",{get:function(){return this.pview.autoplay},set:function(t){this._autoplay=t,this.pview.autoplay=t}}),e.define("buffered",{get:function(){return this.pview.buffered},set:function(t){log("Pview: cannot set buffered property.")}}),e.define("controls",{get:function(){return this.pview.controls},set:function(t){this._controls=t,this.pview.controls=t}}),e.define("currentTime",{get:function(){return this.pview.currentTime},set:function(t){this._currentTime=t,this.pview.currentTime=t}}),e.define("defaultMuted",{get:function(){return this.pview.defaultMuted},set:function(t){this._defaultMuted=t,this.pview.defaultMuted=t}}),e.define("defaultPlaybackRate",{get:function(){return this.pview.defaultPlaybackRate},set:function(t){this._defaultPlaybackRate=t,this.pview.defaultPlaybackRate=t}}),e.define("duration",{get:function(){return this.pview.duration},set:function(t){log("Pview: cannot set duration property.")}}),e.define("ended",{get:function(){return this.pview.ended},set:function(t){log("Pview: cannot set ended property.")}}),e.define("loop",{get:function(){return this._element.loop},set:function(t){this._loop=t,this.pview.loop=t}}),e.define("mediaGroup",{get:function(){return this._element.mediaGroup},set:function(t){this._mediaGroup=t,this.pview.mediaGroup=t}}),e.define("muted",{get:function(){return this._element.muted},set:function(t){this._muted=t,this.pview.muted=t}}),e.define("networkState",{get:function(){return this.pview.networkState},set:function(t){log("Pview: cannot set networkState property.")}}),e.define("paused",{get:function(){return this.pview.paused},set:function(t){log("Pview: cannot set paused property.")}}),e.define("playbackRate",{get:function(){return this.pview.playbackRate},set:function(t){this._playbackRate=t,this.pview.playbackRate=t}}),e.define("played",{get:function(){return this.pview.played},set:function(t){log("Pview: cannot set played property.")}}),e.define("preload",{get:function(){return this.pview.preload},set:function(t){this._preload=t,this.pview.preload=t}}),e.define("readyState",{get:function(){return this.pview.readyState},set:function(t){log("Pview: cannot set readyState property.")}}),e.define("seekable",{get:function(){return this.pview.seekable},set:function(t){console.log("Pview: cannot set seekable property.")}}),e.define("seeking",{get:function(){return this.pview.seeking},set:function(t){console.log("Pview: cannot set seeking property.")}}),e.define("textTracks",{get:function(){return this.pview.textTracks},set:function(t){console.log("Pview: cannot set textTracks property.")}}),e.define("volume",{get:function(){return this.pview.volume},set:function(t){this._volume=t,this.pview.volume=t}}),e.prototype.on=function(t,e){return this.pview.on(t,e)},e.prototype.off=function(t,e){return this.pview.off(t,e)},e.prototype.onCanPlay=function(t){return this.on(Event.CanPlay,t)},e.prototype.onCanPlayThrough=function(t){return this.on(Event.CanPlayThrough,t)},e.prototype.onDurationChange=function(t){return this.on(Event.DurationChange,t)},e.prototype.onEmptied=function(t){return this.on(Event.Emptied,t)},e.prototype.onReachEnd=function(t){return this.on(Event.ReachEnd,t)},e.prototype.onLoadedData=function(t){return this.on(Event.LoadedData,t)},e.prototype.onLoadedMetaData=function(t){return this.on(Event.LoadedMetaData,t)},e.prototype.onLoadStart=function(t){return this.on(Event.LoadStart,t)},e.prototype.onPause=function(t){return this.on(Event.Pause,t)},e.prototype.onPlay=function(t){return this.on(Event.Play,t)},e.prototype.onPlaying=function(t){return this.on(Event.Playing,t)},e.prototype.onProgress=function(t){return this.on(Event.Progress,t)},e.prototype.onSpeedChange=function(t){return this.on(Event.SpeedChange,t)},e.prototype.onSeeked=function(t){return this.on(Event.Seeked,t)},e.prototype.onSeeking=function(t){return this.on(Event.Seeking,t)},e.prototype.onStalled=function(t){return this.on(Event.Stalled,t)},e.prototype.onSuspend=function(t){return this.on(Event.Suspend,t)},e.prototype.onTimeUpdate=function(t){return this.on(Event.TimeUpdate,t)},e.prototype.onVolumeChange=function(t){return this.on(Event.VolumeChange,t)},e.prototype.onWaiting=function(t){return this.on(Event.Waiting,t)},e._updateProperties=function(){this._autoplay!==NULL&&(this.autoplay=this._autoplay),this._controls!==NULL&&(this.controls=this._controls),this._currentTime!==NULL&&(this.currentTime=this._currentTime),this._defaultMuted!==NULL&&(this.defaultMuted=this._defaultMuted),this._defaultPlaybackRate!==NULL&&(this.defaultPlaybackRate=this._defaultPlaybackRate),this._loop!==NULL&&(this.loop=this._loop),this._mediaGroup!==NULL&&(this.mediaGroup=this._mediaGroup),this._muted!==NULL&&(this.muted=this._muted),this._playbackRate!==NULL&&(this.playbackRate=this._playbackRate),this._preload!==NULL&&(this.preload=this._preload),this._volume!==NULL&&(this.volume=this._volume)},e}(View);var List,__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};List=function(t){function e(t){var n,i;n=Utils.clone(t),t&&(t.length&&delete t.length,t.each&&delete t.each),e.__super__.constructor.call(this,t),this.children=[],this.count=0,this.functionAtIndex=!1,this.functionToCount=function(){return this.count},this.horizontal=!1,n&&(n.length&&(i=n.length,this.length(i),delete n.length),n.horizontal&&(this.horizontal=n.horizontal),n.vertical&&(this.horizontal=!n.vertical),n.each&&(this.each(n.each),delete n.each))}return __extends(e,t),e.prototype._kind="List",e.prototype._elementType="ul",e.prototype.length=function(t){var e,n;return t&&"number"==typeof t&&(n=t,t=function(){return n}),t?void(this.functionToCount=t):(e=this.functionToCount(),"number"!=typeof e&&(e=0),this.count=e,this.count)},e.prototype.each=function(t){var e,n,i;for(this.length(),t&&(this.functionAtIndex=t),i=this,e=0;e<this.count;){if(t){if(n=t(null,e),!n)return void log("List: nothing was return from the each function.");this.horizontal?n.display="inline-block":n.display="block",i.addChild(n)}e++}},e.prototype.itemAtIndex=function(t){return this.children[t]},e.prototype.addItem=function(t){this.addChild(t)},e.prototype.removeItem=function(t){this.removeChild(t)},e.prototype.removeItemAtIndex=function(t){var e;for(e in this.children)if(e===t)return void this.removeChild(this.parent.children[e])},e.prototype.reload=function(){var t,e,n,i;if(this.functionAtIndex){if(this.length(),this.count<this.children.length)for(t=this.children.length,e=0;e<t;)this.count<=e&&this.removeChild(this.children[0]),e++;for(e=0;e<this.count;)i=this.children[e],n=this.functionAtIndex(i,e),this.horizontal?n.display="inline-block":n.display="block",!i&&n&&this.addChild(n),e++}},e.prototype.reset=function(){return this._children=[],this.html="",this.each(this.functionAtIndex)},e}(View);var ListItem,__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};ListItem=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype._kind="ListItem",e.prototype._elementType="li",e.prototype.itemIndex=function(){var t;if(!this||!this.parent||!this.parent.children)return!1;for(t in this.parent.children)if(this.parent.children[t]===this)return parseInt(t,10)},e.prototype.removeFromList=function(){this.parent.removeChild(this)},e}(View);var CSS,Debounce,Delay,FadeIn,FadeOut,Hide,Interval,Show,Throttle;Delay=Utils.delay,Interval=Utils.interval,Debounce=Utils.debounce,Throttle=Utils.throttle,FadeIn=function(t,e){return t.fadeIn(e)},FadeOut=function(t,e){return t.fadeIn(e)},Show=function(t){return t.show()},Hide=function(t){return t.hide()},CSS=Utils.insertCSS;